var $parcel$global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function $parcel$interopDefault(e){return e&&e.__esModule?e.default:e}var $parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire7a03;null==parcelRequire&&((parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var n={id:e,exports:{}};return $parcel$modules[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire7a03=parcelRequire);var parcelRegister=parcelRequire.register;parcelRegister("8JOml",function(e,t){function n(e,t,n,i,r,o){return{tag:e,key:t,attrs:n,children:i,text:r,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}n.normalize=function(e){return Array.isArray(e)?n("[",void 0,void 0,n.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:n("#",void 0,void 0,String(e),void 0,void 0)},n.normalizeChildren=function(e){var t=[];if(e.length){// Note: this is a *very* perf-sensitive check.
// Fun fact: merging the loop like this is somehow faster than splitting
// it, noticeably so.
for(var i=null!=e[0]&&null!=e[0].key,r=1;r<e.length;r++)if((null!=e[r]&&null!=e[r].key)!==i)throw TypeError(i&&(null!=e[r]||"boolean"==typeof e[r])?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var r=0;r<e.length;r++)t[r]=n.normalize(e[r])}return t},e.exports=n}),parcelRegister("gQsxe",function(e,t){var n=parcelRequire("8JOml");e.exports=function(e){return null==e&&(e=""),n("<",void 0,void 0,e,void 0,void 0)}}),parcelRegister("pcZwJ",function(e,t){var n=parcelRequire("8JOml"),i=parcelRequire("jPPUy");e.exports=function(){var e=i.apply(0,arguments);return e.tag="[",e.children=n.normalizeChildren(e.children),e}}),parcelRegister("jPPUy",function(e,t){var n=parcelRequire("8JOml");// Call via `hyperscriptVnode.apply(startOffset, arguments)`
//
// The reason I do it this way, forwarding the arguments and passing the start
// offset in `this`, is so I don't have to create a temporary array in a
// performance-critical path.
//
// In native ES6, I'd instead add a final `...args` parameter to the
// `hyperscript` and `fragment` factories and define this as
// `hyperscriptVnode(...args)`, since modern engines do optimize that away. But
// ES5 (what Mithril.js requires thanks to IE support) doesn't give me that luxury,
// and engines aren't nearly intelligent enough to do either of these:
//
// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to
//    another function only to be indexed.
// 2. Elide an `arguments` allocation when it's passed to any function other
//    than `Function.prototype.apply` or `Reflect.apply`.
//
// In ES6, it'd probably look closer to this (I'd need to profile it, though):
// module.exports = function(attrs, ...children) {
//     if (attrs == null || typeof attrs === "object" && attrs.tag == null && !Array.isArray(attrs)) {
//         if (children.length === 1 && Array.isArray(children[0])) children = children[0]
//     } else {
//         children = children.length === 0 && Array.isArray(attrs) ? attrs : [attrs, ...children]
//         attrs = undefined
//     }
//
//     if (attrs == null) attrs = {}
//     return Vnode("", attrs.key, attrs, children)
// }
e.exports=function(){var e,t=arguments[this],i=this+1;if(null==t?t={}:("object"!=typeof t||null!=t.tag||Array.isArray(t))&&(t={},i=this),arguments.length===i+1)e=arguments[i],Array.isArray(e)||(e=[e]);else for(e=[];i<arguments.length;)e.push(arguments[i++]);return n("",t.key,t,e)}}),parcelRegister("c0EvV",function(e,t){/** @constructor */var n=function(e){if(!(this instanceof n))throw Error("Promise must be called with 'new'.");if("function"!=typeof e)throw TypeError("executor must be a function.");var t=this,i=[],r=[],o=c(i,!0),a=c(r,!1),s=t._instance={resolvers:i,rejectors:r},l="function"==typeof setImmediate?setImmediate:setTimeout;function c(e,n){return function o(c){var h;try{if(n&&null!=c&&("object"==typeof c||"function"==typeof c)&&"function"==typeof(h=c.then)){if(c===t)throw TypeError("Promise can't be resolved with itself.");u(h.bind(c))}else l(function(){n||0!==e.length||console.error("Possible unhandled promise rejection:",c);for(var t=0;t<e.length;t++)e[t](c);i.length=0,r.length=0,s.state=n,s.retry=function(){o(c)}})}catch(e){a(e)}}}function u(e){var t=0;function n(e){return function(n){t++>0||e(n)}}var i=n(a);try{e(n(o),i)}catch(e){i(e)}}u(e)};n.prototype.then=function(e,t){var i,r,o=this,a=o._instance;function s(e,t,n,o){t.push(function(t){if("function"!=typeof e)n(t);else try{i(e(t))}catch(e){r&&r(e)}}),"function"==typeof a.retry&&o===a.state&&a.retry()}var l=new n(function(e,t){i=e,r=t});return s(e,a.resolvers,i,!0),s(t,a.rejectors,r,!1),l},n.prototype.catch=function(e){return this.then(null,e)},n.prototype.finally=function(e){return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})},n.resolve=function(e){return e instanceof n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.all=function(e){return new n(function(t,n){var i=e.length,r=0,o=[];if(0===e.length)t([]);else for(var a=0;a<e.length;a++)!function(a){function s(e){r++,o[a]=e,r===i&&t(o)}null!=e[a]&&("object"==typeof e[a]||"function"==typeof e[a])&&"function"==typeof e[a].then?e[a].then(s,n):s(e[a])}(a)})},n.race=function(e){return new n(function(t,n){for(var i=0;i<e.length;i++)e[i].then(t,n)})},e.exports=n}),parcelRegister("03gNt",function(e,t){e.exports=parcelRequire("fJQVn")("undefined"!=typeof window?window:null)}),parcelRegister("fJQVn",function(e,t){var n=parcelRequire("8JOml");e.exports=function(e){var t,i,r=e&&e.document,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function a(e){return e.attrs&&e.attrs.xmlns||o[e.tag]}//sanity check to discourage people from doing `vnode.state = ...`
function s(e,t){if(e.state!==t)throw Error("'vnode.state' must not be modified.")}//Note: the hook is passed as the `this` argument to allow proxying the
//arguments without requiring a full array allocation to do so. It also
//takes advantage of the fact the current `vnode` is the first argument in
//all lifecycle methods.
function l(e){var t=e.state;try{return this.apply(t,arguments)}finally{s(e,t)}}// IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when
// inside an iframe. Catch and swallow this error, and heavy-handidly return null.
function c(){try{return r.activeElement}catch(e){return null}}//create
function u(e,t,n,i,r,o,a){for(var s=n;s<i;s++){var l=t[s];null!=l&&h(e,l,r,a,o)}}function h(e,t,n,i,r){var o=t.tag;if("string"==typeof o)switch(t.state={},null!=t.attrs&&Z(t.attrs,t,n),o){case"#":d(e,t,r);break;case"<":f(e,t,i,r);break;case"[":m(e,t,n,i,r);break;default:y(e,t,n,i,r)}else v(e,t,n,i,r)}function d(e,t,n){t.dom=r.createTextNode(t.children),O(e,t.dom,n)}var p={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function f(e,t,n,i){var o,a=t.children.match(/^\s*?<(\w+)/im)||[],s=r.createElement(p[a[1]]||"div");"http://www.w3.org/2000/svg"===n?(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",s=s.firstChild):s.innerHTML=t.children,t.dom=s.firstChild,t.domSize=s.childNodes.length,// Capture nodes to remove, so we don't confuse them.
t.instance=[];for(var l=r.createDocumentFragment();o=s.firstChild;)t.instance.push(o),l.appendChild(o);O(e,l,i)}function m(e,t,n,i,o){var a=r.createDocumentFragment();if(null!=t.children){var s=t.children;u(a,s,0,s.length,n,null,i)}t.dom=a.firstChild,t.domSize=a.childNodes.length,O(e,a,o)}function y(e,t,n,i,o){var s=t.tag,l=t.attrs,c=l&&l.is,h=(i=a(t)||i)?c?r.createElementNS(i,s,{is:c}):r.createElementNS(i,s):c?r.createElement(s,{is:c}):r.createElement(s);if(t.dom=h,null!=l&&B(t,l,i),O(e,h,o),!L(t)&&null!=t.children){var d=t.children;u(h,d,0,d.length,n,null,i),"select"===t.tag&&null!=l&&G(t,l)}}function g(e,t){var i;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(i=e.state.view).$$reentrantLock$$)return;i.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(i=e.tag).$$reentrantLock$$)return;i.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(Z(e.state,e,t),null!=e.attrs&&Z(e.attrs,e,t),e.instance=n.normalize(l.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");i.$$reentrantLock$$=null}function v(e,t,n,i,r){g(t,n),null!=t.instance?(h(e,t.instance,n,i,r),t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0):t.domSize=0}//update
/**
	 * @param {Element|Fragment} parent - the parent element
	 * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for
	 *                               this part of the tree
	 * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.
	 * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)
	 * @param {Element | null} nextSibling - the next DOM node if we're dealing with a
	 *                                       fragment that is not the last item in its
	 *                                       parent
	 * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any
	 * @returns void
	 */// This function diffs and patches lists of vnodes, both keyed and unkeyed.
//
// We will:
//
// 1. describe its general structure
// 2. focus on the diff algorithm optimizations
// 3. discuss DOM node operations.
// ## Overview:
//
// The updateNodes() function:
// - deals with trivial cases
// - determines whether the lists are keyed or unkeyed based on the first non-null node
//   of each list.
// - diffs them and patches the DOM if needed (that's the brunt of the code)
// - manages the leftovers: after diffing, are there:
//   - old nodes left to remove?
// 	 - new nodes to insert?
// 	 deal with them!
//
// The lists are only iterated over once, with an exception for the nodes in `old` that
// are visited in the fourth part of the diff and in the `removeNodes` loop.
// ## Diffing
//
// Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837
// may be good for context on longest increasing subsequence-based logic for moving nodes.
//
// In order to diff keyed lists, one has to
//
// 1) match nodes in both lists, per key, and update them accordingly
// 2) create the nodes present in the new list, but absent in the old one
// 3) remove the nodes present in the old list, but absent in the new one
// 4) figure out what nodes in 1) to move in order to minimize the DOM operations.
//
// To achieve 1) one can create a dictionary of keys => index (for the old list), then iterate
// over the new list and for each new vnode, find the corresponding vnode in the old list using
// the map.
// 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new
// and must be created.
// For the removals, we actually remove the nodes that have been updated from the old list.
// The nodes that remain in that list after 1) and 2) have been performed can be safely removed.
// The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)
// algorithm.
//
// the longest increasing subsequence is the list of nodes that can remain in place. Imagine going
// from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices
// corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would
//  match the above lists, for example).
//
// In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We
// can update those nodes without moving them, and only call `insertNode` on `4` and `5`.
//
// @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually
// the longest increasing subsequence *of old nodes still present in the new list*).
//
// It is a general algorithm that is fireproof in all circumstances, but it requires the allocation
// and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,
// the `LIS` and a temporary one to create the LIS).
//
// So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of
// the LIS and can be updated without moving them.
//
// If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with
// the exception of the last node if the list is fully reversed).
//
// ## Finding the next sibling.
//
// `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.
// When the list is being traversed top-down, at any index, the DOM nodes up to the previous
// vnode reflect the content of the new list, whereas the rest of the DOM nodes reflect the old
// list. The next sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.
//
// In the other scenarios (swaps, upwards traversal, map-based diff),
// the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the
// bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node
// as the next sibling (cached in the `nextSibling` variable).
// ## DOM node moves
//
// In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,
// this is not the case if the node moved (second and fourth part of the diff algo). We move
// the old DOM nodes before updateNode runs because it enables us to use the cached `nextSibling`
// variable rather than fetching it using `getNextSibling()`.
//
// The fourth part of the diff currently inserts nodes unconditionally, leading to issues
// like #1791 and #1999. We need to be smarter about those situations where adjascent old
// nodes remain together in the new list in a way that isn't covered by parts one and
// three of the diff algo.
function b(e,t,n,i,r,o){if(t!==n&&(null!=t||null!=n)){if(null==t||0===t.length)u(e,n,0,n.length,i,r,o);else if(null==n||0===n.length)R(e,t,0,t.length);else{var a=null!=t[0]&&null!=t[0].key,s=null!=n[0]&&null!=n[0].key,l=0,c=0;if(!a)for(;c<t.length&&null==t[c];)c++;if(!s)for(;l<n.length&&null==n[l];)l++;if(a!==s)R(e,t,c,t.length),u(e,n,l,n.length,i,r,o);else if(s){// bottom-up
for(// keyed diff
var d,p,f,m,y,g,v=t.length-1,b=n.length-1;v>=c&&b>=l&&(m=t[v],y=n[b],m.key===y.key);)m!==y&&x(e,m,y,i,r,o),null!=y.dom&&(r=y.dom),v--,b--;// top-down
for(;v>=c&&b>=l&&(p=t[c],f=n[l],p.key===f.key);)c++,l++,p!==f&&x(e,p,f,i,k(t,c,r),o);// swaps and list reversals
for(;v>=c&&b>=l&&l!==b&&p.key===y.key&&m.key===f.key;)T(e,m,g=k(t,c,r)),m!==f&&x(e,m,f,i,g,o),++l<=--b&&T(e,p,r),p!==y&&x(e,p,y,i,r,o),null!=y.dom&&(r=y.dom),c++,m=t[--v],y=n[b],p=t[c],f=n[l];// bottom up once again
for(;v>=c&&b>=l&&m.key===y.key;)m!==y&&x(e,m,y,i,r,o),null!=y.dom&&(r=y.dom),v--,b--,m=t[v],y=n[b];if(l>b)R(e,t,c,v+1);else if(c>v)u(e,n,l,b+1,i,r,o);else{// inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul
var d,_,E=r,w=b-l+1,M=Array(w),S=0,A=0,I=2147483647,O=0;for(A=0;A<w;A++)M[A]=-1;for(A=b;A>=l;A--){null==d&&(d=N(t,c,v+1));var L=d[(y=n[A]).key];null!=L&&(I=L<I?L:-1// becomes -1 if nodes were re-ordered
,M[A-l]=L,m=t[L],t[L]=null,m!==y&&x(e,m,y,i,r,o),null!=y.dom&&(r=y.dom),O++)}if(r=E,O!==v-c+1&&R(e,t,c,v+1),0===O)u(e,n,l,b+1,i,r,o);else if(-1===I)for(S=// the indices of the indices of the items that are part of the
// longest increasing subsequence in the oldIndices list
(_=C(M)).length-1,A=b;A>=l;A--)f=n[A],-1===M[A-l]?h(e,f,i,o,r):_[S]===A-l?S--:T(e,f,r),null!=f.dom&&(r=n[A].dom);else for(A=b;A>=l;A--)f=n[A],-1===M[A-l]&&h(e,f,i,o,r),null!=f.dom&&(r=n[A].dom)}}else{// Don't index past the end of either list (causes deopts).
var H=t.length<n.length?t.length:n.length;for(// Rewind if necessary to the first non-null index on either side.
// We could alternatively either explicitly create or remove nodes when `start !== oldStart`
// but that would be optimizing for sparse lists which are more rare than dense ones.
l=l<c?l:c;l<H;l++)(p=t[l])!==(f=n[l])&&(null!=p||null!=f)&&(null==p?h(e,f,i,o,k(t,l+1,r)):null==f?P(e,p):x(e,p,f,i,k(t,l+1,r),o));t.length>H&&R(e,t,l,t.length),n.length>H&&u(e,n,l,n.length,i,r,o)}}}}function x(e,t,n,i,r,o){var a=t.tag;if(a===n.tag){if(n.state=t.state,n.events=t.events,et(n,t))return;if("string"==typeof a)switch(null!=n.attrs&&ee(n.attrs,n,i),a){case"#":_(t,n);break;case"<":E(e,t,n,o,r);break;case"[":w(e,t,n,i,r,o);break;default:M(t,n,i,o)}else S(e,t,n,i,r,o)}else P(e,t),h(e,n,i,o,r)}function _(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children),t.dom=e.dom}function E(e,t,n,i,r){t.children!==n.children?(H(e,t),f(e,n,i,r)):(n.dom=t.dom,n.domSize=t.domSize,n.instance=t.instance)}function w(e,t,n,i,r,o){b(e,t.children,n.children,i,r,o);var a=0,s=n.children;if(n.dom=null,null!=s){for(var l=0;l<s.length;l++){var c=s[l];null!=c&&null!=c.dom&&(null==n.dom&&(n.dom=c.dom),a+=c.domSize||1)}1!==a&&(n.domSize=a)}}function M(e,t,n,i){var r=t.dom=e.dom;i=a(t)||i,"textarea"===t.tag&&null==t.attrs&&(t.attrs={}),V(t,e.attrs,t.attrs,i),L(t)||b(r,e.children,t.children,n,null,i)}function S(e,t,i,r,o,a){if(i.instance=n.normalize(l.call(i.state.view,i)),i.instance===i)throw Error("A view cannot return the vnode it received as argument");ee(i.state,i,r),null!=i.attrs&&ee(i.attrs,i,r),null!=i.instance?(null==t.instance?h(e,i.instance,r,a,o):x(e,t.instance,i.instance,r,o,a),i.dom=i.instance.dom,i.domSize=i.instance.domSize):null!=t.instance?(P(e,t.instance),i.dom=void 0,i.domSize=0):(i.dom=t.dom,i.domSize=t.domSize)}function N(e,t,n){for(var i=Object.create(null);t<n;t++){var r=e[t];if(null!=r){var o=r.key;null!=o&&(i[o]=t)}}return i}// Lifted from ivi https://github.com/ivijs/ivi/
// takes a list of unique numbers (-1 is special and can
// occur multiple times) and returns an array with the indices
// of the items that are part of the longest increasing
// subsequence
var A=[];function C(e){for(var t=[0],n=0,i=0,r=0,o=A.length=e.length,r=0;r<o;r++)A[r]=e[r];for(var r=0;r<o;++r)if(-1!==e[r]){var a=t[t.length-1];if(e[a]<e[r]){A[r]=a,t.push(r);continue}for(n=0,i=t.length-1;n<i;){// Fast integer average without overflow.
// eslint-disable-next-line no-bitwise
var s=(n>>>1)+(i>>>1)+(n&i&1);e[t[s]]<e[r]?n=s+1:i=s}e[r]<e[t[n]]&&(n>0&&(A[r]=t[n-1]),t[n]=r)}for(n=t.length,i=t[n-1];n-- >0;)t[n]=i,i=A[i];return A.length=0,t}function k(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}// This covers a really specific edge case:
// - Parent node is keyed and contains child
// - Child is removed, returns unresolved promise in `onbeforeremove`
// - Parent node is moved in keyed diff
// - Remaining children still need moved appropriately
//
// Ideally, I'd track removed nodes as well, but that introduces a lot more
// complexity and I'm not exactly interested in doing that.
function T(e,t,n){var i=r.createDocumentFragment();I(e,i,t),O(e,i,n)}function I(e,t,n){// Dodge the recursion overhead in a few of the most common cases.
for(;null!=n.dom&&n.dom.parentNode===e;){if("string"!=typeof n.tag){if(null!=(n=n.instance))continue}else if("<"===n.tag)for(var i=0;i<n.instance.length;i++)t.appendChild(n.instance[i]);else if("["!==n.tag)t.appendChild(n.dom);else if(1===n.children.length){if(null!=(n=n.children[0]))continue}else for(var i=0;i<n.children.length;i++){var r=n.children[i];null!=r&&I(e,t,r)}break}}function O(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function L(e){if(null==e.attrs||null==e.attrs.contenteditable&&// attribute
null// property
==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=t&&0!==t.length)throw Error("Child node of a contenteditable must be trusted.");return!0}//remove
function R(e,t,n,i){for(var r=n;r<i;r++){var o=t[r];null!=o&&P(e,o)}}function P(e,t){var n,i,r=0,o=t.state;if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove){var a=l.call(t.state.onbeforeremove,t);null!=a&&"function"==typeof a.then&&(r=1,n=a)}if(t.attrs&&"function"==typeof t.attrs.onbeforeremove){var a=l.call(t.attrs.onbeforeremove,t);null!=a&&"function"==typeof a.then&&(// eslint-disable-next-line no-bitwise
r|=2,i=a)}// If we can, try to fast-path it and avoid all the overhead of awaiting
if(s(t,o),r){if(null!=n){var c=function(){!(1&r)||(r&=2)||u()};n.then(c,c)}if(null!=i){var c=function(){!(2&r)||(r&=1)||u()};i.then(c,c)}}else z(t),D(e,t);function u(){s(t,o),z(t),D(e,t)}}function H(e,t){for(var n=0;n<t.instance.length;n++)e.removeChild(t.instance[n])}function D(e,t){// Dodge the recursion overhead in a few of the most common cases.
for(;null!=t.dom&&t.dom.parentNode===e;){if("string"!=typeof t.tag){if(null!=(t=t.instance))continue}else if("<"===t.tag)H(e,t);else{if("["!==t.tag&&(e.removeChild(t.dom),!Array.isArray(t.children)))break;if(1===t.children.length){if(null!=(t=t.children[0]))continue}else for(var n=0;n<t.children.length;n++){var i=t.children[n];null!=i&&D(e,i)}}break}}function z(e){if("string"!=typeof e.tag&&"function"==typeof e.state.onremove&&l.call(e.state.onremove,e),e.attrs&&"function"==typeof e.attrs.onremove&&l.call(e.attrs.onremove,e),"string"!=typeof e.tag)null!=e.instance&&z(e.instance);else{var t=e.children;if(Array.isArray(t))for(var n=0;n<t.length;n++){var i=t[n];null!=i&&z(i)}}}//attrs
function B(e,t,n){"input"===e.tag&&null!=t.type&&e.dom.setAttribute("type",t.type);var i=null!=t&&"input"===e.tag&&"file"===t.type;for(var r in t)U(e,r,null,t[r],n,i)}function U(e,t,n,i,r,o){if(!("key"===t||"is"===t||null==i||q(t))&&(n!==i||F(e,t)||"object"==typeof i)&&("type"!==t||"input"!==e.tag)){if("o"===t[0]&&"n"===t[1])return X(e,t,i);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),i);else if("style"===t)J(e.dom,n,i);else if(W(e,t,r)){if("value"===t){// Only do the coercion if we're actually going to check the value.
/* eslint-disable no-implicit-coercion *///setting input[value] to same value by typing on focused element moves cursor to end in Chrome
//setting input[type=file][value] to same value causes an error to be generated if it's non-empty
if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+i&&(o||e.dom===c())||"select"===e.tag&&null!==n&&e.dom.value===""+i||"option"===e.tag&&null!==n&&e.dom.value===""+i)return;//setting input[type=file][value] to different value is an error if it's non-empty
// Not ideal, but it at least works around the most common source of uncaught exceptions for now.
if(o&&""+i!=""){console.error("`value` is read-only on file inputs!");return}/* eslint-enable no-implicit-coercion */}e.dom[t]=i}else"boolean"==typeof i?i?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,i)}}function j(e,t,n,i){if(!("key"===t||"is"===t||null==n||q(t))){if("o"===t[0]&&"n"===t[1])X(e,t,void 0);else if("style"===t)J(e.dom,n,null);else if(W(e,t,i)&&"className"!==t&&"title"// creates "null" as title
!==t&&("value"!==t||"option"!==e.tag&&("select"!==e.tag||-1!==e.dom.selectedIndex||e.dom!==c()))&&("input"!==e.tag||"type"!==t))e.dom[t]=null;else{var r=t.indexOf(":");-1!==r&&(t=t.slice(r+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}}}function G(e,t){if("value"in t){if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value// eslint-disable-line no-implicit-coercion
;(e.dom.value!==n||-1===e.dom.selectedIndex)&&(e.dom.value=n)}}"selectedIndex"in t&&U(e,"selectedIndex",null,t.selectedIndex,void 0)}function V(e,t,n,i){if(t&&t===n&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),null!=n){"input"===e.tag&&null!=n.type&&e.dom.setAttribute("type",n.type);var r,o="input"===e.tag&&"file"===n.type;for(var a in n)U(e,a,t&&t[a],n[a],i,o)}if(null!=t)for(var a in t)null!=(r=t[a])&&(null==n||null==n[a])&&j(e,a,r,i)}function F(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===c()||"option"===e.tag&&e.dom.parentNode===r.activeElement}function q(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function W(e,t,n){// Filter out namespaced keys
return void 0===n&&// If it's a custom element, just keep it.
(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||// If it's a normal element, let's try to avoid a few browser bugs.
"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"// && key !== "type"
!==t)&&t in e.dom}//style
var $=/[A-Z]/g;function K(e){return"-"+e.toLowerCase()}function Y(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace($,K)}function J(e,t,n){if(t===n);else if(null==n)e.style.cssText="";else if("object"!=typeof n)e.style.cssText=n;else if(null==t||"object"!=typeof t)// Add new style properties
for(var i in // `old` is missing or a string, `style` is an object.
e.style.cssText="",n){var r=n[i];null!=r&&e.style.setProperty(Y(i),String(r))}else{// Both old & new are (different) objects.
// Update style properties that have changed
for(var i in n){var r=n[i];null!=r&&(r=String(r))!==String(t[i])&&e.style.setProperty(Y(i),r)}// Remove style properties that no longer exist
for(var i in t)null!=t[i]&&null==n[i]&&e.style.removeProperty(Y(i))}}// Here's an explanation of how this works:
// 1. The event names are always (by design) prefixed by `on`.
// 2. The EventListener interface accepts either a function or an object
//    with a `handleEvent` method.
// 3. The object does not inherit from `Object.prototype`, to avoid
//    any potential interference with that (e.g. setters).
// 4. The event name is remapped to the handler before calling it.
// 5. In function-based event handlers, `ev.target === this`. We replicate
//    that below.
// 6. In function-based event handlers, `return false` prevents the default
//    action and stops event propagation. We replicate that below.
function Q(){// Save this, so the current redraw is correctly tracked.
this._=t}//event
function X(e,n,i){null!=e.events?(e.events._=t,e.events[n]!==i&&(null!=i&&("function"==typeof i||"object"==typeof i)?(null==e.events[n]&&e.dom.addEventListener(n.slice(2),e.events,!1),e.events[n]=i):(null!=e.events[n]&&e.dom.removeEventListener(n.slice(2),e.events,!1),e.events[n]=void 0))):null!=i&&("function"==typeof i||"object"==typeof i)&&(e.events=new Q,e.dom.addEventListener(n.slice(2),e.events,!1),e.events[n]=i)}//lifecycle
function Z(e,t,n){"function"==typeof e.oninit&&l.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(l.bind(e.oncreate,t))}function ee(e,t,n){"function"==typeof e.onupdate&&n.push(l.bind(e.onupdate,t))}function et(e,t){do{if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate){var n=l.call(e.attrs.onbeforeupdate,e,t);if(void 0!==n&&!n)break}if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate){var n=l.call(e.state.onbeforeupdate,e,t);if(void 0!==n&&!n)break}return!1}while(!1)// eslint-disable-line no-constant-condition
return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,// One would think having the actual latest attributes would be ideal,
// but it doesn't let us properly diff based on our current internal
// representation. We have to save not only the old DOM info, but also
// the attributes used to create it, as we diff *that*, not against the
// DOM directly (with a few exceptions in `setAttr`). And, of course, we
// need to save the children and text as they are conceptually not
// unlike special "attributes" internally.
e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}return Q.prototype=Object.create(null),Q.prototype.handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e),this._&&!1!==e.redraw&&(0,this._)(),!1===t&&(e.preventDefault(),e.stopPropagation())},function(e,r,o){if(!e)throw TypeError("DOM element being rendered to does not exist.");if(null!=i&&e.contains(i))throw TypeError("Node is currently being rendered to and thus is locked.");var a=t,s=i,l=[],u=c(),h=e.namespaceURI;i=e,t="function"==typeof o?o:void 0;try{null==e.vnodes&&(e.textContent=""),r=n.normalizeChildren(Array.isArray(r)?r:[r]),b(e,e.vnodes,r,l,null,"http://www.w3.org/1999/xhtml"===h?void 0:h),e.vnodes=r,null!=u&&c()!==u&&"function"==typeof u.focus&&u.focus();for(var d=0;d<l.length;d++)l[d]()}finally{t=a,i=s}}}}),parcelRegister("fTDI2",function(e,t){var n=parcelRequire("8JOml");e.exports=function(e,t,i){var r=[],o=!1,a=-1;function s(){for(a=0;a<r.length;a+=2)try{e(r[a],n(r[a+1]),l)}catch(e){i.error(e)}a=-1}function l(){o||(o=!0,t(function(){o=!1,s()}))}return l.sync=s,{mount:function(t,i){if(null!=i&&null==i.view&&"function"!=typeof i)throw TypeError("m.mount expects a component, not a vnode.");var o=r.indexOf(t);o>=0&&(r.splice(o,2),o<=a&&(a-=2),e(t,[])),null!=i&&(r.push(t,i),e(t,n(i),l))},redraw:l}}}),parcelRegister("6ePE9",function(e,t){var n=parcelRequire("dVi4w"),i=parcelRequire("iMmVV");e.exports=function(e,t,r){var o=0;function a(e){return new t(e)}function s(e){return function(i,o){"string"!=typeof i?(o=i,i=i.url):null==o&&(o={});var s=new t(function(t,r){e(n(i,o.params),o,function(e){if("function"==typeof o.type){if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=new o.type(e[n]);else e=new o.type(e)}t(e)},r)});if(!0===o.background)return s;var l=0;function c(){0==--l&&"function"==typeof r&&r()}return u(s);function u(e){var t=e.then;return(// Set the constructor, so engines know to not await or resolve
// this as a native promise. At the time of writing, this is
// only necessary for V8, but their behavior is the correct
// behavior per spec. See this spec issue for more details:
// https://github.com/tc39/ecma262/issues/1577. Also, see the
// corresponding comment in `request/tests/test-request.js` for
// a bit more background on the issue at hand.
e.constructor=a,e.then=function(){l++;var n=t.apply(e,arguments);return n.then(c,function(e){if(c(),0===l)throw e}),u(n)},e)}}}function l(e,t){for(var n in e.headers)if(i.call(e.headers,n)&&n.toLowerCase()===t)return!0;return!1}return(// In case the global Promise is some userland library's where they rely on
// `foo instanceof this.constructor`, `this.constructor.resolve(value)`, or
// similar. Let's *not* break them.
a.prototype=t.prototype,a.__proto__=t// eslint-disable-line no-proto
,{request:s(function(t,n,r,o){var a,s=null!=n.method?n.method.toUpperCase():"GET",c=n.body,u=(null==n.serialize||n.serialize===JSON.serialize)&&!(c instanceof e.FormData||c instanceof e.URLSearchParams),h=n.responseType||("function"==typeof n.extract?"":"json"),d=new e.XMLHttpRequest,p=!1,f=!1,m=d,y=d.abort;for(var g in d.abort=function(){p=!0,y.call(this)},d.open(s,t,!1!==n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),u&&null!=c&&!l(n,"content-type")&&d.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||l(n,"accept")||d.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(d.withCredentials=n.withCredentials),n.timeout&&(d.timeout=n.timeout),d.responseType=h,n.headers)i.call(n.headers,g)&&d.setRequestHeader(g,n.headers[g]);d.onreadystatechange=function(e){// Don't throw errors on xhr.abort().
if(!p&&4===e.target.readyState)try{var i,a=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(t),s=e.target.response;if("json"===h)// For IE and Edge, which don't implement
// `responseType: "json"`.
{if(!e.target.responseType&&"function"!=typeof n.extract)try{s=JSON.parse(e.target.responseText)}catch(e){s=null}}else h&&"text"!==h||null!=s||(s=e.target.responseText);if("function"==typeof n.extract?(s=n.extract(e.target,n),a=!0):"function"==typeof n.deserialize&&(s=n.deserialize(s)),a)r(s);else{var l=function(){try{i=e.target.responseText}catch(e){i=s}var t=Error(i);t.code=e.target.status,t.response=s,o(t)};0===d.status?// This allows `xhr.ontimeout` to run in the case that there is a timeout
// Without this setTimeout, `xhr.ontimeout` doesn't have a chance to reject
// as `xhr.onreadystatechange` will run before it
setTimeout(function(){f||l()}):l()}}catch(e){o(e)}},d.ontimeout=function(e){f=!0;var t=Error("Request timed out");t.code=e.target.status,o(t)},"function"==typeof n.config&&(d=n.config(d,n,t)||d)!==m&&(a=d.abort,d.abort=function(){p=!0,a.call(this)}),null==c?d.send():"function"==typeof n.serialize?d.send(n.serialize(c)):c instanceof e.FormData||c instanceof e.URLSearchParams?d.send(c):d.send(JSON.stringify(c))}),jsonp:s(function(t,n,i,r){var a=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+o++,s=e.document.createElement("script");e[a]=function(t){delete e[a],s.parentNode.removeChild(s),i(t)},s.onerror=function(){delete e[a],s.parentNode.removeChild(s),r(Error("JSONP request failed"))},s.src=t+(0>t.indexOf("?")?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(a),e.document.documentElement.appendChild(s)})})}}),parcelRegister("dVi4w",function(e,t){var n=parcelRequire("4TqxV"),i=parcelRequire("h7Myx");// Returns `path` from `template` + `params`
e.exports=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(null==t)return e;var r=e.indexOf("?"),o=e.indexOf("#"),a=o<0?e.length:o,s=r<0?a:r,l=e.slice(0,s),c={};i(c,t);var u=l.replace(/:([^\/\.-]+)(\.{3})?/g,function(e,n,i){return(// If no such parameter exists, don't interpolate it.
(delete c[n],null==t[n])?e:i?t[n]:encodeURIComponent(String(t[n])))}),h=u.indexOf("?"),d=u.indexOf("#"),p=d<0?u.length:d,f=h<0?p:h,m=u.slice(0,f);r>=0&&(m+=e.slice(r,a)),h>=0&&(m+=(r<0?"?":"&")+u.slice(h,p));var y=n(c);return y&&(m+=(r<0&&h<0?"?":"&")+y),o>=0&&(m+=e.slice(o)),d>=0&&(m+=(o<0?"":"&")+u.slice(d)),m}}),parcelRegister("4TqxV",function(e,t){e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)i(n,e[n]);return t.join("&");function i(e,n){if(Array.isArray(n))for(var r=0;r<n.length;r++)i(e+"["+r+"]",n[r]);else if("[object Object]"===Object.prototype.toString.call(n))for(var r in n)i(e+"["+r+"]",n[r]);else t.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}}}),parcelRegister("h7Myx",function(e,t){var n=parcelRequire("iMmVV");e.exports=Object.assign||function(e,t){for(var i in t)n.call(t,i)&&(e[i]=t[i])}}),parcelRegister("iMmVV",function(e,t){e.exports=({}).hasOwnProperty}),parcelRegister("5NN5g",function(e,t){var n=parcelRequire("gA8yJ");e.exports=parcelRequire("ePx9u")("undefined"!=typeof window?window:null,n)}),parcelRegister("gA8yJ",function(e,t){var n=parcelRequire("03gNt");e.exports=parcelRequire("fTDI2")(n,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null)}),parcelRegister("ePx9u",function(e,t){var n=parcelRequire("8JOml"),i=parcelRequire("fMiaA"),r=parcelRequire("9JY0H"),o=parcelRequire("dVi4w"),a=parcelRequire("rLlma"),s=parcelRequire("7QD8F"),l=parcelRequire("h7Myx"),c=parcelRequire("g0xgq"),u={};function h(e){try{return decodeURIComponent(e)}catch(t){return e}}e.exports=function(e,t){var d,p,f,m,y,g,v=null==e?null:"function"==typeof e.setImmediate?e.setImmediate:e.setTimeout,b=r.resolve(),x=!1,_=!1,E=0,w=u,M={onbeforeupdate:function(){return!(!(E=E?2:1)||u===w)},onremove:function(){e.removeEventListener("popstate",A,!1),e.removeEventListener("hashchange",N,!1)},view:function(){if(E&&u!==w){// Wrap in a fragment to preserve existing key semantics
var e=[n(f,m.key,m)];return w&&(e=w.render(e[0])),e}}},S=k.SKIP={};function N(){x=!1;// Consider the pathname holistically. The prefix might even be invalid,
// but that's not our problem.
var n=e.location.hash;"#"!==k.prefix[0]&&(n=e.location.search+n,"?"!==k.prefix[0]&&"/"!==(n=e.location.pathname+n)[0]&&(n="/"+n));// This seemingly useless `.concat()` speeds up the tests quite a bit,
// since the representation is consistently a relatively poorly
// optimized cons string.
var i=n.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,h).slice(k.prefix.length),r=a(i);function o(e){console.error(e),C(p,null,{replace:!0})}function s(e){// state === 0: init
// state === 1: scheduled
// state === 2: done
for(;e<d.length;e++)if(d[e].check(r)){var n=d[e].component,a=d[e].route,l=n,c=g=function(o){if(c===g){if(o===S)return s(e+1);f=null!=o&&("function"==typeof o.view||"function"==typeof o)?o:"div",m=r.params,y=i,g=null,w=n.render?n:null,2===E?t.redraw():(E=2,t.redraw.sync())}};n.view||"function"==typeof n?(n={},c(l)):n.onmatch?b.then(function(){return n.onmatch(r.params,i,a)}).then(c,i===p?null:o):c("div");return}if(i===p)throw Error("Could not resolve default route "+p+".");C(p,null,{replace:!0})}l(r.params,e.history.state),s(0)}// Set it unconditionally so `m.route.set` and `m.route.Link` both work,
// even if neither `pushState` nor `hashchange` are supported. It's
// cleared if `hashchange` is used, since that makes it automatically
// async.
function A(){x||(x=!0,// TODO: just do `mountRedraw.redraw()` here and elide the timer
// dependency. Note that this will muck with tests a *lot*, so it's
// not as easy of a change as it sounds.
v(N))}function C(t,n,i){if(t=o(t,n),_){A();var r=i?i.state:null,a=i?i.title:null;i&&i.replace?e.history.replaceState(r,a,k.prefix+t):e.history.pushState(r,a,k.prefix+t)}else e.location.href=k.prefix+t}function k(n,i,r){if(!n)throw TypeError("DOM element being rendered to does not exist.");if(d=Object.keys(r).map(function(e){if("/"!==e[0])throw SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:e,component:r[e],check:s(e)}}),p=i,null!=i){var o=a(i);if(!d.some(function(e){return e.check(o)}))throw ReferenceError("Default route doesn't match any known routes.")}"function"==typeof e.history.pushState?e.addEventListener("popstate",A,!1):"#"===k.prefix[0]&&e.addEventListener("hashchange",N,!1),_=!0,t.mount(n,M),N()}return k.set=function(e,t,n){null!=g&&((n=n||{}).replace=!0),g=null,C(e,t,n)},k.get=function(){return y},k.prefix="#!",k.Link={view:function(e){// Omit the used parameters from the rendered element - they are
// internal. Also, censor the various lifecycle methods.
//
// We don't strip the other parameters because for convenience we
// let them be specified in the selector as well.
var t,n,r,a=i(e.attrs.selector||"a",c(e.attrs,["options","params","selector","onclick"]),e.children);return(a.attrs.disabled=!!a.attrs.disabled)?(a.attrs.href=null,a.attrs["aria-disabled"]="true"):(t=e.attrs.options,n=e.attrs.onclick,// Easier to build it now to keep it isomorphic.
r=o(a.attrs.href,e.attrs.params),a.attrs.href=k.prefix+r,a.attrs.onclick=function(e){var i;"function"==typeof n?i=n.call(e.currentTarget,e):null==n||"object"!=typeof n||"function"==typeof n.handleEvent&&n.handleEvent(e),!1===i||e.defaultPrevented||// Ignore everything but left clicks
0!==e.button&&0!==e.which&&1!==e.which||// Let the browser handle `target=_blank`, etc.
e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,k.set(r,null,t))}),a}},k.param=function(e){return m&&null!=e?m[e]:m},k}}),parcelRegister("fMiaA",function(e,t){var n=parcelRequire("8JOml"),i=parcelRequire("jPPUy"),r=parcelRequire("iMmVV"),o=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,a={};function s(e){for(var t in e)if(r.call(e,t))return!1;return!0}function l(e){for(var t,n="div",i=[],r={};t=o.exec(e);){var s=t[1],l=t[2];if(""===s&&""!==l)n=l;else if("#"===s)r.id=l;else if("."===s)i.push(l);else if("["===t[3][0]){var c=t[6];c&&(c=c.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?i.push(c):r[t[4]]=""===c?c:c||!0}}return i.length>0&&(r.className=i.join(" ")),a[e]={tag:n,attrs:r}}function c(e,t){var n=t.attrs,i=r.call(n,"class"),o=i?n.class:n.className;if(t.tag=e.tag,t.attrs={},!s(e.attrs)&&!s(n)){var a={};for(var l in n)r.call(n,l)&&(a[l]=n[l]);n=a}for(var l in e.attrs)r.call(e.attrs,l)&&"className"!==l&&!r.call(n,l)&&(n[l]=e.attrs[l]);for(var l in(null!=o||null!=e.attrs.className)&&(n.className=null!=o?null!=e.attrs.className?String(e.attrs.className)+" "+String(o):o:null!=e.attrs.className?e.attrs.className:null),i&&(n.class=null),n)if(r.call(n,l)&&"key"!==l){t.attrs=n;break}return t}function u(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=i.apply(1,arguments);return"string"==typeof e&&(t.children=n.normalizeChildren(t.children),"["!==e)?c(a[e]||l(e),t):(t.tag=e,t)}e.exports=u}),parcelRegister("9JY0H",function(e,t){var n=parcelRequire("c0EvV");"undefined"!=typeof window?(void 0===window.Promise?window.Promise=n:window.Promise.prototype.finally||(window.Promise.prototype.finally=n.prototype.finally),e.exports=window.Promise):void 0!==$parcel$global?(void 0===$parcel$global.Promise?$parcel$global.Promise=n:$parcel$global.Promise.prototype.finally||($parcel$global.Promise.prototype.finally=n.prototype.finally),e.exports=$parcel$global.Promise):e.exports=n}),parcelRegister("rLlma",function(e,t){var n=parcelRequire("kRquH");// Returns `{path, params}` from `url`
e.exports=function(e){var t=e.indexOf("?"),i=e.indexOf("#"),r=i<0?e.length:i,o=t<0?r:t,a=e.slice(0,o).replace(/\/{2,}/g,"/");return a?("/"!==a[0]&&(a="/"+a),a.length>1&&"/"===a[a.length-1]&&(a=a.slice(0,-1))):a="/",{path:a,params:t<0?{}:n(e.slice(t+1,r))}}}),parcelRegister("kRquH",function(e,t){function n(e){try{return decodeURIComponent(e)}catch(t){return e}}e.exports=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),i={},r={},o=0;o<t.length;o++){var a=t[o].split("="),s=n(a[0]),l=2===a.length?n(a[1]):"";"true"===l?l=!0:"false"===l&&(l=!1);var c=s.split(/\]\[?|\[/),u=r;s.indexOf("[")>-1&&c.pop();for(var h=0;h<c.length;h++){var d=c[h],p=c[h+1],f=""==p||!isNaN(parseInt(p,10));if(""===d){var s=c.slice(0,h).join();null==i[s]&&(i[s]=Array.isArray(u)?u.length:0),d=i[s]++}else if("__proto__"===d)break;if(h===c.length-1)u[d]=l;else{// Read own properties exclusively to disallow indirect
// prototype pollution
var m=Object.getOwnPropertyDescriptor(u,d);null!=m&&(m=m.value),null==m&&(u[d]=m=f?[]:{}),u=m}}}return r}}),parcelRegister("7QD8F",function(e,t){var n=parcelRequire("rLlma");// Compiles a template into a function that takes a resolved path (without query
// strings) and returns an object containing the template parameters with their
// parsed values. This expects the input of the compiled template to be the
// output of `parsePathname`. Note that it does *not* remove query parameters
// specified in the template.
e.exports=function(e){var t=n(e),i=Object.keys(t.params),r=[],o=RegExp("^"+t.path.replace(// `:lang-:locale` in routes. This is all merged into one pass so I
// don't also accidentally escape `-` and make it harder to detect it to
// ban it from template parameters.
/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(e,t,n){return null==t?"\\"+e:(r.push({k:t,r:"..."===n}),"..."===n)?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||"")})+"$");return function(e){// First, check the params. Usually, there isn't any, and it's just
// checking a static set.
for(var n=0;n<i.length;n++)if(t.params[i[n]]!==e.params[i[n]])return!1;// If no interpolations exist, let's skip all the ceremony
if(!r.length)return o.test(e.path);var a=o.exec(e.path);if(null==a)return!1;for(var n=0;n<r.length;n++)e.params[r[n].k]=r[n].r?a[n+1]:decodeURIComponent(a[n+1]);return!0}}}),parcelRegister("g0xgq",function(e,t){var n=parcelRequire("iMmVV"),i=RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");e.exports=function(e,t){var r={};if(null!=t)for(var o in e)n.call(e,o)&&!i.test(o)&&0>t.indexOf(o)&&(r[o]=e[o]);else for(var o in e)n.call(e,o)&&!i.test(o)&&(r[o]=e[o]);return r}}),parcelRegister("f1bNS",function(e,t){!function(){/* eslint-enable */n.SKIP={},n.lift=s,n.scan=o,n.merge=r,n.combine=i,n.scanMerge=a,n["fantasy-land/of"]=n;var t=!1;function n(e){var t,r=[],o=[];function a(t){return arguments.length&&t!==n.SKIP&&(e=t,l(a)&&(a._changing(),a._state="active",// Cloning the list to ensure it's still iterated in intended
// order
r.slice().forEach(function(t,n){l(t)&&t(this[n](e))},o.slice()))),e}function s(){return(t=n()).map(function(e){return!0===e&&(a._parents.forEach(function(e){e._unregisterChild(a)}),a._state="ended",a._parents.length=r.length=o.length=0),e}),t}return a.constructor=n,a._state=arguments.length&&e!==n.SKIP?"active":"pending",a._parents=[],a._changing=function(){l(a)&&(a._state="changing"),r.forEach(function(e){e._changing()})},a._map=function(t,i){var s=i?n():n(t(e));return s._parents.push(a),r.push(s),o.push(t),s},a.map=function(e){return a._map(e,"active"!==a._state)},a.toJSON=function(){return null!=e&&"function"==typeof e.toJSON?e.toJSON():e},a["fantasy-land/map"]=a.map,a["fantasy-land/ap"]=function(e){return i(function(e,t){return e()(t())},[e,a])},a._unregisterChild=function(e){var t=r.indexOf(e);-1!==t&&(r.splice(t,1),o.splice(t,1))},Object.defineProperty(a,"end",{get:function(){return t||s()}}),a}function i(e,t){var i=t.every(function(e){if(e.constructor!==n)throw Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream.");return"active"===e._state}),r=i?n(e.apply(null,t.concat([t]))):n(),o=[],a=t.map(function(n){return n._map(function(a){return o.push(n),(i||t.every(function(e){return"pending"!==e._state}))&&(i=!0,r(e.apply(null,t.concat([o]))),o=[]),a},!0)}),s=r.end.map(function(e){!0===e&&(a.forEach(function(e){e.end(!0)}),s.end(!0))});return r}function r(e){return i(function(){return e.map(function(e){return e()})},e)}function o(e,t,i){var r=i.map(function(i){var r=e(t,i);return r!==n.SKIP&&(t=r),r});return r(t),r}function a(e,t){var n=e.map(function(e){return e[0]}),r=i(function(){var i=arguments[arguments.length-1];return n.forEach(function(n,r){i.indexOf(n)>-1&&(t=e[r][1](t,n()))}),t},n);return r(t),r}function s(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return r(t).map(function(t){return e.apply(void 0,t)})}function l(e){return"pending"===e._state||"active"===e._state||"changing"===e._state}Object.defineProperty(n,"HALT",{get:function(){return t||console.log("HALT is deprecated and has been renamed to SKIP"),t=!0,n.SKIP}}),e.exports=n}()}),parcelRegister("kWuxe",function(module,exports){/**
 * WEBMIDI.js v3.1.6
 * A JavaScript library to kickstart your MIDI projects
 * https://webmidijs.org
 * Build generated on June 4th, 2023.
 *
 * © Copyright 2015-2023, Jean-Philippe Côté.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var $17tgv=parcelRequire("17tgv");Object.defineProperty(exports,"__esModule",{value:!0});class EventEmitter{constructor(e=!1){this.eventMap={},this.eventsSuspended=1==e}addListener(e,t,n={}){if("string"==typeof e&&e.length<1||e instanceof String&&e.length<1||"string"!=typeof e&&!(e instanceof String)&&e!==EventEmitter.ANY_EVENT)throw TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if("function"!=typeof t)throw TypeError("The callback must be a function.");let i=new Listener(e,this,t,n);return this.eventMap[e]||(this.eventMap[e]=[]),n.prepend?this.eventMap[e].unshift(i):this.eventMap[e].push(i),i}addOneTimeListener(e,t,n={}){n.remaining=1,this.addListener(e,t,n)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,t){return void 0===e?!!(this.eventMap[EventEmitter.ANY_EVENT]&&this.eventMap[EventEmitter.ANY_EVENT].length>0)||Object.entries(this.eventMap).some(([,e])=>e.length>0):!!this.eventMap[e]&&this.eventMap[e].length>0&&(t instanceof Listener?this.eventMap[e].filter(e=>e===t).length>0:"function"==typeof t?this.eventMap[e].filter(e=>e.callback===t).length>0:null==t)}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(e=>{e.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(e=>{e.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...t){if("string"!=typeof e&&!(e instanceof String))throw TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let n=[],i=this.eventMap[EventEmitter.ANY_EVENT]||[];return this.eventMap[e]&&(i=i.concat(this.eventMap[e])),i.forEach(e=>{if(e.suspended)return;let i=[...t];Array.isArray(e.arguments)&&(i=i.concat(e.arguments)),e.remaining>0&&(n.push(e.callback.apply(e.context,i)),e.count++),--e.remaining<1&&e.remove()}),n}removeListener(e,t,n={}){if(void 0===e)return void(this.eventMap={});if(!this.eventMap[e])return;let i=this.eventMap[e].filter(e=>t&&e.callback!==t||n.remaining&&n.remaining!==e.remaining||n.context&&n.context!==e.context);i.length?this.eventMap[e]=i:delete this.eventMap[e]}async waitFor(e,t={}){return t.duration=parseInt(t.duration),(isNaN(t.duration)||t.duration<=0)&&(t.duration=1/0),new Promise((n,i)=>{let r,o=this.addListener(e,()=>{clearTimeout(r),n()},{remaining:1});t.duration!==1/0&&(r=setTimeout(()=>{o.remove(),i("The duration expired before the event was emitted.")},t.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Listener{constructor(e,t,n,i={}){if("string"!=typeof e&&!(e instanceof String)&&e!==EventEmitter.ANY_EVENT)throw TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!t)throw ReferenceError("The 'target' parameter is mandatory.");if("function"!=typeof n)throw TypeError("The 'callback' must be a function.");void 0===i.arguments||Array.isArray(i.arguments)||(i.arguments=[i.arguments]),(i=Object.assign({context:t,remaining:1/0,arguments:void 0,duration:1/0},i)).duration!==1/0&&setTimeout(()=>this.remove(),i.duration),this.arguments=i.arguments,this.callback=n,this.context=i.context,this.count=0,this.event=e,this.remaining=parseInt(i.remaining)>=1?parseInt(i.remaining):1/0,this.suspended=!1,this.target=t}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Enumerations{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),Enumerations.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),Enumerations.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),Enumerations.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),Enumerations.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Note{constructor(e,t={}){this.duration=wm.defaults.note.duration,this.attack=wm.defaults.note.attack,this.release=wm.defaults.note.release,null!=t.duration&&(this.duration=t.duration),null!=t.attack&&(this.attack=t.attack),null!=t.rawAttack&&(this.attack=Utilities.from7bitToFloat(t.rawAttack)),null!=t.release&&(this.release=t.release),null!=t.rawRelease&&(this.release=Utilities.from7bitToFloat(t.rawRelease)),Number.isInteger(e)?this.identifier=Utilities.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){let t=Utilities.getNoteDetails(e);if(wm.validation&&!e)throw Error("Invalid note identifier");this._name=t.name,this._accidental=t.accidental,this._octave=t.octave}get name(){return this._name}set name(e){if(wm.validation&&!["C","D","E","F","G","A","B"].includes(e=e.toUpperCase()))throw Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(wm.validation&&!["#","##","b","bb"].includes(e=e.toLowerCase()))throw Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(wm.validation&&isNaN(e=parseInt(e)))throw Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(wm.validation&&(isNaN(e=parseFloat(e))||null===e||e<0))throw RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(wm.validation&&(isNaN(e=parseFloat(e))||!(e>=0&&e<=1)))throw RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(wm.validation&&(isNaN(e=parseFloat(e))||!(e>=0&&e<=1)))throw RangeError("Invalid release value.");this._release=e}get rawAttack(){return Utilities.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=Utilities.from7bitToFloat(e)}get rawRelease(){return Utilities.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=Utilities.from7bitToFloat(e)}get number(){return Utilities.toNoteNumber(this.identifier)}getOffsetNumber(e=0,t=0){return wm.validation&&(e=parseInt(e)||0,t=parseInt(t)||0),Math.min(Math.max(this.number+12*e+t,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Utilities{/**
   * Returns a MIDI note number matching the identifier passed in the form of a string. The
   * identifier must include the octave number. The identifier also optionally include a sharp (#),
   * a double sharp (##), a flat (b) or a double flat (bb) symbol. For example, these are all valid
   * identifiers: C5, G4, D#-1, F0, Gb7, Eb-1, Abb4, B##6, etc.
   *
   * When converting note identifiers to numbers, C4 is considered to be middle C (MIDI note number
   * 60) as per the scientific pitch notation standard.
   *
   * The resulting note number can be offset by using the `octaveOffset` parameter.
   *
   * @param identifier {string} The identifier in the form of a letter, followed by an optional "#",
   * "##", "b" or "bb" followed by the octave number. For exemple: C5, G4, D#-1, F0, Gb7, Eb-1,
   * Abb4, B##6, etc.
   *
   * @param {number} [octaveOffset=0] A integer to offset the octave by.
   *
   * @returns {number} The MIDI note number (an integer between 0 and 127).
   *
   * @throws RangeError Invalid 'octaveOffset' value
   *
   * @throws TypeError Invalid note identifier
   *
   * @license Apache-2.0
   * @since 3.0.0
   * @static
   */static toNoteNumber(e,t=0){if(isNaN(t=null==t?0:parseInt(t)))throw RangeError("Invalid 'octaveOffset' value");"string"!=typeof e&&(e="");let n=this.getNoteDetails(e);if(!n)throw TypeError("Invalid note identifier");let i=12*(n.octave+1+t);if(i+=({C:0,D:2,E:4,F:5,G:7,A:9,B:11})[n.name],n.accidental&&(n.accidental.startsWith("b")?i-=n.accidental.length:i+=n.accidental.length),i<0||i>127)throw RangeError("Invalid octaveOffset value");return i}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));let t=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!t)throw TypeError("Invalid note identifier");let n=t[1].toUpperCase(),i=parseInt(t[3]),r=t[2].toLowerCase();return{accidental:r=""===r?void 0:r,identifier:n+(r||"")+i,name:n,octave:i}}static sanitizeChannels(e){let t;if(wm.validation){if("all"===e)t=["all"];else if("none"===e)return[]}return(t=Array.isArray(e)?e:[e]).indexOf("all")>-1&&(t=Enumerations.MIDI_CHANNEL_NUMBERS),t.map(function(e){return parseInt(e)}).filter(function(e){return e>=1&&e<=16})}static toTimestamp(e){let t=!1,n=parseFloat(e);return!isNaN(n)&&("string"==typeof e&&"+"===e.substring(0,1)?n>=0&&(t=wm.time+n):n>=0&&(t=n),t)}static guessNoteNumber(e,t){t=parseInt(t)||0;let n=!1;if(Number.isInteger(e)&&e>=0&&e<=127)n=parseInt(e);else if(parseInt(e)>=0&&127>=parseInt(e))n=parseInt(e);else if("string"==typeof e||e instanceof String)try{n=this.toNoteNumber(e.trim(),t)}catch(e){return!1}return n}static toNoteIdentifier(e,t){if(isNaN(e=parseInt(e))||e<0||e>127)throw RangeError("Invalid note number");if(isNaN(t=null==t?0:parseInt(t)))throw RangeError("Invalid octaveOffset value");let n=Math.floor(e/12-1)+t;return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]+n.toString()}static buildNote(e,t={}){if(t.octaveOffset=parseInt(t.octaveOffset)||0,e instanceof Note)return e;let n=this.guessNoteNumber(e,t.octaveOffset);if(!1===n)throw TypeError(`The input could not be parsed as a note (${e})`);return t.octaveOffset=void 0,new Note(n,t)}static buildNoteArray(e,t={}){let n=[];return Array.isArray(e)||(e=[e]),e.forEach(e=>{n.push(this.buildNote(e,t))}),n}static from7bitToFloat(e){return e===1/0&&(e=127),Math.min(Math.max((e=parseInt(e)||0)/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),Math.min(Math.max(Math.round(127*(e=parseFloat(e)||0)),0),127)}static fromMsbLsbToFloat(e,t=0){wm.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),t=Math.min(Math.max(parseInt(t)||0,0),127));let n=((e<<7)+t)/16383;return Math.min(Math.max(n,0),1)}static fromFloatToMsbLsb(e){wm.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));let t=Math.round(16383*e);return{msb:t>>7,lsb:127&t}}static offsetNumber(e,t=0,n=0){if(wm.validation){if(isNaN(e=parseInt(e)))throw Error("Invalid note number");t=parseInt(t)||0,n=parseInt(n)||0}return Math.min(Math.max(e+12*t+n,0),127)}static getPropertyByValue(e,t){return Object.keys(e).find(n=>e[n]===t)}static getCcNameByNumber(e){if(!wm.validation||(e=parseInt(e))>=0&&e<=127)return Enumerations.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let t=Enumerations.CONTROL_CHANGE_MESSAGES.find(t=>t.name===e);return t?t.number:Enumerations.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let t in Enumerations.CHANNEL_MODE_MESSAGES)if(Enumerations.CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===Enumerations.CHANNEL_MODE_MESSAGES[t])return t;return!1}static get isNode(){return void 0!==$17tgv&&null!=$17tgv.versions&&null!=$17tgv.versions.node}static get isBrowser(){return"undefined"!=typeof window&&void 0!==window.document}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class OutputChannel extends EventEmitter{constructor(e,t){super(),this._output=e,this._number=t,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,t={time:0}){return this.output.send(e,t),this}sendKeyAftertouch(e,t,n={}){if(wm.validation){if(n.useRawValue&&(n.rawValue=n.useRawValue),isNaN(parseFloat(t)))throw RangeError("Invalid key aftertouch value.");if(n.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw RangeError("Key aftertouch value must be a float between 0 and 1.")}n.rawValue||(t=Utilities.fromFloatTo7Bit(t));let i=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),Utilities.buildNoteArray(e).forEach(e=>{this.send([(Enumerations.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),e.getOffsetNumber(i),t],{time:Utilities.toTimestamp(n.time)})}),this}/**
   * Sends a MIDI **control change** message to the channel at the scheduled time. The control
   * change message to send can be specified numerically (`0` to `127`) or by using one of the
   * following common names:
   *
   * | Number | Name                          |
   * |--------|-------------------------------|
   * | 0      |`bankselectcoarse`             |
   * | 1      |`modulationwheelcoarse`        |
   * | 2      |`breathcontrollercoarse`       |
   * | 4      |`footcontrollercoarse`         |
   * | 5      |`portamentotimecoarse`         |
   * | 6      |`dataentrycoarse`              |
   * | 7      |`volumecoarse`                 |
   * | 8      |`balancecoarse`                |
   * | 10     |`pancoarse`                    |
   * | 11     |`expressioncoarse`             |
   * | 12     |`effectcontrol1coarse`         |
   * | 13     |`effectcontrol2coarse`         |
   * | 18     |`generalpurposeslider3`        |
   * | 19     |`generalpurposeslider4`        |
   * | 32     |`bankselectfine`               |
   * | 33     |`modulationwheelfine`          |
   * | 34     |`breathcontrollerfine`         |
   * | 36     |`footcontrollerfine`           |
   * | 37     |`portamentotimefine`           |
   * | 38     |`dataentryfine`                |
   * | 39     |`volumefine`                   |
   * | 40     |`balancefine`                  |
   * | 42     |`panfine`                      |
   * | 43     |`expressionfine`               |
   * | 44     |`effectcontrol1fine`           |
   * | 45     |`effectcontrol2fine`           |
   * | 64     |`holdpedal`                    |
   * | 65     |`portamento`                   |
   * | 66     |`sustenutopedal`               |
   * | 67     |`softpedal`                    |
   * | 68     |`legatopedal`                  |
   * | 69     |`hold2pedal`                   |
   * | 70     |`soundvariation`               |
   * | 71     |`resonance`                    |
   * | 72     |`soundreleasetime`             |
   * | 73     |`soundattacktime`              |
   * | 74     |`brightness`                   |
   * | 75     |`soundcontrol6`                |
   * | 76     |`soundcontrol7`                |
   * | 77     |`soundcontrol8`                |
   * | 78     |`soundcontrol9`                |
   * | 79     |`soundcontrol10`               |
   * | 80     |`generalpurposebutton1`        |
   * | 81     |`generalpurposebutton2`        |
   * | 82     |`generalpurposebutton3`        |
   * | 83     |`generalpurposebutton4`        |
   * | 91     |`reverblevel`                  |
   * | 92     |`tremololevel`                 |
   * | 93     |`choruslevel`                  |
   * | 94     |`celestelevel`                 |
   * | 95     |`phaserlevel`                  |
   * | 96     |`dataincrement`                |
   * | 97     |`datadecrement`                |
   * | 98     |`nonregisteredparametercoarse` |
   * | 99     |`nonregisteredparameterfine`   |
   * | 100    |`registeredparametercoarse`    |
   * | 101    |`registeredparameterfine`      |
   * | 120    |`allsoundoff`                  |
   * | 121    |`resetallcontrollers`          |
   * | 122    |`localcontrol`                 |
   * | 123    |`allnotesoff`                  |
   * | 124    |`omnimodeoff`                  |
   * | 125    |`omnimodeon`                   |
   * | 126    |`monomodeon`                   |
   * | 127    |`polymodeon`                   |
   *
   * As you can see above, not all control change message have a matching name. This does not mean
   * you cannot use the others. It simply means you will need to use their number
   * (`0` to `127`) instead of their name. While you can still use them, numbers `120` to `127` are
   * usually reserved for *channel mode* messages. See
   * [`sendChannelMode()`]{@link OutputChannel#sendChannelMode} method for more info.
   *
   * To view a detailed list of all available **control change** messages, please consult "Table 3 -
   * Control Change Messages" from the [MIDI Messages](
   * https://www.midi.org/specifications/item/table-3-control-change-messages-data-bytes-2)
   * specification.
   *
   * **Note**: messages #0-31 (MSB) are paired with messages #32-63 (LSB). For example, message #1
   * (`modulationwheelcoarse`) can be accompanied by a second control change message for
   * `modulationwheelfine` to achieve a greater level of precision. if you want to specify both MSB
   * and LSB for messages between `0` and `31`, you can do so by passing a 2-value array as the
   * second parameter.
   *
   * @param {number|string} controller The MIDI controller name or number (`0` - `127`).
   *
   * @param {number|number[]} value The value to send (0-127). You can also use a two-position array
   * for controllers 0 to 31. In this scenario, the first value will be sent as usual and the second
   * value will be sent to the matching LSB controller (which is obtained by adding 32 to the first
   * controller)
   *
   * @param {object} [options={}]
   *
   * @param {number|string} [options.time=(now)] If `time` is a string prefixed with `"+"` and
   * followed by a number, the message will be delayed by that many milliseconds. If the value is a
   * positive number
   * ([`DOMHighResTimeStamp`]{@link https://developer.mozilla.org/docs/Web/API/DOMHighResTimeStamp}),
   * the operation will be scheduled for that time. The current time can be retrieved with
   * [`WebMidi.time`]{@link WebMidi#time}. If `options.time` is omitted, or in the past, the
   * operation will be carried out as soon as possible.
   *
   * @throws {RangeError} Controller numbers must be between 0 and 127.
   * @throws {RangeError} Invalid controller name.
   * @throws {TypeError} The value array must have a length of 2.
   *
   * @returns {OutputChannel} Returns the `OutputChannel` object so methods can be chained.
   *
   * @license Apache-2.0
   * @since 3.0.0
   */sendControlChange(e,t,n={}){if("string"==typeof e&&(e=Utilities.getCcNumberByName(e)),Array.isArray(t)||(t=[t]),wm.validation){if(void 0===e)throw TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw TypeError("Control change number must be an integer between 0 and 127.");if(2===(t=t.map(e=>{let t=Math.min(Math.max(parseInt(e),0),127);if(isNaN(t))throw TypeError("Values must be integers between 0 and 127");return t})).length&&e>=32)throw TypeError("To use a value array, the controller must be between 0 and 31")}return t.forEach((i,r)=>{this.send([(Enumerations.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+32*r,t[r]],{time:Utilities.toTimestamp(n.time)})}),this}_selectNonRegisteredParameter(e,t={}){return this.sendControlChange(99,e[0],t),this.sendControlChange(98,e[1],t),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,t={}){return this.sendControlChange(101,e[0],t),this.sendControlChange(100,e[1],t),this}_setCurrentParameter(e,t={}){return e=[].concat(e),this.sendControlChange(6,e[0],t),e.length<2||this.sendControlChange(38,e[1],t),this}sendRpnDecrement(e,t={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(void 0===e)throw TypeError("The specified registered parameter is invalid.");let t=!1;if(Object.getOwnPropertyNames(Enumerations.REGISTERED_PARAMETERS).forEach(n=>{Enumerations.REGISTERED_PARAMETERS[n][0]===e[0]&&Enumerations.REGISTERED_PARAMETERS[n][1]===e[1]&&(t=!0)}),!t)throw TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(97,0,t),this._deselectRegisteredParameter(t),this}sendRpnIncrement(e,t={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(void 0===e)throw TypeError("The specified registered parameter is invalid.");let t=!1;if(Object.getOwnPropertyNames(Enumerations.REGISTERED_PARAMETERS).forEach(n=>{Enumerations.REGISTERED_PARAMETERS[n][0]===e[0]&&Enumerations.REGISTERED_PARAMETERS[n][1]===e[1]&&(t=!0)}),!t)throw TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,t),this.sendControlChange(96,0,t),this._deselectRegisteredParameter(t),this}playNote(e,t={}){this.sendNoteOn(e,t);let n=Array.isArray(e)?e:[e];for(let e of n)if(parseInt(e.duration)>0){let n={time:(Utilities.toTimestamp(t.time)||wm.time)+parseInt(e.duration),release:e.release,rawRelease:e.rawRelease};this.sendNoteOff(e,n)}else if(parseInt(t.duration)>0){let n={time:(Utilities.toTimestamp(t.time)||wm.time)+parseInt(t.duration),release:t.release,rawRelease:t.rawRelease};this.sendNoteOff(e,n)}return this}sendNoteOff(e,t={}){if(wm.validation){if(null!=t.rawRelease&&!(t.rawRelease>=0&&t.rawRelease<=127))throw RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(null!=t.release&&!(t.release>=0&&t.release<=1))throw RangeError("The 'release' option must be an number between 0 and 1");t.rawVelocity&&(t.rawRelease=t.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),t.velocity&&(t.release=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;null!=t.rawRelease?n=t.rawRelease:isNaN(t.release)||(n=Math.round(127*t.release));let i=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Utilities.buildNoteArray(e,{rawRelease:parseInt(n)}).forEach(e=>{this.send([(Enumerations.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),e.getOffsetNumber(i),e.rawRelease],{time:Utilities.toTimestamp(t.time)})}),this}stopNote(e,t={}){return this.sendNoteOff(e,t)}sendNoteOn(e,t={}){if(wm.validation){if(null!=t.rawAttack&&!(t.rawAttack>=0&&t.rawAttack<=127))throw RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(null!=t.attack&&!(t.attack>=0&&t.attack<=1))throw RangeError("The 'attack' option must be an number between 0 and 1");t.rawVelocity&&(t.rawAttack=t.velocity,t.rawRelease=t.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),t.velocity&&(t.attack=t.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let n=64;null!=t.rawAttack?n=t.rawAttack:isNaN(t.attack)||(n=Math.round(127*t.attack));let i=wm.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Utilities.buildNoteArray(e,{rawAttack:n}).forEach(e=>{this.send([(Enumerations.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),e.getOffsetNumber(i),e.rawAttack],{time:Utilities.toTimestamp(t.time)})}),this}sendChannelMode(e,t=0,n={}){if("string"==typeof e&&(e=Enumerations.CHANNEL_MODE_MESSAGES[e]),wm.validation){if(void 0===e)throw TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw TypeError("Invalid channel mode message number.");if(isNaN(parseInt(t))||t<0||t>127)throw RangeError("Value must be an integer between 0 and 127.")}return this.send([(Enumerations.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,t],{time:Utilities.toTimestamp(n.time)}),this}sendOmniMode(e,t={}){return void 0===e||e?this.sendChannelMode("omnimodeon",0,t):this.sendChannelMode("omnimodeoff",0,t),this}sendChannelAftertouch(e,t={}){if(wm.validation){if(isNaN(parseFloat(e)))throw RangeError("Invalid channel aftertouch value.");if(t.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([(Enumerations.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(127*e)],{time:Utilities.toTimestamp(t.time)}),this}sendMasterTuning(e,t={}){if(e=parseFloat(e)||0,wm.validation&&!(e>-65&&e<64))throw RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let n=Math.floor(e)+64,i=e-Math.floor(e),r=(i=Math.round((i+1)/2*16383))>>7&127,o=127&i;return this.sendRpnValue("channelcoarsetuning",n,t),this.sendRpnValue("channelfinetuning",[r,o],t),this}sendModulationRange(e,t,n={}){if(wm.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw RangeError("The semitones value must be an integer between 0 and 127.");if(!(null==t||Number.isInteger(t)&&t>=0&&t<=127))throw RangeError("If specified, the cents value must be an integer between 0 and 127.")}return t>=0&&t<=127||(t=0),this.sendRpnValue("modulationrange",[e,t],n),this}sendNrpnValue(e,t,n={}){if(t=[].concat(t),wm.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw RangeError("The second byte of the NRPN must be between 0 and 127.");t.forEach(e=>{if(!(e>=0&&e<=127))throw RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,n),this._setCurrentParameter(t,n),this._deselectNonRegisteredParameter(n),this}sendPitchBend(e,t={}){if(wm.validation){if(t.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(t.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||null===e)throw RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw RangeError("The pitch bend value must be a float between -1 and 1.")}}let n=0,i=0;if(t.rawValue&&Array.isArray(e))n=e[0],i=e[1];else if(t.rawValue&&!Array.isArray(e))n=e;else{let t=Utilities.fromFloatToMsbLsb((e+1)/2);n=t.msb,i=t.lsb}return this.send([(Enumerations.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),i,n],{time:Utilities.toTimestamp(t.time)}),this}sendPitchBendRange(e,t,n={}){if(wm.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,t],n),this}sendProgramChange(e,t={}){if(e=parseInt(e)||0,wm.validation&&!(e>=0&&e<=127))throw RangeError("The program number must be between 0 and 127.");return this.send([(Enumerations.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:Utilities.toTimestamp(t.time)}),this}sendRpnValue(e,t,n={}){if(Array.isArray(e)||(e=Enumerations.REGISTERED_PARAMETERS[e]),wm.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(t).forEach(e=>{if(!(e>=0&&e<=127))throw RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,n),this._setCurrentParameter(t,n),this._deselectRegisteredParameter(n),this}sendTuningBank(e,t={}){if(wm.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,t),this}sendTuningProgram(e,t={}){if(wm.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,t),this}sendLocalControl(e,t={}){return e?this.sendChannelMode("localcontrol",127,t):this.sendChannelMode("localcontrol",0,t)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,t={}){return"mono"===e?this.sendChannelMode("monomodeon",0,t):this.sendChannelMode("polymodeon",0,t)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&isNaN(e=parseInt(e)))throw TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Output extends EventEmitter{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let e=1;e<=16;e++)this.channels[e]=new OutputChannel(this,e);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let t={timestamp:wm.time};"open"===e.port.connection?(t.type="opened",t.target=this,t.port=t.target,this.emit("opened",t)):"closed"===e.port.connection&&"connected"===e.port.state?(t.type="closed",t.target=this,t.port=t.target,this.emit("closed",t)):"closed"===e.port.connection&&"disconnected"===e.port.state?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):"pending"===e.port.connection&&"disconnected"===e.port.state||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}/**
   * Sends a MIDI message on the MIDI output port. If no time is specified, the message will be
   * sent immediately. The message should be an array of 8 bit unsigned integers (0-225), a
   * [`Uint8Array`]{@link https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array}
   * object or a [`Message`](Message) object.
   *
   * It is usually not necessary to use this method directly as you can use one of the simpler
   * helper methods such as [`playNote()`](#playNote), [`stopNote()`](#stopNote),
   * [`sendControlChange()`](#sendControlChange), etc.
   *
   * Details on the format of MIDI messages are available in the summary of
   * [MIDI messages]{@link https://www.midi.org/specifications-old/item/table-1-summary-of-midi-message}
   * from the MIDI Manufacturers Association.
   *
   * @param message {number[]|Uint8Array|Message} An array of 8bit unsigned integers, a `Uint8Array`
   * object (not available in Node.js) containing the message bytes or a `Message` object.
   *
   * @param {object} [options={}]
   *
   * @param {number|string} [options.time=(now)] If `time` is a string prefixed with `"+"` and
   * followed by a number, the message will be delayed by that many milliseconds. If the value is a
   * positive number
   * ([`DOMHighResTimeStamp`]{@link https://developer.mozilla.org/docs/Web/API/DOMHighResTimeStamp}),
   * the operation will be scheduled for that time. The current time can be retrieved with
   * [`WebMidi.time`]{@link WebMidi#time}. If `options.time` is omitted, or in the past, the
   * operation will be carried out as soon as possible.
   *
   * @throws {RangeError} The first byte (status) must be an integer between 128 and 255.
   *
   * @returns {Output} Returns the `Output` object so methods can be chained.
   *
   * @license Apache-2.0
   */send(e,t={time:0},n=0){if(e instanceof Message&&(e=Utilities.isNode?e.data:e.rawData),e instanceof Uint8Array&&Utilities.isNode&&(e=Array.from(e)),wm.validation){if(Array.isArray(e)||e instanceof Uint8Array||(e=[e],Array.isArray(t)&&(e=e.concat(t)),t=isNaN(n)?{time:0}:{time:n}),!(parseInt(e[0])>=128&&255>=parseInt(e[0])))throw RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(e=>{if(!((e=parseInt(e))>=0&&e<=255))throw RangeError("Data bytes must be integers between 0 and 255.")}),t||(t={time:0})}return this._midiOutput.send(e,Utilities.toTimestamp(t.time)),this}sendSysex(e,t=[],n={}){if(e=[].concat(e),t instanceof Uint8Array){let i=new Uint8Array(1+e.length+t.length+1);i[0]=Enumerations.SYSTEM_MESSAGES.sysex,i.set(Uint8Array.from(e),1),i.set(t,1+e.length),i[i.length-1]=Enumerations.SYSTEM_MESSAGES.sysexend,this.send(i,{time:n.time})}else{let i=e.concat(t,Enumerations.SYSTEM_MESSAGES.sysexend);this.send([Enumerations.SYSTEM_MESSAGES.sysex].concat(i),{time:n.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():wm.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,t={}){if(wm.validation&&(isNaN(e=parseInt(e))||!(e>=0&&e<=127)))throw RangeError("The value must be an integer between 0 and 127.");return this.send([Enumerations.SYSTEM_MESSAGES.timecode,e],{time:t.time}),this}sendSongPosition(e=0,t={}){var n=(e=Math.floor(e)||0)>>7&127,i=127&e;return this.send([Enumerations.SYSTEM_MESSAGES.songposition,n,i],{time:t.time}),this}sendSongSelect(e=0,t={}){if(wm.validation&&(isNaN(e=parseInt(e))||!(e>=0&&e<=127)))throw RangeError("The program value must be between 0 and 127");return this.send([Enumerations.SYSTEM_MESSAGES.songselect,e],{time:t.time}),this}sendTuneRequest(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([Enumerations.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return wm.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,t,n={}){return null==n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendKeyAftertouch(e,t,n)}),this}sendControlChange(e,t,n={},i={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){let e=n;(n=i).channels=e,"all"===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendControlChange(e,t,n)}),this}sendPitchBendRange(e=0,t=0,n={}){return null==n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPitchBendRange(e,t,n)}),this}setPitchBendRange(e=0,t=0,n="all",i={}){return wm.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),i.channels=n,"all"===i.channels&&(i.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,t,i)}sendRpnValue(e,t,n={}){return null==n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendRpnValue(e,t,n)}),this}setRegisteredParameter(e,t=[],n="all",i={}){return wm.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),i.channels=n,"all"===i.channels&&(i.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,t,i)}sendChannelAftertouch(e,t={},n={}){if(wm.validation&&(Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendChannelAftertouch(e,t)}),this}sendPitchBend(e,t={},n={}){if(wm.validation&&(Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendPitchBend(e,t)}),this}sendProgramChange(e=0,t={},n={}){if(wm.validation&&(Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendProgramChange(e,t)}),this}sendModulationRange(e,t,n={}){return null==n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendModulationRange(e,t,n)}),this}setModulationRange(e=0,t=0,n="all",i={}){return wm.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),i.channels=n,"all"===i.channels&&(i.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,t,i)}sendMasterTuning(e,t={}){return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendMasterTuning(e,t)}),this}setMasterTuning(e,t={},n={}){return wm.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),n.channels=t,"all"===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,n)}sendTuningProgram(e,t={}){return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendTuningProgram(e,t)}),this}setTuningProgram(e,t="all",n={}){return wm.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),n.channels=t,"all"===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,n)}sendTuningBank(e=0,t={}){return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendTuningBank(e,t)}),this}setTuningBank(e,t="all",n={}){return wm.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),n.channels=t,"all"===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,n)}sendChannelMode(e,t=0,n={},i={}){if(wm.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){let e=n;(n=i).channels=e,"all"===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelMode(e,t,n)}),this}sendAllSoundOff(e={}){return null==e.channels&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return null==e.channels&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},t={}){if(wm.validation&&(Array.isArray(e)||Number.isInteger(e)||"all"===e)){let n=e;(e=t).channels=n,"all"===e.channels&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==e.channels&&(e.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(e.channels).forEach(t=>{this.channels[t].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,t={},n={}){if(wm.validation&&(Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendPolyphonicMode(e,t)}),this}sendLocalControl(e,t={},n={}){if(wm.validation&&(Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendLocalControl(e,t)}),this}sendOmniMode(e,t={},n={}){if(wm.validation&&(Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendOmniMode(e,t)}),this}sendNrpnValue(e,t,n={}){return null==n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNrpnValue(e,t,n)}),this}setNonRegisteredParameter(e,t=[],n="all",i={}){return wm.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),i.channels=n,"all"===i.channels&&(i.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,t,i)}sendRpnIncrement(e,t={}){return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendRpnIncrement(e,t)}),this}incrementRegisteredParameter(e,t="all",n={}){return wm.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),n.channels=t,"all"===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,n)}sendRpnDecrement(e,t={}){return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendRpnDecrement(e,t)}),this}decrementRegisteredParameter(e,t="all",n={}){return wm.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),n.channels=t,"all"===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,n)}sendNoteOff(e,t={},n={}){if(wm.validation&&(Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendNoteOff(e,t)}),this}stopNote(e,t){return this.sendNoteOff(e,t)}playNote(e,t={},n={}){if(wm.validation&&(t.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),t.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].playNote(e,t)}),this}sendNoteOn(e,t={},n={}){if(wm.validation&&(Array.isArray(t)||Number.isInteger(t)||"all"===t)){let e=t;(t=n).channels=e,"all"===t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS)}return null==t.channels&&(t.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(t.channels).forEach(n=>{this.channels[n].sendNoteOn(e,t)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&isNaN(e=parseInt(e)))throw TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Forwarder{constructor(e=[],t={}){this.destinations=[],this.types=[...Object.keys(Enumerations.SYSTEM_MESSAGES),...Object.keys(Enumerations.CHANNEL_MESSAGES)],this.channels=Enumerations.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),t.types&&!Array.isArray(t.types)&&(t.types=[t.types]),t.channels&&!Array.isArray(t.channels)&&(t.channels=[t.channels]),wm.validation&&(e.forEach(e=>{if(!(e instanceof Output))throw TypeError("Destinations must be of type 'Output'.")}),void 0!==t.types&&t.types.forEach(e=>{if(!Enumerations.SYSTEM_MESSAGES.hasOwnProperty(e)&&!Enumerations.CHANNEL_MESSAGES.hasOwnProperty(e))throw TypeError("Type must be a valid message type.")}),void 0!==t.channels&&t.channels.forEach(e=>{if(!Enumerations.MIDI_CHANNEL_NUMBERS.includes(e))throw TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,t.types&&(this.types=t.types),t.channels&&(this.channels=t.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(t=>{(!wm.validation||t instanceof Output)&&t.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class InputChannel extends EventEmitter{constructor(e,t){super(),this._input=e,this._number=t,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){let t=Object.assign({},e);t.port=this.input,t.target=this,t.type="midimessage",this.emit(t.type,t),this._parseEventForStandardMessages(t)}_parseEventForStandardMessages(e){let t=Object.assign({},e);t.type=t.message.type||"unknownmessage";let n=e.message.dataBytes[0],i=e.message.dataBytes[1];if("noteoff"===t.type||"noteon"===t.type&&0===i)this.notesState[n]=!1,t.type="noteoff",t.note=new Note(Utilities.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset),{rawAttack:0,rawRelease:i}),t.value=Utilities.from7bitToFloat(i),t.rawValue=i,t.velocity=t.note.release,t.rawVelocity=t.note.rawRelease;else if("noteon"===t.type)this.notesState[n]=!0,t.note=new Note(Utilities.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset),{rawAttack:i}),t.value=Utilities.from7bitToFloat(i),t.rawValue=i,t.velocity=t.note.attack,t.rawVelocity=t.note.rawAttack;else if("keyaftertouch"===t.type)t.note=new Note(Utilities.offsetNumber(n,this.octaveOffset+this.input.octaveOffset+wm.octaveOffset)),t.value=Utilities.from7bitToFloat(i),t.rawValue=i,t.identifier=t.note.identifier,t.key=t.note.number,t.rawKey=n;else if("controlchange"===t.type){t.controller={number:n,name:Enumerations.CONTROL_CHANGE_MESSAGES[n].name,description:Enumerations.CONTROL_CHANGE_MESSAGES[n].description,position:Enumerations.CONTROL_CHANGE_MESSAGES[n].position},t.subtype=t.controller.name||"controller"+n,t.value=Utilities.from7bitToFloat(i),t.rawValue=i;let e=Object.assign({},t);e.type=`${t.type}-controller${n}`,delete e.subtype,this.emit(e.type,e);let r=Object.assign({},t);r.type=t.type+"-"+Enumerations.CONTROL_CHANGE_MESSAGES[n].name,delete r.subtype,0!==r.type.indexOf("controller")&&this.emit(r.type,r),t.message.dataBytes[0]>=120&&this._parseChannelModeMessage(t),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(t.message.dataBytes[0])&&this._parseEventForParameterNumber(t)}else"programchange"===t.type?(t.value=n,t.rawValue=t.value):"channelaftertouch"===t.type?(t.value=Utilities.from7bitToFloat(n),t.rawValue=n):"pitchbend"===t.type?(t.value=((i<<7)+n-8192)/8192,t.rawValue=(i<<7)+n):t.type="unknownmessage";this.emit(t.type,t)}_parseChannelModeMessage(e){let t=Object.assign({},e);t.type=t.controller.name,"localcontrol"===t.type&&(t.value=127===t.message.data[2],t.rawValue=t.message.data[2]),"omnimodeon"===t.type?(t.type="omnimode",t.value=!0,t.rawValue=t.message.data[2]):"omnimodeoff"===t.type&&(t.type="omnimode",t.value=!1,t.rawValue=t.message.data[2]),"monomodeon"===t.type?(t.type="monomode",t.value=!0,t.rawValue=t.message.data[2]):"polymodeon"===t.type&&(t.type="monomode",t.value=!1,t.rawValue=t.message.data[2]),this.emit(t.type,t)}_parseEventForParameterNumber(e){let t=e.message.dataBytes[0],n=e.message.dataBytes[1];99===t||101===t?(this._nrpnBuffer=[],this._rpnBuffer=[],99===t?this._nrpnBuffer=[e.message]:127!==n&&(this._rpnBuffer=[e.message])):98===t||100===t?98===t?(this._rpnBuffer=[],1===this._nrpnBuffer.length?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],1===this._rpnBuffer.length&&127!==n?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):6!==t&&38!==t&&96!==t&&97!==t||(2===this._rpnBuffer.length?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):2===this._nrpnBuffer.length?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return 6===e||38===e||96===e||97===e||98===e||99===e||100===e||101===e}_dispatchParameterNumberEvent(e,t,n,i){e="nrpn"===e?"nrpn":"rpn";let r={target:i.target,timestamp:i.timestamp,message:i.message,parameterMsb:t,parameterLsb:n,value:Utilities.from7bitToFloat(i.message.dataBytes[1]),rawValue:i.message.dataBytes[1]};r.parameter="rpn"===e?Object.keys(Enumerations.REGISTERED_PARAMETERS).find(e=>Enumerations.REGISTERED_PARAMETERS[e][0]===t&&Enumerations.REGISTERED_PARAMETERS[e][1]===n):(t<<7)+n;let o=Enumerations.CONTROL_CHANGE_MESSAGES[i.message.dataBytes[0]].name;r.type=`${e}-${o}`,this.emit(r.type,r);let a=Object.assign({},r);"nrpn-dataincrement"===a.type?a.type="nrpn-databuttonincrement":"nrpn-datadecrement"===a.type?a.type="nrpn-databuttondecrement":"rpn-dataincrement"===a.type?a.type="rpn-databuttonincrement":"rpn-datadecrement"===a.type&&(a.type="rpn-databuttondecrement"),this.emit(a.type,a),r.type=e,r.subtype=o,this.emit(r.type,r)}getChannelModeByNumber(e){return wm.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),Utilities.getChannelModeByNumber(e)}getCcNameByNumber(e){if(wm.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),!((e=parseInt(e))>=0&&e<=127)))throw RangeError("Invalid control change number.");return Utilities.getCcNameByNumber(e)}getNoteState(e){e instanceof Note&&(e=e.identifier);let t=Utilities.guessNoteNumber(e,wm.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[t]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&isNaN(e=parseInt(e)))throw TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Message{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=1+(15&this.statusByte)):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=Utilities.getPropertyByValue(Enumerations.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=Utilities.getPropertyByValue(Enumerations.SYSTEM_MESSAGES,this.command)),this.statusByte===Enumerations.SYSTEM_MESSAGES.sysex&&(0===this.dataBytes[0]?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Input extends EventEmitter{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let e=1;e<=16;e++)this.channels[e]=new InputChannel(this,e);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let t={timestamp:wm.time,target:this,port:this};"open"===e.port.connection?(t.type="opened",this.emit("opened",t)):"closed"===e.port.connection&&"connected"===e.port.state?(t.type="closed",this.emit("closed",t)):"closed"===e.port.connection&&"disconnected"===e.port.state?(t.type="disconnected",t.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",t)):"pending"===e.port.connection&&"disconnected"===e.port.state||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){let t=new Message(e.data),n={port:this,target:this,message:t,timestamp:e.timeStamp,type:"midimessage",data:t.data,rawData:t.data,statusByte:t.data[0],dataBytes:t.dataBytes};this.emit("midimessage",n),t.isSystemMessage?this._parseEvent(n):t.isChannelMessage&&this.channels[t.channel]._processMidiMessageEvent(n),this._forwarders.forEach(e=>e.forward(t))}_parseEvent(e){let t=Object.assign({},e);t.type=t.message.type||"unknownmidimessage","songselect"===t.type&&(t.song=e.data[1]+1,t.value=e.data[1],t.rawValue=t.value),this.emit(t.type,t)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){wm.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,t,n={}){if(wm.validation&&"function"==typeof n){let e=null!=t?[].concat(t):void 0;t=n,n={channels:e}}if(Enumerations.CHANNEL_EVENTS.includes(e)){void 0===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS);let i=[];return Utilities.sanitizeChannels(n.channels).forEach(r=>{i.push(this.channels[r].addListener(e,t,n))}),i}return super.addListener(e,t,n)}addOneTimeListener(e,t,n={}){return n.remaining=1,this.addListener(e,t,n)}on(e,t,n,i){return this.addListener(e,t,n,i)}hasListener(e,t,n={}){if(wm.validation&&"function"==typeof n){let e=[].concat(t);t=n,n={channels:e}}return Enumerations.CHANNEL_EVENTS.includes(e)?(void 0===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),Utilities.sanitizeChannels(n.channels).every(n=>this.channels[n].hasListener(e,t))):super.hasListener(e,t)}removeListener(e,t,n={}){if(wm.validation&&"function"==typeof n){let e=[].concat(t);t=n,n={channels:e}}if(void 0===n.channels&&(n.channels=Enumerations.MIDI_CHANNEL_NUMBERS),null==e)return Utilities.sanitizeChannels(n.channels).forEach(e=>{this.channels[e]&&this.channels[e].removeListener()}),super.removeListener();Enumerations.CHANNEL_EVENTS.includes(e)?Utilities.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].removeListener(e,t,n)}):super.removeListener(e,t,n)}addForwarder(e,t={}){let n;return n=e instanceof Forwarder?e:new Forwarder(e,t),this._forwarders.push(n),n}removeForwarder(e){this._forwarders=this._forwarders.filter(t=>t!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&isNaN(e=parseInt(e)))throw TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return wm.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}if(Utilities.isNode){try{window.navigator}catch(err){let jzz;eval('jzz = require("jzz")'),$parcel$global.navigator=jzz}try{performance}catch(err){let performance1;eval('performance = require("perf_hooks").performance'),$parcel$global.performance=performance1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class WebMidi extends EventEmitter{constructor(){super(),this.defaults={note:{attack:Utilities.from7bitToFloat(64),release:Utilities.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},t=!1){if(this.validation=!1!==e.validation,this.validation&&("function"==typeof e&&(e={callback:e,sysex:t}),t&&(e.sysex=!0)),this.enabled)return"function"==typeof e.callback&&e.callback(),Promise.resolve();let n={timestamp:this.time,target:this,type:"error",error:void 0},i={timestamp:this.time,target:this,type:"midiaccessgranted"},r={timestamp:this.time,target:this,type:"enabled"};try{"function"==typeof e.requestMIDIAccessFunction?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(t){return n.error=t,this.emit("error",n),"function"==typeof e.callback&&e.callback(t),Promise.reject(t)}this.emit("midiaccessgranted",i),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(t){return n.error=t,this.emit("error",n),"function"==typeof e.callback&&e.callback(t),Promise.reject(t)}return this.emit("enabled",r),"function"==typeof e.callback&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&"function"==typeof navigator.close&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let t=0;t<this._disconnectedInputs.length;t++)if(this._disconnectedInputs[t].id===e.toString())return this._disconnectedInputs[t]}else for(let t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e.toString())return this.inputs[t]}getInputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let t=0;t<this._disconnectedInputs.length;t++)if(~this._disconnectedInputs[t].name.indexOf(e))return this._disconnectedInputs[t]}else for(let t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t]}getOutputByName(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(t.disconnected){for(let t=0;t<this._disconnectedOutputs.length;t++)if(~this._disconnectedOutputs[t].name.indexOf(e))return this._disconnectedOutputs[t]}else for(let t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t]}getOutputById(e,t={disconnected:!1}){if(this.validation){if(!this.enabled)throw Error("WebMidi is not enabled.");if(!e)return}if(t.disconnected){for(let t=0;t<this._disconnectedOutputs.length;t++)if(this._disconnectedOutputs[t].id===e.toString())return this._disconnectedOutputs[t]}else for(let t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e.toString())return this.outputs[t]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),Utilities.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127&&Utilities.getNoteDetails(Utilities.offsetNumber(e,this.octaveOffset)).octave}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),Utilities.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),Utilities.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),Utilities.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,t={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),Utilities.buildNoteArray(e,t)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),Utilities.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(t=>e.push(t.destroy())),this.outputs.forEach(t=>e.push(t.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let t={timestamp:e.timeStamp,type:e.port.state,target:this};if("connected"===e.port.state&&"open"===e.port.connection){"output"===e.port.type?t.port=this.getOutputById(e.port.id):"input"===e.port.type&&(t.port=this.getInputById(e.port.id)),this.emit(e.port.state,t);let n=Object.assign({},t);n.type="portschanged",this.emit(n.type,n)}else if("disconnected"===e.port.state&&"pending"===e.port.connection){"input"===e.port.type?t.port=this.getInputById(e.port.id,{disconnected:!0}):"output"===e.port.type&&(t.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,t);let n=Object.assign({},t);n.type="portschanged",this.emit(n.type,n)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let e=this._inputs.length-1;e>=0;e--){let t=this._inputs[e];Array.from(this.interface.inputs.values()).find(e=>e===t._midiInput)||(this._disconnectedInputs.push(t),this._inputs.splice(e,1))}let e=[];return this.interface.inputs.forEach(t=>{if(!this._inputs.find(e=>e._midiInput===t)){let n=this._disconnectedInputs.find(e=>e._midiInput===t);n||(n=new Input(t)),this._inputs.push(n),e.push(n.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let e=this._outputs.length-1;e>=0;e--){let t=this._outputs[e];Array.from(this.interface.outputs.values()).find(e=>e===t._midiOutput)||(this._disconnectedOutputs.push(t),this._outputs.splice(e,1))}let e=[];return this.interface.outputs.forEach(t=>{if(!this._outputs.find(e=>e._midiOutput===t)){let n=this._disconnectedOutputs.find(e=>e._midiOutput===t);n||(n=new Output(t)),this._outputs.push(n),e.push(n.open())}}),Promise.all(e)}get enabled(){return null!==this.interface}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),Utilities.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),Utilities.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&isNaN(e=parseInt(e)))throw TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return"undefined"!=typeof navigator&&navigator.requestMIDIAccess}get sysexEnabled(){return!(!this.interface||!this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.6"}get flavour(){return"cjs"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),Enumerations.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),Enumerations.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),Enumerations.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),Enumerations.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),Enumerations.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}let wm=new WebMidi;wm.constructor=null,exports.Enumerations=Enumerations,exports.Forwarder=Forwarder,exports.Input=Input,exports.InputChannel=InputChannel,exports.Message=Message,exports.Note=Note,exports.Output=Output,exports.OutputChannel=OutputChannel,exports.Utilities=Utilities,exports.WebMidi=wm}),parcelRegister("17tgv",function(e,t){// shim for using process in browser
var n,i,r,o=e.exports={};function a(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(e){if(n===setTimeout)return setTimeout(e,0);// if setTimeout wasn't available but was latter defined
if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{// when when somebody has screwed with setTimeout but no I.E. maddness
return n(e,0)}catch(t){try{// When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
return n.call(null,e,0)}catch(t){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
return n.call(this,e,0)}}}function c(e){if(i===clearTimeout)return clearTimeout(e);// if clearTimeout wasn't available but was latter defined
if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{// when when somebody has screwed with setTimeout but no I.E. maddness
return i(e)}catch(t){try{// When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
return i.call(null,e)}catch(t){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
// Some versions of I.E. have different rules for clearTimeout vs setTimeout
return i.call(this,e)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u=[],h=!1,d=-1;function p(){h&&r&&(h=!1,r.length?u=r.concat(u):d=-1,u.length&&f())}function f(){if(!h){var e=l(p);h=!0;for(var t=u.length;t;){for(r=u,u=[];++d<t;)r&&r[d].run();d=-1,t=u.length}r=null,h=!1,c(e)}}// v8 likes predictible objects
function m(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||h||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}});var $231519b62b676521$exports={},$a520a033728d73e4$exports={},$fMiaA=parcelRequire("fMiaA");$fMiaA.trust=parcelRequire("gQsxe"),$fMiaA.fragment=parcelRequire("pcZwJ"),$a520a033728d73e4$exports=$fMiaA;var $de539031959a0ca1$exports={},$9JY0H=parcelRequire("9JY0H"),$gA8yJ=parcelRequire("gA8yJ");$de539031959a0ca1$exports=parcelRequire("6ePE9")("undefined"!=typeof window?window:null,$9JY0H,$gA8yJ.redraw);var $gA8yJ=parcelRequire("gA8yJ"),$231519b62b676521$var$m=function(){return $a520a033728d73e4$exports.apply(this,arguments)};$231519b62b676521$var$m.m=$a520a033728d73e4$exports,$231519b62b676521$var$m.trust=$a520a033728d73e4$exports.trust,$231519b62b676521$var$m.fragment=$a520a033728d73e4$exports.fragment,$231519b62b676521$var$m.Fragment="[",$231519b62b676521$var$m.mount=$gA8yJ.mount,$231519b62b676521$var$m.route=parcelRequire("5NN5g"),$231519b62b676521$var$m.render=parcelRequire("03gNt"),$231519b62b676521$var$m.redraw=$gA8yJ.redraw,$231519b62b676521$var$m.request=$de539031959a0ca1$exports.request,$231519b62b676521$var$m.jsonp=$de539031959a0ca1$exports.jsonp,$231519b62b676521$var$m.parseQueryString=parcelRequire("kRquH"),$231519b62b676521$var$m.buildQueryString=parcelRequire("4TqxV"),$231519b62b676521$var$m.parsePathname=parcelRequire("rLlma"),$231519b62b676521$var$m.buildPathname=parcelRequire("dVi4w"),$231519b62b676521$var$m.vnode=parcelRequire("8JOml"),$231519b62b676521$var$m.PromisePolyfill=parcelRequire("c0EvV"),$231519b62b676521$var$m.censor=parcelRequire("g0xgq"),$231519b62b676521$exports=$231519b62b676521$var$m;var $3895aa91744b6895$exports={};!/**
 * alertifyjs 1.13.1 http://alertifyjs.com
 * AlertifyJS is a javascript framework for developing pretty browser dialogs and notifications.
 * Copyright 2019 Mohammad Younes <Mohammad@alertifyjs.com> (http://alertifyjs.com) 
 * Licensed under GPL 3 <https://opensource.org/licenses/gpl-3.0>*/function(e){var t=":not(:disabled):not(.ajs-reset)",n={ENTER:13,ESC:27,F1:112,F12:123,LEFT:37,RIGHT:39,TAB:9},i={autoReset:!0,basic:!1,closable:!0,closableByDimmer:!0,invokeOnCloseOff:!1,frameless:!1,defaultFocusOff:!1,maintainFocus:!0,maximizable:!0,modal:!0,movable:!0,moveBounded:!1,overflow:!0,padding:!0,pinnable:!0,pinned:!0,preventBodyShift:!1,resizable:!0,startMaximized:!1,transition:"pulse",transitionOff:!1,tabbable:["button","[href]","input","select","textarea",'[tabindex]:not([tabindex^="-"])'+t].join(t+","),notifier:{delay:5,position:"bottom-right",closeButton:!1,classes:{base:"alertify-notifier",prefix:"ajs-",message:"ajs-message",top:"ajs-top",right:"ajs-right",bottom:"ajs-bottom",left:"ajs-left",center:"ajs-center",visible:"ajs-visible",hidden:"ajs-hidden",close:"ajs-close"}},glossary:{title:"AlertifyJS",ok:"OK",cancel:"Cancel",acccpt:"Accept",deny:"Deny",confirm:"Confirm",decline:"Decline",close:"Close",maximize:"Maximize",restore:"Restore"},theme:{input:"ajs-input",ok:"ajs-ok",cancel:"ajs-cancel"},hooks:{preinit:function(){},postinit:function(){}}},r=[];/**
     * [Helper]  Adds the specified class(es) to the element.
     *
     * @element {node}      The element
     * @className {string}  One or more space-separated classes to be added to the class attribute of the element.
     * 
     * @return {undefined}
     */function o(e,t){e.className+=" "+t}/**
     * [Helper]  Removes the specified class(es) from the element.
     *
     * @element {node}      The element
     * @className {string}  One or more space-separated classes to be removed from the class attribute of the element.
     * 
     * @return {undefined}
     */function a(e,t){for(var n=e.className.split(" "),i=t.split(" "),r=0;r<i.length;r+=1){var o=n.indexOf(i[r]);o>-1&&n.splice(o,1)}e.className=n.join(" ")}/**
     * [Helper]  Checks if the document is RTL
     *
     * @return {Boolean} True if the document is RTL, false otherwise.
     */function s(){return"rtl"===e.getComputedStyle(document.body).direction}/**
     * [Helper]  Get the document current scrollTop
     *
     * @return {Number} current document scrollTop value
     */function l(){return document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop}/**
     * [Helper]  Get the document current scrollLeft
     *
     * @return {Number} current document scrollLeft value
     */function c(){return document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft}/**
    * Helper: clear contents
    *
    */function u(e){for(;e.lastChild;)e.removeChild(e.lastChild)}/**
     * Extends a given prototype by merging properties from base into sub.
     *
     * @sub {Object} sub The prototype being overwritten.
     * @base {Object} base The prototype being written.
     *
     * @return {Object} The extended prototype.
     */function h(e){if(null===e)return e;if(Array.isArray(e)){t=[];for(var t,n=0;n<e.length;n+=1)t.push(h(e[n]));return t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return(t=new RegExp(e.source)).global=e.global,t.ignoreCase=e.ignoreCase,t.multiline=e.multiline,t.lastIndex=e.lastIndex,t;if("object"==typeof e){// copy dialog pototype over definition.
for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=h(e[i]));return t}return e}/**
      * Helper: destruct the dialog
      *
      */function d(e,t){if(e.elements){//delete the dom and it's references.
var n=e.elements.root;n.parentNode.removeChild(n),delete e.elements,//copy back initial settings.
e.settings=h(e.__settings),//re-reference init function.
e.__init=t,//delete __internal variable to allow re-initialization.
delete e.__internal}}/**
     * Test to check if passive event listeners are supported.
     */var p=!1;try{var f=Object.defineProperty({},"passive",{get:function(){p=!0}});e.addEventListener("test",f,f),e.removeEventListener("test",f,f)}catch(e){}/**
     * Removes an event listener
     *
     * @param {HTMLElement} el The EventTarget to register the listenr on.
     * @param {string} event The event type to listen for.
     * @param {Function} handler The function to handle the event.
     * @param {boolean} useCapture Specifices if the event to be dispatched to the registered listener before being dispatched to any EventTarget beneath it in the DOM tree.
     * @param {boolean} passive A Boolean which, if true, indicates that the function specified by listener will never call preventDefault().
     */var m=function(e,t,n,i,r){e.addEventListener(t,n,p?{capture:i,passive:r}:!0===i)},y=function(e,t,n,i,r){e.removeEventListener(t,n,p?{capture:i,passive:r}:!0===i)},g=function(){var e,t,n=!1,i={animation:"animationend",OAnimation:"oAnimationEnd oanimationend",msAnimation:"MSAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in i)if(void 0!==document.documentElement.style[e]){t=i[e],n=!0;break}return{type:t,supported:n}}();/**
    * Creates event handler delegate that sends the instance as last argument.
    * 
    * @return {Function}    a function wrapper which sends the instance as last argument.
    */function v(e,t){return function(){if(arguments.length>0){for(var n=[],i=0;i<arguments.length;i+=1)n.push(arguments[i]);return n.push(e),t.apply(e,n)}return t.apply(e,[null,e])}}/**
    * Helper for creating a dialog close event.
    * 
    * @return {object}
    */function b(e,t){return{index:e,button:t,cancel:!1}}/**
    * Helper for dispatching events.
    *
    * @param  {string} evenType The type of the event to disptach.
    * @param  {object} instance The dialog instance disptaching the event.
    *
    * @return   {any}   The result of the invoked function.
    */function x(e,t){if("function"==typeof t.get(e))return t.get(e).call(t)}/**
     * Super class for all dialogs
     *
     * @return {Object}		base dialog prototype
     */var _=function(){var t,p,f=[],_=null,E=!1,M=e.navigator.userAgent.indexOf("Safari")>-1&&0>e.navigator.userAgent.indexOf("Chrome"),S={dimmer:'<div class="ajs-dimmer"></div>',/*tab index required to fire click event before body focus*/modal:'<div class="ajs-modal" tabindex="0"></div>',dialog:'<div class="ajs-dialog" tabindex="0"></div>',reset:'<button class="ajs-reset"></button>',commands:'<div class="ajs-commands"><button class="ajs-pin"></button><button class="ajs-maximize"></button><button class="ajs-close"></button></div>',header:'<div class="ajs-header"></div>',body:'<div class="ajs-body"></div>',content:'<div class="ajs-content"></div>',footer:'<div class="ajs-footer"></div>',buttons:{primary:'<div class="ajs-primary ajs-buttons"></div>',auxiliary:'<div class="ajs-auxiliary ajs-buttons"></div>'},button:'<button class="ajs-button"></button>',resizeHandle:'<div class="ajs-handle"></div>'},N={animationIn:"ajs-in",animationOut:"ajs-out",base:"alertify",basic:"ajs-basic",capture:"ajs-capture",closable:"ajs-closable",fixed:"ajs-fixed",frameless:"ajs-frameless",hidden:"ajs-hidden",maximized:"ajs-maximized",maximizable:"ajs-maximizable",modeless:"ajs-modeless",movable:"ajs-movable",noSelection:"ajs-no-selection",noOverflow:"ajs-no-overflow",noPadding:"ajs-no-padding",pinnable:"ajs-pinnable",prefix:"ajs-",resizable:"ajs-resizable",shake:"ajs-shake",unpinned:"ajs-unpinned",noTransition:"ajs-no-transition"};/**
         * Helper: initializes the dialog instance
         * 
         * @return	{Number}	The total count of currently open modals.
         */function A(e){if(!e.__internal){//invoke preinit global hook
w.defaults.hooks.preinit(e),//no need to expose init after this.
delete e.__init,e.__settings||(e.__settings=h(e.settings)),"function"==typeof e.setup?((t=e.setup()).options=t.options||{},t.focus=t.focus||{}):t={buttons:[],focus:{element:null,select:!1},options:{}},"object"!=typeof e.hooks&&(e.hooks={});//copy buttons defintion
var t,n=[];if(Array.isArray(t.buttons))for(var i=0;i<t.buttons.length;i+=1){var r=t.buttons[i],a={};for(var s in r)r.hasOwnProperty(s)&&(a[s]=r[s]);n.push(a)}var l=e.__internal={/**
                     * Flag holding the open state of the dialog
                     * 
                     * @type {Boolean}
                     */isOpen:!1,/**
                     * Active element is the element that will receive focus after
                     * closing the dialog. It defaults as the body tag, but gets updated
                     * to the last focused element before the dialog was opened.
                     *
                     * @type {Node}
                     */activeElement:document.body,timerIn:void 0,timerOut:void 0,buttons:n,focus:t.focus,options:{title:void 0,modal:void 0,basic:void 0,frameless:void 0,defaultFocusOff:void 0,pinned:void 0,movable:void 0,moveBounded:void 0,resizable:void 0,autoReset:void 0,closable:void 0,closableByDimmer:void 0,invokeOnCloseOff:void 0,maximizable:void 0,startMaximized:void 0,pinnable:void 0,transition:void 0,transitionOff:void 0,padding:void 0,overflow:void 0,onshow:void 0,onclosing:void 0,onclose:void 0,onfocus:void 0,onmove:void 0,onmoved:void 0,onresize:void 0,onresized:void 0,onmaximize:void 0,onmaximized:void 0,onrestore:void 0,onrestored:void 0},resetHandler:void 0,beginMoveHandler:void 0,beginResizeHandler:void 0,bringToFrontHandler:void 0,modalClickHandler:void 0,buttonsClickHandler:void 0,commandsClickHandler:void 0,transitionInHandler:void 0,transitionOutHandler:void 0,destroy:void 0},c={};//root node
c.root=document.createElement("div"),//prevent FOUC in case of async styles loading.
c.root.style.display="none",c.root.className=N.base+" "+N.hidden+" ",c.root.innerHTML=S.dimmer+S.modal,//dimmer
c.dimmer=c.root.firstChild,//dialog
c.modal=c.root.lastChild,c.modal.innerHTML=S.dialog,c.dialog=c.modal.firstChild,c.dialog.innerHTML=S.reset+S.commands+S.header+S.body+S.footer+S.resizeHandle+S.reset,//reset links
c.reset=[],c.reset.push(c.dialog.firstChild),c.reset.push(c.dialog.lastChild),//commands
c.commands={},c.commands.container=c.reset[0].nextSibling,c.commands.pin=c.commands.container.firstChild,c.commands.maximize=c.commands.pin.nextSibling,c.commands.close=c.commands.maximize.nextSibling,//header
c.header=c.commands.container.nextSibling,//body
c.body=c.header.nextSibling,c.body.innerHTML=S.content,c.content=c.body.firstChild,//footer
c.footer=c.body.nextSibling,c.footer.innerHTML=S.buttons.auxiliary+S.buttons.primary,//resize handle
c.resizeHandle=c.footer.nextSibling,//buttons
c.buttons={},c.buttons.auxiliary=c.footer.firstChild,c.buttons.primary=c.buttons.auxiliary.nextSibling,c.buttons.primary.innerHTML=S.button,c.buttonTemplate=c.buttons.primary.firstChild,//remove button template
c.buttons.primary.removeChild(c.buttonTemplate);for(var u=0;u<e.__internal.buttons.length;u+=1){var d=e.__internal.buttons[u];for(var p in 0>f.indexOf(d.key)&&f.push(d.key),d.element=c.buttonTemplate.cloneNode(),d.element.innerHTML=d.text,"string"==typeof d.className&&""!==d.className&&o(d.element,d.className),d.attrs)"className"!==p&&d.attrs.hasOwnProperty(p)&&d.element.setAttribute(p,d.attrs[p]);"auxiliary"===d.scope?c.buttons.auxiliary.appendChild(d.element):c.buttons.primary.appendChild(d.element)}//settings
for(var m in //make elements pubic
e.elements=c,//save event handlers delegates
l.resetHandler=v(e,eh),l.beginMoveHandler=v(e,eN),l.beginResizeHandler=v(e,eD),l.bringToFrontHandler=v(e,B),l.modalClickHandler=v(e,ei),l.buttonsClickHandler=v(e,es),l.commandsClickHandler=v(e,V),l.transitionInHandler=v(e,ef),l.transitionOutHandler=v(e,em),l.options)void 0!==t.options[m]?e.set(m,t.options[m]):w.defaults.hasOwnProperty(m)?e.set(m,w.defaults[m]):"title"===m&&e.set(m,w.defaults.glossary[m]);"function"==typeof e.build&&e.build(),//invoke postinit global hook
w.defaults.hooks.postinit(e)}//add to the end of the DOM tree.
document.body.appendChild(e.elements.root)}function C(){t=c(),p=l()}function k(){e.scrollTo(t,p)}/**
         * Helper: adds/removes no-overflow class from body
         *
         */function T(){for(var e=0,t=0;t<r.length;t+=1){var n=r[t];(n.isModal()||n.isMaximized())&&(e+=1)}0===e&&document.body.className.indexOf(N.noOverflow)>=0?(//last open modal or last maximized one
a(document.body,N.noOverflow),L(!1)):e>0&&0>document.body.className.indexOf(N.noOverflow)&&(//first open modal or first maximized one
L(!0),o(document.body,N.noOverflow))}var I="",O=0;/**
         * Helper: prevents body shift.
         *
         */function L(t){w.defaults.preventBodyShift&&(t&&document.documentElement.scrollHeight>document.documentElement.clientHeight?(O=p,I=e.getComputedStyle(document.body).top,o(document.body,N.fixed),document.body.style.top=-p+"px"):t||(p=O,document.body.style.top=I,a(document.body,N.fixed),k()))}/**
         * Sets the name of the transition used to show/hide the dialog
         * 
         * @param {Object} instance The dilog instance.
         *
         */function R(e,t,n){"string"==typeof n&&a(e.elements.root,N.prefix+n),o(e.elements.root,N.prefix+t),_=e.elements.root.offsetWidth}/**
         * Toggles the dialog no transition 
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function P(e){e.get("transitionOff")?o(e.elements.root,N.noTransition):a(e.elements.root,N.noTransition)}/**
         * Toggles the dialog display mode
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function H(e){e.get("modal")?(//make modal
a(e.elements.root,N.modeless),e.isOpen()&&(eW(e),//in case a pinned modless dialog was made modal while open.
Q(e),T())):(//make modelss
o(e.elements.root,N.modeless),e.isOpen()&&(eq(e),//in case pin/unpin was called while a modal is open
Q(e),T()))}/**
         * Toggles the dialog basic view mode 
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function D(e){e.get("basic")?o(e.elements.root,N.basic):a(e.elements.root,N.basic)}/**
         * Toggles the dialog frameless view mode 
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function z(e){e.get("frameless")?o(e.elements.root,N.frameless):a(e.elements.root,N.frameless)}/**
         * Helper: Brings the modeless dialog to front, attached to modeless dialogs.
         *
         * @param {Event} event Focus event
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function B(e,t){for(var n=r.indexOf(t),i=n+1;i<r.length;i+=1)if(r[i].isModal())return;return document.body.lastChild!==t.elements.root&&(document.body.appendChild(t.elements.root),//also make sure its at the end of the list
r.splice(r.indexOf(t),1),r.push(t),eu(t)),!1}/**
         * Helper: reflects dialogs options updates
         *
         * @param {Object} instance The dilog instance.
         * @param {String} option The updated option name.
         *
         * @return	{undefined}	
         */function U(e,t,n,i){switch(t){case"title":e.setHeader(i);break;case"modal":H(e);break;case"basic":D(e);break;case"frameless":z(e);break;case"pinned":X(e);break;case"closable":ee(e);break;case"maximizable":Z(e);break;case"pinnable":K(e);break;case"movable":eT(e);break;case"resizable":ej(e);break;case"padding":i?a(e.elements.root,N.noPadding):0>e.elements.root.className.indexOf(N.noPadding)&&o(e.elements.root,N.noPadding);break;case"overflow":i?a(e.elements.root,N.noOverflow):0>e.elements.root.className.indexOf(N.noOverflow)&&o(e.elements.root,N.noOverflow);break;case"transition":R(e,i,n);break;case"transitionOff":P(e)}"function"==typeof e.hooks.onupdate&&e.hooks.onupdate.call(e,t,n,i)}/**
         * Helper: reflects dialogs options updates
         *
         * @param {Object} instance The dilog instance.
         * @param {Object} obj The object to set/get a value on/from.
         * @param {Function} callback The callback function to call if the key was found.
         * @param {String|Object} key A string specifying a propery name or a collection of key value pairs.
         * @param {Object} value Optional, the value associated with the key (in case it was a string).
         * @param {String} option The updated option name.
         *
         * @return	{Object} result object 
         *	The result objects has an 'op' property, indicating of this is a SET or GET operation.
         *		GET: 
         *		- found: a flag indicating if the key was found or not.
         *		- value: the property value.
         *		SET:
         *		- items: a list of key value pairs of the properties being set.
         *				each contains:
         *					- found: a flag indicating if the key was found or not.
         *					- key: the property key.
         *					- value: the property value.
         */function j(e,t,n,i,r){var o,a={op:void 0,items:[]};if(void 0===r&&"string"==typeof i)//get
a.op="get",t.hasOwnProperty(i)?(a.found=!0,a.value=t[i]):(a.found=!1,a.value=void 0);else if(//set
a.op="set","object"==typeof i){//set multiple
var s=i;for(var l in s)t.hasOwnProperty(l)?(t[l]!==s[l]&&(o=t[l],t[l]=s[l],n.call(e,l,o,s[l])),a.items.push({key:l,value:s[l],found:!0})):a.items.push({key:l,value:s[l],found:!1})}else if("string"==typeof i)t.hasOwnProperty(i)?(t[i]!==r&&(o=t[i],t[i]=r,n.call(e,i,o,r)),a.items.push({key:i,value:r,found:!0})):a.items.push({key:i,value:r,found:!1});else throw Error("args must be a string or object");return a}/**
         * Triggers a close event.
         *
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */function G(e){var t;ea(e,function(n){return t=!0!==e.get("invokeOnCloseOff")&&!0===n.invokeOnClose}),!t&&e.isOpen()&&e.close()}/**
         * Dialogs commands event handler, attached to the dialog commands element.
         *
         * @param {Event} event	DOM event object.
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */function V(e,t){switch(e.srcElement||e.target){case t.elements.commands.pin:t.isPinned()?q(t):F(t);break;case t.elements.commands.maximize:t.isMaximized()?$(t):W(t);break;case t.elements.commands.close:G(t)}return!1}/**
         * Helper: pins the modeless dialog.
         *
         * @param {Object} instance	The dialog instance.
         * 
         * @return {undefined}
         */function F(e){//pin the dialog
e.set("pinned",!0)}/**
         * Helper: unpins the modeless dialog.
         *
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */function q(e){//unpin the dialog 
e.set("pinned",!1)}/**
         * Helper: enlarges the dialog to fill the entire screen.
         *
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */function W(e){// allow custom `onmaximize` method
x("onmaximize",e),//maximize the dialog 
o(e.elements.root,N.maximized),e.isOpen()&&T(),// allow custom `onmaximized` method
x("onmaximized",e)}/**
         * Helper: returns the dialog to its former size.
         *
         * @param {Object} instance	The dilog instance.
         * 
         * @return {undefined}
         */function $(e){// allow custom `onrestore` method
x("onrestore",e),//maximize the dialog 
a(e.elements.root,N.maximized),e.isOpen()&&T(),// allow custom `onrestored` method
x("onrestored",e)}/**
         * Show or hide the maximize box.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */function K(e){e.get("pinnable")?o(e.elements.root,N.pinnable):a(e.elements.root,N.pinnable)}/**
         * Helper: Fixes the absolutly positioned modal div position.
         *
         * @param {Object} instance The dialog instance.
         *
         * @return {undefined}
         */function Y(e){var t=c();e.elements.modal.style.marginTop=l()+"px",e.elements.modal.style.marginLeft=t+"px",e.elements.modal.style.marginRight=-t+"px"}/**
         * Helper: Removes the absolutly positioned modal div position fix.
         *
         * @param {Object} instance The dialog instance.
         *
         * @return {undefined}
         */function J(e){var t=parseInt(e.elements.modal.style.marginTop,10),n=parseInt(e.elements.modal.style.marginLeft,10);if(e.elements.modal.style.marginTop="",e.elements.modal.style.marginLeft="",e.elements.modal.style.marginRight="",e.isOpen()){var i=0,r=0;""!==e.elements.dialog.style.top&&(i=parseInt(e.elements.dialog.style.top,10)),e.elements.dialog.style.top=i+(t-l())+"px",""!==e.elements.dialog.style.left&&(r=parseInt(e.elements.dialog.style.left,10)),e.elements.dialog.style.left=r+(n-c())+"px"}}/**
         * Helper: Adds/Removes the absolutly positioned modal div position fix based on its pinned setting.
         *
         * @param {Object} instance The dialog instance.
         *
         * @return {undefined}
         */function Q(e){e.get("modal")||e.get("pinned")?J(e):Y(e)}/**
         * Toggles the dialog position lock | modeless only.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to make it modal, false otherwise.
         *
         * @return {undefined}
         */function X(e){e.get("pinned")?(a(e.elements.root,N.unpinned),e.isOpen()&&J(e)):(o(e.elements.root,N.unpinned),e.isOpen()&&!e.isModal()&&Y(e))}/**
         * Show or hide the maximize box.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */function Z(e){e.get("maximizable")?o(e.elements.root,N.maximizable):a(e.elements.root,N.maximizable)}/**
         * Show or hide the close box.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */function ee(e){e.get("closable")?(// add class
o(e.elements.root,N.closable),eQ(e)):(// remove class
a(e.elements.root,N.closable),eX(e))}var et=!1,en=0// stores last click timestamp to prevent executing the handler twice on double click.
;/**
         * Helper: closes the modal dialog when clicking the modal
         *
         * @param {Event} event	DOM event object.
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function ei(e,t){if(e.timeStamp-en>200&&(en=e.timeStamp)&&!et){var n=e.srcElement||e.target;!0===t.get("closableByDimmer")&&n===t.elements.modal&&G(t)}et=!1}// stores last call timestamp to prevent triggering the callback twice.
var er=0,eo=!1;/** 
         * Helper: triggers a button callback
         *
         * @param {Object}		The dilog instance.
         * @param {Function}	Callback to check which button triggered the event.
         *
         * @return {undefined}
         */function ea(e,t){if(Date.now()-er>200&&(er=Date.now()))for(var n=0;n<e.__internal.buttons.length;n+=1){var i=e.__internal.buttons[n];if(!i.element.disabled&&t(i)){var r=b(n,i);"function"==typeof e.callback&&e.callback.apply(e,[r]),!1===r.cancel&&e.close();break}}}/**
         * Clicks event handler, attached to the dialog footer.
         *
         * @param {Event}		DOM event object.
         * @param {Object}		The dilog instance.
         * 
         * @return {undefined}
         */function es(e,t){var n=e.srcElement||e.target;ea(t,function(e){// if this button caused the click, cancel keyup event
return e.element===n&&(eo=!0)})}/**
         * Keyup event handler, attached to the document.body
         *
         * @param {Event}		DOM event object.
         * @param {Object}		The dilog instance.
         * 
         * @return {undefined}
         */function el(e){//hitting enter while button has focus will trigger keyup too.
//ignore if handled by clickHandler
if(eo){eo=!1;return}var t=r[r.length-1],i=e.keyCode;return 0===t.__internal.buttons.length&&i===n.ESC&&!0===t.get("closable")?(G(t),!1):f.indexOf(i)>-1?(ea(t,function(e){return e.key===i}),!1):void 0}/**
        * Keydown event handler, attached to the document.body
        *
        * @param {Event}		DOM event object.
        * @param {Object}		The dilog instance.
        * 
        * @return {undefined}
        */function ec(e){var t=r[r.length-1],i=e.keyCode;if(i===n.LEFT||i===n.RIGHT){for(var o=t.__internal.buttons,a=0;a<o.length;a+=1)if(document.activeElement===o[a].element)switch(i){case n.LEFT:o[(a||o.length)-1].element.focus();return;case n.RIGHT:o[(a+1)%o.length].element.focus();return}}else if(i<n.F12+1&&i>n.F1-1&&f.indexOf(i)>-1)return e.preventDefault(),e.stopPropagation(),ea(t,function(e){return e.key===i}),!1}/**
         * Sets focus to proper dialog element
         *
         * @param {Object} instance The dilog instance.
         * @param {Node} [resetTarget=undefined] DOM element to reset focus to.
         *
         * @return {undefined}
         */function eu(e,t){// reset target has already been determined.
if(t)t.focus();else{// current instance focus settings
var n=e.__internal.focus,i=n.element;switch(typeof n.element){// a number means a button index
case"number":e.__internal.buttons.length>n.element&&(i=!0===e.get("basic")?e.elements.reset[0]:e.__internal.buttons[n.element].element);break;// a string means querySelector to select from dialog body contents.
case"string":i=e.elements.body.querySelector(n.element);break;// a function should return the focus element.
case"function":i=n.element.call(e)}(!0===e.get("defaultFocusOff")||null==i&&0===e.__internal.buttons.length)&&(i=e.elements.reset[0]),i&&i.focus&&(i.focus(),n.select&&i.select&&i.select())}}/**
         * Focus event handler, attached to document.body and dialogs own reset links.
         * handles the focus for modal dialogs only.
         *
         * @param {Event} event DOM focus event object.
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eh(e,t){// should work on last modal if triggered from document.body 
if(!t){for(var n=r.length-1;n>-1;n-=1)if(r[n].isModal()){t=r[n];break}}if(t&&t.isModal()){// determine reset target to enable forward/backward tab cycle.
var i,o=t.elements.reset[0],a=t.elements.reset[1],s=e.relatedTarget,l=t.elements.root.contains(s),c=e.srcElement||e.target;//if the previous focused element element was outside the modal do nthing
if(/*first show */c===o&&!l||/*focus cycle */c===a&&s===o)return;c===a||c===document.body?i=o:c===o&&s===a?i=ed(t):c===o&&l&&(i=ed(t,!0)),// focus
eu(t,i)}}function ed(e,t){var n=[].slice.call(e.elements.dialog.querySelectorAll(i.tabbable));t&&n.reverse();for(var r=0;r<n.length;r+=1){var o=n[r];//check if visible
if(o.offsetParent||o.offsetWidth||o.offsetHeight||o.getClientRects().length)return o}}function ep(e){var t=r[r.length-1];t&&e.shiftKey&&e.keyCode===n.TAB&&t.elements.reset[1].focus()}/**
         * Transition in transitionend event handler. 
         *
         * @param {Event}		TransitionEnd event object.
         * @param {Object}		The dilog instance.
         *
         * @return {undefined}
         */function ef(e,t){// clear the timer
clearTimeout(t.__internal.timerIn),// once transition is complete, set focus
eu(t),// allow handling key up after transition ended.
eo=!1,// allow custom `onfocus` method
x("onfocus",t),// unbind the event
y(t.elements.dialog,g.type,t.__internal.transitionInHandler),a(t.elements.root,N.animationIn)}/**
         * Transition out transitionend event handler. 
         *
         * @param {Event}		TransitionEnd event object.
         * @param {Object}		The dilog instance.
         *
         * @return {undefined}
         */function em(e,t){// clear the timer
clearTimeout(t.__internal.timerOut),// unbind the event
y(t.elements.dialog,g.type,t.__internal.transitionOutHandler),// reset move updates
ek(t),// reset resize updates
eU(t),t.isMaximized()&&!t.get("startMaximized")&&$(t),"function"==typeof t.__internal.destroy&&t.__internal.destroy.apply(t)}/* Controls moving a dialog around *///holde the current moving instance
var ey=null,eg=0,ev=0,eb="pageX",ex="pageY",e_=null,eE=!1,ew=null;/**
         * Helper: sets the element top/left coordinates
         *
         * @param {Event} event	DOM event object.
         * @param {Node} element The element being moved.
         * 
         * @return {undefined}
         */function eM(e,t){var n=e[eb]-eg,i=e[ex]-ev;eE&&(i-=document.body.scrollTop),t.style.left=n+"px",t.style.top=i+"px"}/**
         * Helper: sets the element top/left coordinates within screen bounds
         *
         * @param {Event} event	DOM event object.
         * @param {Node} element The element being moved.
         * 
         * @return {undefined}
         */function eS(e,t){var n=e[eb]-eg,i=e[ex]-ev;eE&&(i-=document.body.scrollTop),t.style.left=Math.min(e_.maxLeft,Math.max(e_.minLeft,n))+"px",eE?t.style.top=Math.min(e_.maxTop,Math.max(e_.minTop,i))+"px":t.style.top=Math.max(e_.minTop,i)+"px"}/**
         * Triggers the start of a move event, attached to the header element mouse down event.
         * Adds no-selection class to the body, disabling selection while moving.
         *
         * @param {Event} event	DOM event object.
         * @param {Object} instance The dilog instance.
         * 
         * @return {Boolean} false
         */function eN(e,t){if(null===eI&&!t.isMaximized()&&t.get("movable")){var n,i=0,r=0;if("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0],eb="clientX",ex="clientY"):0===e.button&&(n=e),n){var a=t.elements.dialog;if(o(a,N.capture),a.style.left&&(i=parseInt(a.style.left,10)),a.style.top&&(r=parseInt(a.style.top,10)),eg=n[eb]-i,ev=n[ex]-r,t.isModal()?ev+=t.elements.modal.scrollTop:t.isPinned()&&(ev-=document.body.scrollTop),t.get("moveBounded")){var s=a,l=-i,c=-r;//calc offset
do l+=s.offsetLeft,c+=s.offsetTop;while(s=s.offsetParent)e_={maxLeft:l,minLeft:-l,maxTop:document.documentElement.clientHeight-a.clientHeight-c,minTop:-c},ew=eS}else e_=null,ew=eM;return(// allow custom `onmove` method
x("onmove",t),eE=!t.isModal()&&t.isPinned(),ey=t,ew(n,a),o(document.body,N.noSelection),!1)}}}/**
         * The actual move handler,  attached to document.body mousemove event.
         *
         * @param {Event} event	DOM event object.
         * 
         * @return {undefined}
         */function eA(e){if(ey){var t;"touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&ew(t,ey.elements.dialog)}}/**
         * Triggers the end of a move event,  attached to document.body mouseup event.
         * Removes no-selection class from document.body, allowing selection.
         *
         * @return {undefined}
         */function eC(){if(ey){var e=ey;ey=e_=null,a(document.body,N.noSelection),a(e.elements.dialog,N.capture),// allow custom `onmoved` method
x("onmoved",e)}}/**
         * Resets any changes made by moving the element to its original state,
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function ek(e){ey=null;var t=e.elements.dialog;t.style.left=t.style.top=""}/**
         * Updates the dialog move behavior.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */function eT(e){e.get("movable")?(// add class
o(e.elements.root,N.movable),e.isOpen()&&e$(e)):(//reset
ek(e),// remove class
a(e.elements.root,N.movable),e.isOpen()&&eK(e))}/* Controls moving a dialog around *///holde the current instance being resized		
var eI=null,eO=Number.Nan,eL=0,eR=0,eP=0;/**
         * Helper: sets the element width/height and updates left coordinate if neccessary.
         *
         * @param {Event} event	DOM mousemove event object.
         * @param {Node} element The element being moved.
         * @param {Boolean} pinned A flag indicating if the element being resized is pinned to the screen.
         * 
         * @return {undefined}
         */function eH(e,t,n){//calculate offsets from 0,0
var i,r,o=t,a=0,l=0;do a+=o.offsetLeft,l+=o.offsetTop;while(o=o.offsetParent)!0===n?(i=e.pageX,r=e.pageY):(i=e.clientX,r=e.clientY);// rtl handling
var c=s();// if the element being resized has a starting left, maintain it.
// the dialog is centered, divide by half the offset to maintain the margins.
if(c&&(// reverse X 
i=document.body.offsetWidth-i,isNaN(eO)||(a=document.body.offsetWidth-a-t.offsetWidth)),// set width/height
t.style.height=r-l+eP+"px",t.style.width=i-a+eP+"px",!isNaN(eO)){var u=.5*Math.abs(t.offsetWidth-eL);c&&//when growing it should decrease left
//when shrinking it should increase left
(u*=-1),t.offsetWidth>eL?t.style.left=eO+u+"px":t.offsetWidth>=eR&&(t.style.left=eO-u+"px")}}/**
         * Triggers the start of a resize event, attached to the resize handle element mouse down event.
         * Adds no-selection class to the body, disabling selection while moving.
         *
         * @param {Event} event	DOM event object.
         * @param {Object} instance The dilog instance.
         * 
         * @return {Boolean} false
         */function eD(e,t){if(!t.isMaximized()){var n;if("touchstart"===e.type?(e.preventDefault(),n=e.targetTouches[0]):0===e.button&&(n=e),n){// allow custom `onresize` method
x("onresize",t),eI=t,eP=t.elements.resizeHandle.offsetHeight/2;var i=t.elements.dialog;return o(i,N.capture),eO=parseInt(i.style.left,10),i.style.height=i.offsetHeight+"px",i.style.minHeight=t.elements.header.offsetHeight+t.elements.footer.offsetHeight+"px",i.style.width=(eL=i.offsetWidth)+"px","none"!==i.style.maxWidth&&(i.style.minWidth=(eR=i.offsetWidth)+"px"),i.style.maxWidth="none",o(document.body,N.noSelection),!1}}}/**
         * The actual resize handler,  attached to document.body mousemove event.
         *
         * @param {Event} event	DOM event object.
         * 
         * @return {undefined}
         */function ez(e){if(eI){var t;"touchmove"===e.type?(e.preventDefault(),t=e.targetTouches[0]):0===e.button&&(t=e),t&&eH(t,eI.elements.dialog,!eI.get("modal")&&!eI.get("pinned"))}}/**
         * Triggers the end of a resize event,  attached to document.body mouseup event.
         * Removes no-selection class from document.body, allowing selection.
         *
         * @return {undefined}
         */function eB(){if(eI){var e=eI;eI=null,a(document.body,N.noSelection),a(e.elements.dialog,N.capture),et=!0,// allow custom `onresized` method
x("onresized",e)}}/**
         * Resets any changes made by resizing the element to its original state.
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eU(e){eI=null;var t=e.elements.dialog;"none"===t.style.maxWidth&&(//clear inline styles.
t.style.maxWidth=t.style.minWidth=t.style.width=t.style.height=t.style.minHeight=t.style.left="",//reset variables.
eO=Number.Nan,eL=eR=eP=0)}/**
         * Updates the dialog move behavior.
         *
         * @param {Object} instance The dilog instance.
         * @param {Boolean} on True to add the behavior, removes it otherwise.
         *
         * @return {undefined}
         */function ej(e){e.get("resizable")?(// add class
o(e.elements.root,N.resizable),e.isOpen()&&eY(e)):(//reset
eU(e),// remove class
a(e.elements.root,N.resizable),e.isOpen()&&eJ(e))}/**
         * Reset move/resize on window resize.
         *
         * @param {Event} event	window resize event object.
         *
         * @return {undefined}
         */function eG(){for(var e=0;e<r.length;e+=1){var t=r[e];t.get("autoReset")&&(ek(t),eU(t))}}/**
         * Bind dialogs events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eV(t){1===r.length&&(//global
m(e,"resize",eG),m(document.body,"keyup",el),m(document.body,"keydown",ec),m(document.body,"focus",eh),//move
m(document.documentElement,"mousemove",eA),m(document.documentElement,"touchmove",eA,!1,!1),m(document.documentElement,"mouseup",eC),m(document.documentElement,"touchend",eC),//resize
m(document.documentElement,"mousemove",ez),m(document.documentElement,"touchmove",ez,!1,!1),m(document.documentElement,"mouseup",eB),m(document.documentElement,"touchend",eB)),// common events
m(t.elements.commands.container,"click",t.__internal.commandsClickHandler),m(t.elements.footer,"click",t.__internal.buttonsClickHandler),m(t.elements.reset[0],"focusin",t.__internal.resetHandler),m(t.elements.reset[0],"keydown",ep),m(t.elements.reset[1],"focusin",t.__internal.resetHandler),//prevent handling key up when dialog is being opened by a key stroke.
eo=!0,// hook in transition handler
m(t.elements.dialog,g.type,t.__internal.transitionInHandler),t.get("modal")||eq(t),t.get("resizable")&&eY(t),t.get("movable")&&e$(t)}/**
         * Unbind dialogs events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eF(t){1===r.length&&(//global
y(e,"resize",eG),y(document.body,"keyup",el),y(document.body,"keydown",ec),y(document.body,"focus",eh),//move
y(document.documentElement,"mousemove",eA),y(document.documentElement,"mouseup",eC),//resize
y(document.documentElement,"mousemove",ez),y(document.documentElement,"mouseup",eB)),// common events
y(t.elements.commands.container,"click",t.__internal.commandsClickHandler),y(t.elements.footer,"click",t.__internal.buttonsClickHandler),y(t.elements.reset[0],"focusin",t.__internal.resetHandler),y(t.elements.reset[0],"keydown",ep),y(t.elements.reset[1],"focusin",t.__internal.resetHandler),// hook out transition handler
m(t.elements.dialog,g.type,t.__internal.transitionOutHandler),t.get("modal")||eW(t),t.get("movable")&&eK(t),t.get("resizable")&&eJ(t)}/**
         * Bind modeless specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eq(e){m(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}/**
         * Unbind modeless specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eW(e){y(e.elements.dialog,"focus",e.__internal.bringToFrontHandler,!0)}/**
         * Bind movable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function e$(e){m(e.elements.header,"mousedown",e.__internal.beginMoveHandler),m(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}/**
         * Unbind movable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eK(e){y(e.elements.header,"mousedown",e.__internal.beginMoveHandler),y(e.elements.header,"touchstart",e.__internal.beginMoveHandler,!1,!1)}/**
         * Bind resizable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eY(e){m(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),m(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}/**
         * Unbind resizable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eJ(e){y(e.elements.resizeHandle,"mousedown",e.__internal.beginResizeHandler),y(e.elements.resizeHandle,"touchstart",e.__internal.beginResizeHandler,!1,!1)}/**
         * Bind closable events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eQ(e){m(e.elements.modal,"click",e.__internal.modalClickHandler)}/**
         * Unbind closable specific events
         *
         * @param {Object} instance The dilog instance.
         *
         * @return {undefined}
         */function eX(e){y(e.elements.modal,"click",e.__internal.modalClickHandler)}// dialog API
return{__init:A,/**
             * Check if dialog is currently open
             *
             * @return {Boolean}
             */isOpen:function(){return this.__internal.isOpen},isModal:function(){return 0>this.elements.root.className.indexOf(N.modeless)},isMaximized:function(){return this.elements.root.className.indexOf(N.maximized)>-1},isPinned:function(){return 0>this.elements.root.className.indexOf(N.unpinned)},maximize:function(){return this.isMaximized()||W(this),this},restore:function(){return this.isMaximized()&&$(this),this},pin:function(){return this.isPinned()||F(this),this},unpin:function(){return this.isPinned()&&q(this),this},bringToFront:function(){return B(null,this),this},/**
             * Move the dialog to a specific x/y coordinates
             *
             * @param {Number} x    The new dialog x coordinate in pixels.
             * @param {Number} y    The new dialog y coordinate in pixels.
             *
             * @return {Object} The dialog instance.
             */moveTo:function(e,t){if(!isNaN(e)&&!isNaN(t)){// allow custom `onmove` method
x("onmove",this);var n=this.elements.dialog,i=n,r=0,o=0;n.style.left&&(r-=parseInt(n.style.left,10)),n.style.top&&(o-=parseInt(n.style.top,10));//calc offset
do r+=i.offsetLeft,o+=i.offsetTop;while(i=i.offsetParent)//calc left, top
var a=e-r,l=t-o;s()&&(a*=-1),n.style.left=a+"px",n.style.top=l+"px",// allow custom `onmoved` method
x("onmoved",this)}return this},/**
             * Resize the dialog to a specific width/height (the dialog must be 'resizable').
             * The dialog can be resized to:
             *  A minimum width equal to the initial display width
             *  A minimum height equal to the sum of header/footer heights.
             *
             *
             * @param {Number or String} width    The new dialog width in pixels or in percent.
             * @param {Number or String} height   The new dialog height in pixels or in percent.
             *
             * @return {Object} The dialog instance.
             */resizeTo:function(e,t){var n=parseFloat(e),i=parseFloat(t),r=/(\d*\.\d+|\d+)%/;if(!isNaN(n)&&!isNaN(i)&&!0===this.get("resizable")){// allow custom `onresize` method
x("onresize",this),(""+e).match(r)&&(n=n/100*document.documentElement.clientWidth),(""+t).match(r)&&(i=i/100*document.documentElement.clientHeight);var o=this.elements.dialog;"none"!==o.style.maxWidth&&(o.style.minWidth=(eR=o.offsetWidth)+"px"),o.style.maxWidth="none",o.style.minHeight=this.elements.header.offsetHeight+this.elements.footer.offsetHeight+"px",o.style.width=n+"px",o.style.height=i+"px",// allow custom `onresized` method
x("onresized",this)}return this},/**
             * Gets or Sets dialog settings/options 
             *
             * @param {String|Object} key A string specifying a propery name or a collection of key/value pairs.
             * @param {Object} value Optional, the value associated with the key (in case it was a string).
             *
             * @return {undefined}
             */setting:function(e,t){var n=this,i=j(this,this.__internal.options,function(e,t,i){U(n,e,t,i)},e,t);if("get"===i.op)return i.found?i.value:void 0!==this.settings?j(this,this.settings,this.settingUpdated||function(){},e,t).value:void 0;if("set"===i.op){if(i.items.length>0)for(var r=this.settingUpdated||function(){},o=0;o<i.items.length;o+=1){var a=i.items[o];a.found||void 0===this.settings||j(this,this.settings,r,a.key,a.value)}return this}},/**
             * [Alias] Sets dialog settings/options 
             */set:function(e,t){return this.setting(e,t),this},/**
             * [Alias] Gets dialog settings/options 
             */get:function(e){return this.setting(e)},/**
            * Sets dialog header
            * @content {string or element}
            *
            * @return {undefined}
            */setHeader:function(t){return"string"==typeof t?(u(this.elements.header),this.elements.header.innerHTML=t):t instanceof e.HTMLElement&&this.elements.header.firstChild!==t&&(u(this.elements.header),this.elements.header.appendChild(t)),this},/**
            * Sets dialog contents
            * @content {string or element}
            *
            * @return {undefined}
            */setContent:function(t){return"string"==typeof t?(u(this.elements.content),this.elements.content.innerHTML=t):t instanceof e.HTMLElement&&this.elements.content.firstChild!==t&&(u(this.elements.content),this.elements.content.appendChild(t)),this},/**
             * Show the dialog as modal
             *
             * @return {Object} the dialog instance.
             */showModal:function(e){return this.show(!0,e)},/**
             * Show the dialog
             *
             * @return {Object} the dialog instance.
             */show:function(e,t){if(// ensure initialization
A(this),this.__internal.isOpen){// reset move updates
ek(this),// reset resize updates
eU(this),// shake the dialog to indicate its already open
o(this.elements.dialog,N.shake);var n=this;setTimeout(function(){a(n.elements.dialog,N.shake)},200)}else{if(// add to open dialogs
this.__internal.isOpen=!0,r.push(this),w.defaults.maintainFocus&&(this.__internal.activeElement=document.activeElement),document.body.hasAttribute("tabindex")||document.body.setAttribute("tabindex",E="0"),"function"==typeof this.prepare&&this.prepare(),eV(this),void 0!==e&&this.set("modal",e),//save scroll to prevent document jump
C(),T(),"string"==typeof t&&""!==t&&(this.__internal.className=t,o(this.elements.root,t)),this.get("startMaximized")?this.maximize():this.isMaximized()&&$(this),Q(this),this.elements.root.removeAttribute("style"),a(this.elements.root,N.animationOut),o(this.elements.root,N.animationIn),// set 1s fallback in case transition event doesn't fire
clearTimeout(this.__internal.timerIn),this.__internal.timerIn=setTimeout(this.__internal.transitionInHandler,g.supported?1e3:100),M){// force desktop safari reflow
var i=this.elements.root;i.style.display="none",setTimeout(function(){i.style.display="block"},0)}//reflow
_=this.elements.root.offsetWidth,// show dialog
a(this.elements.root,N.hidden),//restore scroll to prevent document jump
k(),"function"==typeof this.hooks.onshow&&this.hooks.onshow.call(this),// allow custom `onshow` method
x("onshow",this)}return this},/**
             * Close the dialog
             *
             * @return {Object} The dialog instance
             */close:function(){return this.__internal.isOpen&&!1!==x("onclosing",this)&&(eF(this),a(this.elements.root,N.animationIn),o(this.elements.root,N.animationOut),// set 1s fallback in case transition event doesn't fire
clearTimeout(this.__internal.timerOut),this.__internal.timerOut=setTimeout(this.__internal.transitionOutHandler,g.supported?1e3:100),// hide dialog
o(this.elements.root,N.hidden),//reflow
_=this.elements.modal.offsetWidth,w.defaults.maintainFocus&&this.__internal.activeElement&&(this.__internal.activeElement.focus(),this.__internal.activeElement=null),void 0!==this.__internal.className&&""!==this.__internal.className&&a(this.elements.root,this.__internal.className),"function"==typeof this.hooks.onclose&&this.hooks.onclose.call(this),// allow custom `onclose` method
x("onclose",this),//remove from open dialogs
r.splice(r.indexOf(this),1),this.__internal.isOpen=!1,T()),r.length||"0"!==E||document.body.removeAttribute("tabindex"),this},/**
             * Close all open dialogs except this.
             *
             * @return {undefined}
             */closeOthers:function(){return w.closeAll(this),this},/**
             * Destroys this dialog instance
             *
             * @return {undefined}
             */destroy:function(){return this.__internal&&(this.__internal.isOpen?(//mark dialog for destruction, this will be called on tranistionOut event.
this.__internal.destroy=function(){d(this,A)},//close the dialog to unbind all events.
this.close()):this.__internal.destroy||d(this,A)),this}}}(),E=function(){var t,n,r=[],s=i.notifier.classes,l=s.base;/**
         * Helper: initializes the notifier instance
         *
         */function c(e){e.__internal||(e.__internal={position:w.defaults.notifier.position,delay:w.defaults.notifier.delay},n=document.createElement("DIV"),("transitionOff"in i.notifier?i.notifier.transitionOff:i.transitionOff)&&(l=s.base+" ajs-no-transition"),p(e)),n.parentNode!==document.body&&document.body.appendChild(n)}function h(e){e.__internal.pushed=!0,r.push(e)}function d(e){r.splice(r.indexOf(e),1),e.__internal.pushed=!1}/**
         * Helper: update the notifier instance position
         *
         */function p(e){switch(n.className=l,e.__internal.position){case"top-right":o(n,s.top+" "+s.right);break;case"top-left":o(n,s.top+" "+s.left);break;case"top-center":o(n,s.top+" "+s.center);break;case"bottom-left":o(n,s.bottom+" "+s.left);break;case"bottom-center":o(n,s.bottom+" "+s.center);break;default:o(n,s.bottom+" "+s.right)}}/**
        * creates a new notification message
        *
        * @param  {DOMElement} message	The notifier message element
        * @param  {Number} wait   Time (in ms) to wait before the message is dismissed, a value of 0 means keep open till clicked.
        * @param  {Function} callback A callback function to be invoked when the message is dismissed.
        *
        * @return {undefined}
        */function f(i,r){function l(e,t){t.__internal.closeButton&&"true"!==e.target.getAttribute("data-close")||t.dismiss(!0)}function c(e,t){// unbind event
y(t.element,g.type,c),// remove the message
n.removeChild(t.element)}function p(e){clearTimeout(e.__internal.timer),clearTimeout(e.__internal.transitionTimeout)}return function(e){return e.__internal||(e.__internal={pushed:!1,delay:void 0,timer:void 0,clickHandler:void 0,transitionEndHandler:void 0,transitionTimeout:void 0},e.__internal.clickHandler=v(e,l),e.__internal.transitionEndHandler=v(e,c)),e}({/* notification DOM element*/element:i,/*
                 * Pushes a notification message
                 * @param {string or DOMElement} content The notification message content
                 * @param {Number} wait The time (in seconds) to wait before the message is dismissed, a value of 0 means keep open till clicked.
                 *
                 */push:function(e,i){if(!this.__internal.pushed){var r,a;switch(h(this),p(this),arguments.length){case 0:a=this.__internal.delay;break;case 1:"number"==typeof e?a=e:(r=e,a=this.__internal.delay);break;case 2:r=e,a=i}return this.__internal.closeButton=w.defaults.notifier.closeButton,void 0!==r&&this.setContent(r),0>E.__internal.position.indexOf("top")?n.appendChild(this.element):n.insertBefore(this.element,n.firstChild),t=this.element.offsetWidth,o(this.element,s.visible),// attach click event
m(this.element,"click",this.__internal.clickHandler),this.delay(a)}return this},/*
                 * {Function} callback function to be invoked before dismissing the notification message.
                 * Remarks: A return value === 'false' will cancel the dismissal
                 *
                 */ondismiss:function(){},/*
                 * {Function} callback function to be invoked when the message is dismissed.
                 *
                 */callback:r,/*
                 * Dismisses the notification message
                 * @param {Boolean} clicked A flag indicating if the dismissal was caused by a click.
                 *
                 */dismiss:function(e){return this.__internal.pushed&&(p(this),"function"==typeof this.ondismiss&&!1===this.ondismiss.call(this)||(//detach click event
y(this.element,"click",this.__internal.clickHandler),void 0!==this.element&&this.element.parentNode===n&&(//transition end or fallback
this.__internal.transitionTimeout=setTimeout(this.__internal.transitionEndHandler,g.supported?1e3:100),a(this.element,s.visible),"function"==typeof this.callback&&this.callback.call(this,e)),d(this))),this},/*
                 * Delays the notification message dismissal
                 * @param {Number} wait The time (in seconds) to wait before the message is dismissed, a value of 0 means keep open till clicked.
                 *
                 */delay:function(e){if(p(this),this.__internal.delay=void 0===e||isNaN(+e)?E.__internal.delay:+e,this.__internal.delay>0){var t=this;this.__internal.timer=setTimeout(function(){t.dismiss()},1e3*this.__internal.delay)}return this},/*
                 * Sets the notification message contents
                 * @param {string or DOMElement} content The notification message content
                 *
                 */setContent:function(t){if("string"==typeof t?(u(this.element),this.element.innerHTML=t):t instanceof e.HTMLElement&&this.element.firstChild!==t&&(u(this.element),this.element.appendChild(t)),this.__internal.closeButton){var n=document.createElement("span");o(n,s.close),n.setAttribute("data-close",!0),this.element.appendChild(n)}return this},/*
                 * Dismisses all open notifications except this.
                 *
                 */dismissOthers:function(){return E.dismissAll(this),this}})}//notifier api
return{/**
             * Gets or Sets notifier settings.
             *
             * @param {string} key The setting name
             * @param {Variant} value The setting value.
             *
             * @return {Object}	if the called as a setter, return the notifier instance.
             */setting:function(e,t){if(//ensure init
c(this),void 0===t)return this.__internal[e];switch(e){case"position":this.__internal.position=t,p(this);break;case"delay":this.__internal.delay=t}return this},/**
             * [Alias] Sets dialog settings/options
             */set:function(e,t){return this.setting(e,t),this},/**
             * [Alias] Gets dialog settings/options
             */get:function(e){return this.setting(e)},/**
             * Creates a new notification message
             *
             * @param {string} type The type of notification message (simply a CSS class name 'ajs-{type}' to be added).
             * @param {Function} callback  A callback function to be invoked when the message is dismissed.
             *
             * @return {undefined}
             */create:function(e,t){//ensure notifier init
c(this);//create new notification message
var n=document.createElement("div");return n.className=s.message+("string"==typeof e&&""!==e?" "+s.prefix+e:""),f(n,t)},/**
             * Dismisses all open notifications.
             *
             * @param {Object} excpet [optional] The notification object to exclude from dismissal.
             *
             */dismissAll:function(e){for(var t=r.slice(0),n=0;n<t.length;n+=1){var i=t[n];(void 0===e||e!==i)&&i.dismiss()}}}}(),w=new /**
     * Alertify public API
     * This contains everything that is exposed through the alertify object.
     *
     * @return {Object}
     */function(){// holds a references of created dialogs
var e={};/**
         * Extends a given prototype by merging properties from base into sub.
         *
         * @sub {Object} sub The prototype being overwritten.
         * @base {Object} base The prototype being written.
         *
         * @return {Object} The extended prototype.
         */function t(e,t){// copy dialog pototype over definition.
for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}/**
        * Helper: returns a dialog instance from saved dialogs.
        * and initializes the dialog if its not already initialized.
        *
        * @name {String} name The dialog name.
        *
        * @return {Object} The dialog instance.
        */function n(t){var n=e[t].dialog;return n&&"function"==typeof n.__init&&n.__init(n),n}/**
         * Helper:  registers a new dialog definition.
         *
         * @name {String} name The dialog name.
         * @Factory {Function} Factory a function resposible for creating dialog prototype.
         * @transient {Boolean} transient True to create a new dialog instance each time the dialog is invoked, false otherwise.
         * @base {String} base the name of another dialog to inherit from.
         *
         * @return {Object} The dialog definition.
         */function o(n,i,r,o){var a={dialog:null,factory:i};return void 0!==o&&(a.factory=function(){return t(new e[o].factory,new i)}),r||(a.dialog=t(new a.factory,_)),e[n]=a}return{/**
             * Alertify defaults
             * 
             * @type {Object}
             */defaults:i,/**
             * Dialogs factory 
             *
             * @param {string}      Dialog name.
             * @param {Function}    A Dialog factory function.
             * @param {Boolean}     Indicates whether to create a singleton or transient dialog.
             * @param {String}      The name of the base type to inherit from.
             */dialog:function(e,i,r,a){// get request, create a new instance and return it.
if("function"!=typeof i)return n(e);if(this.hasOwnProperty(e))throw Error("alertify.dialog: name already exists");// register the dialog
var s=o(e,i,r,a);r?this[e]=function(){//if passed with no params, consider it a get request
if(0==arguments.length)return s.dialog;var e=t(new s.factory,_);return e&&"function"==typeof e.__init&&e.__init(e),e.main.apply(e,arguments),e.show.apply(e)}:this[e]=function(){//if passed with no params, consider it a get request
if(s.dialog&&"function"==typeof s.dialog.__init&&s.dialog.__init(s.dialog),0==arguments.length)return s.dialog;var e=s.dialog;return e.main.apply(s.dialog,arguments),e.show.apply(s.dialog)}},/**
             * Close all open dialogs.
             *
             * @param {Object} excpet [optional] The dialog object to exclude from closing.
             *
             * @return {undefined}
             */closeAll:function(e){for(var t=r.slice(0),n=0;n<t.length;n+=1){var i=t[n];(void 0===e||e!==i)&&i.close()}},/**
             * Gets or Sets dialog settings/options. if the dialog is transient, this call does nothing.
             *
             * @param {string} name The dialog name.
             * @param {String|Object} key A string specifying a propery name or a collection of key/value pairs.
             * @param {Variant} value Optional, the value associated with the key (in case it was a string).
             *
             * @return {undefined}
             */setting:function(e,t,i){if("notifier"===e)return E.setting(t,i);var r=n(e);if(r)return r.setting(t,i)},/**
             * [Alias] Sets dialog settings/options 
             */set:function(e,t,n){return this.setting(e,t,n)},/**
             * [Alias] Gets dialog settings/options 
             */get:function(e,t){return this.setting(e,t)},/**
             * Creates a new notification message.
             * If a type is passed, a class name "ajs-{type}" will be added.
             * This allows for custom look and feel for various types of notifications.
             *
             * @param  {String | DOMElement}    [message=undefined]		Message text
             * @param  {String}                 [type='']				Type of log message
             * @param  {String}                 [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}               [callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */notify:function(e,t,n,i){return E.create(t,i).push(e,n)},/**
             * Creates a new notification message.
             *
             * @param  {String}		[message=undefined]		Message text
             * @param  {String}     [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}	[callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */message:function(e,t,n){return E.create(null,n).push(e,t)},/**
             * Creates a new notification message of type 'success'.
             *
             * @param  {String}		[message=undefined]		Message text
             * @param  {String}     [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}	[callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */success:function(e,t,n){return E.create("success",n).push(e,t)},/**
             * Creates a new notification message of type 'error'.
             *
             * @param  {String}		[message=undefined]		Message text
             * @param  {String}     [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}	[callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */error:function(e,t,n){return E.create("error",n).push(e,t)},/**
             * Creates a new notification message of type 'warning'.
             *
             * @param  {String}		[message=undefined]		Message text
             * @param  {String}     [wait='']				Time (in seconds) to wait before auto-close
             * @param  {Function}	[callback=undefined]	A callback function to be invoked when the log is closed.
             *
             * @return {Object} Notification object.
             */warning:function(e,t,n){return E.create("warning",n).push(e,t)},/**
             * Dismisses all open notifications
             *
             * @return {undefined}
             */dismissAll:function(){E.dismissAll()}}};/**
    * Alert dialog definition
    *
    * invoked by:
    *	alertify.alert(message);
    *	alertify.alert(title, message);
    *	alertify.alert(message, onok);
    *	alertify.alert(title, message, onok);
     */w.dialog("alert",function(){return{main:function(e,t,n){var i,r,o;switch(arguments.length){case 1:r=e;break;case 2:"function"==typeof t?(r=e,o=t):(i=e,r=t);break;case 3:i=e,r=t,o=n}return this.set("title",i),this.set("message",r),this.set("onok",o),this},setup:function(){return{buttons:[{text:w.defaults.glossary.ok,key:n.ESC,invokeOnClose:!0,className:w.defaults.theme.ok}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){// nothing
},prepare:function(){//nothing
},setMessage:function(e){this.setContent(e)},settings:{message:void 0,onok:void 0,label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},callback:function(e){if("function"==typeof this.get("onok")){var t=this.get("onok").call(this,e);void 0!==t&&(e.cancel=!t)}}}}),/**
     * Confirm dialog object
     *
     *	alertify.confirm(message);
     *	alertify.confirm(message, onok);
     *	alertify.confirm(message, onok, oncancel);
     *	alertify.confirm(title, message, onok, oncancel);
     */w.dialog("confirm",function(){var e={timer:null,index:null,text:null,duration:null,task:function(n,i){if(i.isOpen()){if(i.__internal.buttons[e.index].element.innerHTML=e.text+" (&#8207;"+e.duration+"&#8207;) ",e.duration-=1,-1===e.duration){t(i);var r=i.__internal.buttons[e.index],o=b(e.index,r);"function"==typeof i.callback&&i.callback.apply(i,[o]),!1!==o.close&&i.close()}}else t(i)}};function t(t){null!==e.timer&&(clearInterval(e.timer),e.timer=null,t.__internal.buttons[e.index].element.innerHTML=e.text)}function i(n,i,r){t(n),e.duration=r,e.index=i,e.text=n.__internal.buttons[i].element.innerHTML,e.timer=setInterval(v(n,e.task),1e3),e.task(null,n)}return{main:function(e,t,n,i){var r,o,a,s;switch(arguments.length){case 1:o=e;break;case 2:o=e,a=t;break;case 3:o=e,a=t,s=n;break;case 4:r=e,o=t,a=n,s=i}return this.set("title",r),this.set("message",o),this.set("onok",a),this.set("oncancel",s),this},setup:function(){return{buttons:[{text:w.defaults.glossary.ok,key:n.ENTER,className:w.defaults.theme.ok},{text:w.defaults.glossary.cancel,key:n.ESC,invokeOnClose:!0,className:w.defaults.theme.cancel}],focus:{element:0,select:!1},options:{maximizable:!1,resizable:!1}}},build:function(){//nothing
},prepare:function(){//nothing
},setMessage:function(e){this.setContent(e)},settings:{message:null,labels:null,onok:null,oncancel:null,defaultFocus:null,reverseButtons:null},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"labels":"ok"in n&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].text=n.ok,this.__internal.buttons[0].element.innerHTML=n.ok),"cancel"in n&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].text=n.cancel,this.__internal.buttons[1].element.innerHTML=n.cancel);break;case"reverseButtons":!0===n?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element);break;case"defaultFocus":this.__internal.focus.element="ok"===n?0:1}},callback:function(e){var n;switch(t(this),e.index){case 0:"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,e))&&(e.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,e))&&(e.cancel=!n)}},autoOk:function(e){return i(this,0,e),this},autoCancel:function(e){return i(this,1,e),this}}}),/**
     * Prompt dialog object
     *
     * invoked by:
     *	alertify.prompt(message);
     *	alertify.prompt(message, value);
     *	alertify.prompt(message, value, onok);
     *	alertify.prompt(message, value, onok, oncancel);
     *	alertify.prompt(title, message, value, onok, oncancel);
     */w.dialog("prompt",function(){var t=document.createElement("INPUT"),i=document.createElement("P");return{main:function(e,t,n,i,r){var o,a,s,l,c;switch(arguments.length){case 1:a=e;break;case 2:a=e,s=t;break;case 3:a=e,s=t,l=n;break;case 4:a=e,s=t,l=n,c=i;break;case 5:o=e,a=t,s=n,l=i,c=r}return this.set("title",o),this.set("message",a),this.set("value",s),this.set("onok",l),this.set("oncancel",c),this},setup:function(){return{buttons:[{text:w.defaults.glossary.ok,key:n.ENTER,className:w.defaults.theme.ok},{text:w.defaults.glossary.cancel,key:n.ESC,invokeOnClose:!0,className:w.defaults.theme.cancel}],focus:{element:t,select:!0},options:{maximizable:!1,resizable:!1}}},build:function(){t.className=w.defaults.theme.input,t.setAttribute("type","text"),t.value=this.get("value"),this.elements.content.appendChild(i),this.elements.content.appendChild(t)},prepare:function(){//nothing
},setMessage:function(t){"string"==typeof t?(u(i),i.innerHTML=t):t instanceof e.HTMLElement&&i.firstChild!==t&&(u(i),i.appendChild(t))},settings:{message:void 0,labels:void 0,onok:void 0,oncancel:void 0,value:"",type:"text",reverseButtons:void 0},settingUpdated:function(e,n,i){switch(e){case"message":this.setMessage(i);break;case"value":t.value=i;break;case"type":switch(i){case"text":case"color":case"date":case"datetime-local":case"email":case"month":case"number":case"password":case"search":case"tel":case"time":case"week":t.type=i;break;default:t.type="text"}break;case"labels":i.ok&&this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=i.ok),i.cancel&&this.__internal.buttons[1].element&&(this.__internal.buttons[1].element.innerHTML=i.cancel);break;case"reverseButtons":!0===i?this.elements.buttons.primary.appendChild(this.__internal.buttons[0].element):this.elements.buttons.primary.appendChild(this.__internal.buttons[1].element)}},callback:function(e){var n;switch(e.index){case 0:this.settings.value=t.value,"function"==typeof this.get("onok")&&void 0!==(n=this.get("onok").call(this,e,this.settings.value))&&(e.cancel=!n);break;case 1:"function"==typeof this.get("oncancel")&&void 0!==(n=this.get("oncancel").call(this,e))&&(e.cancel=!n),e.cancel||(t.value=this.settings.value)}}}}),"object"==typeof $3895aa91744b6895$exports?$3895aa91744b6895$exports=w:"function"==typeof define&&define.amd?define([],function(){return w}):e.alertify||(e.alertify=w)}("undefined"!=typeof window?window:$3895aa91744b6895$exports);const $ef84d931ff2e086e$export$b131c49b26d3f427=e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".status",{class:e.connected?"connected":"disconnected",title:e.connected?"connected":"disconnected"},""),$ef84d931ff2e086e$export$f4a3eee8e2b83eb0=e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("p.turn",{class:e.chess.turn(),title:"w"==e.chess.turn()?"white's turn":"black's turn"},e.chess.turn()),$ef84d931ff2e086e$export$d9c8f749b6c1c3da=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:"flip board",onclick:e=>{t.flipBoard()}},"wifi_protected_setup"),$ef84d931ff2e086e$export$1c2b660b9d689dfc=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:e.influence?"hide influence":"show influence",onclick:e=>{t.toggleInfluence()}},"compare_arrows"),$ef84d931ff2e086e$export$2bbe6b4c555f9803=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:"takeback",onclick:e=>{t.takeback()}},"arrow_left"),$ef84d931ff2e086e$export$a083a1058128fafe=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:"does nothing",onclick:e=>{}},"arrow_right"),$ef84d931ff2e086e$export$324fa128a6a8d5eb=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:e.grid?"hide grid":"show grid",onclick:n=>{e.grid=!e.grid,t.lightBoard()}},e.grid?"grid_off":"grid_on"),$ef84d931ff2e086e$export$72b8a1821a6af290=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:e.pieces?"hide pieces":"show pieces",onclick:e=>t.togglePieces()},/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("img.svgicon",{src:"static/Chess_tile_ql.svg"})),$ef84d931ff2e086e$export$46e774049323b8a5=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:"increace history",onclick:t.incrementHistory},"history"),$ef84d931ff2e086e$export$99e4fe05899c2070=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:"decreace history",onclick:e=>{t.decrementHistory()}},"history_toggle_off"),$ef84d931ff2e086e$export$390d11d353c16e49=(e,t)=>[$ef84d931ff2e086e$export$46e774049323b8a5(e,t),$ef84d931ff2e086e$export$99e4fe05899c2070(e,t),$ef84d931ff2e086e$export$2bbe6b4c555f9803(e,t),$ef84d931ff2e086e$export$a083a1058128fafe(e,t),$ef84d931ff2e086e$export$d9c8f749b6c1c3da(e,t),$ef84d931ff2e086e$export$324fa128a6a8d5eb(e,t),$ef84d931ff2e086e$export$72b8a1821a6af290(e,t),$ef84d931ff2e086e$export$1c2b660b9d689dfc(e,t),$ef84d931ff2e086e$export$f4a3eee8e2b83eb0(e)],$ef84d931ff2e086e$export$4c260019440d418f=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("span.toolbar",{},[// StatusIcon(state),
    // ConnectToggle(state, actions),
    ...$ef84d931ff2e086e$export$390d11d353c16e49(e,t)]),$ef84d931ff2e086e$export$69d4e78a69e95731=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".toolbar",{},[...$ef84d931ff2e086e$export$390d11d353c16e49(e,t)]);/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** *//* global Reflect, Promise, SuppressedError, Symbol */var $17f1b9f8ce16014e$var$extendStatics=function(e,t){return($17f1b9f8ce16014e$var$extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},$17f1b9f8ce16014e$export$18ce0697a983be9b=function(){return($17f1b9f8ce16014e$export$18ce0697a983be9b=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function $17f1b9f8ce16014e$export$3c9a16f847548506(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}"function"==typeof SuppressedError&&SuppressedError;var $e4aeb149e284da0d$export$4dbe3495bda74f11={ACTIVE:"cui-active",DISABLED:"cui-disabled",LOADING:"cui-loading",BASIC:"cui-basic",OUTLINED:"cui-outlined",ROUNDED:"cui-rounded",// Utility
ALIGN:"cui-align",FLUID:"cui-fluid",COMPACT:"cui-compact",BUTTON:"cui-button",BUTTON_LABEL:"cui-button-label",BUTTON_SUBLABEL:"cui-button-sublabel",BUTTON_ICON:"cui-button-icon",CONTROL:"cui-control",CONTROL_INDICATOR:"cui-control-indicator",ICON:"cui-icon",ICON_ACTION:"cui-icon-action",SPINNER:"cui-spinner",SPINNER_CONTENT:"cui-spinner-content",SPINNER_ICON:"cui-spinner-icon",SPINNER_MESSAGE:"cui-spinner-message",SPINNER_FILL:"cui-spinner-fill",SPINNER_ACTIVE:"cui-spinner-active",SPINNER_BG:"cui-spinner-bg",SWITCH:"cui-switch"},$fcc1f848a67e05c0$exports={};!/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*//* global define */function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var r=arguments[i];if(r){var o=typeof r;if("string"===o||"number"===o)n.push(r);else if(Array.isArray(r)){if(r.length){var a=t.apply(null,r);a&&n.push(a)}}else if("object"===o){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){n.push(r.toString());continue}for(var s in r)e.call(r,s)&&r[s]&&n.push(s)}}}return n.join(" ")}$fcc1f848a67e05c0$exports?(t.default=t,$fcc1f848a67e05c0$exports=t):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return t}):window.classNames=t}();var $efcb3a78c45dc171$export$ef524c8d8e02fd08=/** @class */function(){function e(){}return e.prototype.view=function(e){var t=e.attrs,n=t.class,i=t.containerAttrs,r=void 0===i?{}:i,o=t.intent,a=t.label,s=t.size,l=t.type,c=t.typeClass,u=t.style,h=$17f1b9f8ce16014e$export$3c9a16f847548506(t,["class","containerAttrs","intent","label","size","type","typeClass","style"]),d=/*@__PURE__*/$parcel$interopDefault($fcc1f848a67e05c0$exports)($e4aeb149e284da0d$export$4dbe3495bda74f11.CONTROL,c,h.disabled&&$e4aeb149e284da0d$export$4dbe3495bda74f11.DISABLED,o&&"cui-".concat(o),s&&"cui-".concat(s),n),p=[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("input",$17f1b9f8ce16014e$export$18ce0697a983be9b($17f1b9f8ce16014e$export$18ce0697a983be9b({},h),{disabled:h.disabled||h.readonly,type:l})),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("span.".concat($e4aeb149e284da0d$export$4dbe3495bda74f11.CONTROL_INDICATOR)),a];return /*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("label",$17f1b9f8ce16014e$export$18ce0697a983be9b({class:d,style:u},r),p)},e}(),$1c56324fc02e153f$export$b5d5cf8927ab7262=/** @class */function(){function e(){}return e.prototype.view=function(e){var t=e.attrs;return /*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($efcb3a78c45dc171$export$ef524c8d8e02fd08,$17f1b9f8ce16014e$export$18ce0697a983be9b($17f1b9f8ce16014e$export$18ce0697a983be9b({},t),{type:"checkbox",typeClass:$e4aeb149e284da0d$export$4dbe3495bda74f11.SWITCH}))},e}(),$09c7c301f2267c48$exports={};$09c7c301f2267c48$exports=new URL("logo.4474c526.svg",import.meta.url).toString();const $3f934752a4447ac8$export$a6c7ac8248d6e38a=()=>({view:e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".menu-item",[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.Link,e.attrs,e.children)])}),$3f934752a4447ac8$export$b2e089eb3692b073=e=>[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($3f934752a4447ac8$export$a6c7ac8248d6e38a,{href:"/connect",id:"connectButton"},$ef84d931ff2e086e$export$b131c49b26d3f427(e)),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($3f934752a4447ac8$export$a6c7ac8248d6e38a,{href:"/otb",id:"otbButton"},"Local"),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($3f934752a4447ac8$export$a6c7ac8248d6e38a,{href:"/games",id:"gamesButton"},"Online"),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($1c56324fc02e153f$export$b5d5cf8927ab7262,{checked:e.theme,onclick:t=>{console.log("switched",t),e.theme?(document.body.className=document.body.className.replace("dark",""),e.theme=null):(e.theme="dark",document.body.className+=e.theme)}}),// ,
    e.user.username?/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($3f934752a4447ac8$export$a6c7ac8248d6e38a,{href:"/profile"},e.user.username):/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($3f934752a4447ac8$export$a6c7ac8248d6e38a,{href:"/login",id:"loginButton"},"Login")],$3f934752a4447ac8$export$d9b273488cd8ce6f=e=>[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($3f934752a4447ac8$export$a6c7ac8248d6e38a,{href:"/"},/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("img.logo#logo",{src:"logo.svg"})),$3f934752a4447ac8$export$b2e089eb3692b073(e)],$3f934752a4447ac8$export$c84671f46d6a1ca=e=>({view:t=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("main.layout",{},[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("nav.menu",{},$3f934752a4447ac8$export$d9b273488cd8ce6f(e)),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("section#main",t.attrs)])}),$6eb582f9081eb7e5$export$29814851e0aa981f="w",$6eb582f9081eb7e5$export$7a91b0fde7ec420f="b",$6eb582f9081eb7e5$export$4c32fd1f222ff2b0="p",$6eb582f9081eb7e5$export$ce32bc8c2a29bae6="n",$6eb582f9081eb7e5$export$54a167f801c5dba3="b",$6eb582f9081eb7e5$export$68d4c913908dc245="r",$6eb582f9081eb7e5$export$36a8946792f13ec9="q",$6eb582f9081eb7e5$export$42387107bb0d6206="k",$6eb582f9081eb7e5$export$1264a6620073cfaa="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",$6eb582f9081eb7e5$var$EMPTY=-1,$6eb582f9081eb7e5$var$FLAGS={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},$6eb582f9081eb7e5$var$BITS={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},$6eb582f9081eb7e5$var$Ox88={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},$6eb582f9081eb7e5$var$PAWN_OFFSETS={b:[16,32,17,15],w:[-16,-32,-17,-15]},$6eb582f9081eb7e5$var$PIECE_OFFSETS={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},$6eb582f9081eb7e5$var$ATTACKS=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],$6eb582f9081eb7e5$var$RAYS=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],$6eb582f9081eb7e5$var$PIECE_MASKS={p:1,n:2,b:4,r:8,q:16,k:32},$6eb582f9081eb7e5$var$SYMBOLS="pnbrqkPNBRQK",$6eb582f9081eb7e5$var$PROMOTIONS=[$6eb582f9081eb7e5$export$ce32bc8c2a29bae6,$6eb582f9081eb7e5$export$54a167f801c5dba3,$6eb582f9081eb7e5$export$68d4c913908dc245,$6eb582f9081eb7e5$export$36a8946792f13ec9],$6eb582f9081eb7e5$var$RANK_1=7,$6eb582f9081eb7e5$var$RANK_2=6,$6eb582f9081eb7e5$var$RANK_7=1,$6eb582f9081eb7e5$var$RANK_8=0,$6eb582f9081eb7e5$var$SIDES={[$6eb582f9081eb7e5$export$42387107bb0d6206]:$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE,[$6eb582f9081eb7e5$export$36a8946792f13ec9]:$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE},$6eb582f9081eb7e5$var$ROOKS={w:[{square:$6eb582f9081eb7e5$var$Ox88.a1,flag:$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE},{square:$6eb582f9081eb7e5$var$Ox88.h1,flag:$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE}],b:[{square:$6eb582f9081eb7e5$var$Ox88.a8,flag:$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE},{square:$6eb582f9081eb7e5$var$Ox88.h8,flag:$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE}]},$6eb582f9081eb7e5$var$SECOND_RANK={b:$6eb582f9081eb7e5$var$RANK_7,w:$6eb582f9081eb7e5$var$RANK_2},$6eb582f9081eb7e5$var$TERMINATION_MARKERS=["1-0","0-1","1/2-1/2","*"];// Extracts the zero-based rank of an 0x88 square.
function $6eb582f9081eb7e5$var$rank(e){return e>>4}// Extracts the zero-based file of an 0x88 square.
function $6eb582f9081eb7e5$var$file(e){return 15&e}function $6eb582f9081eb7e5$var$isDigit(e){return -1!=="0123456789".indexOf(e)}// Converts a 0x88 square to algebraic notation.
function $6eb582f9081eb7e5$var$algebraic(e){let t=$6eb582f9081eb7e5$var$file(e),n=$6eb582f9081eb7e5$var$rank(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function $6eb582f9081eb7e5$var$swapColor(e){return e===$6eb582f9081eb7e5$export$29814851e0aa981f?$6eb582f9081eb7e5$export$7a91b0fde7ec420f:$6eb582f9081eb7e5$export$29814851e0aa981f}function $6eb582f9081eb7e5$export$d9e02ca3a6185312(e){// 1st criterion: 6 space-seperated fields?
let t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};// 2nd criterion: move number field is a integer value > 0?
let n=parseInt(t[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};// 3rd criterion: half move counter is an integer >= 0?
let i=parseInt(t[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};// 4th criterion: 4th field is a valid e.p.-string?
if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};// 5th criterion: 3th field is a valid castle-string?
if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};// 6th criterion: 2nd field is "w" (white) or "b" (black)?
if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};// 7th criterion: 1st field contains 8 rows?
let r=t[0].split("/");if(8!==r.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};// 8th criterion: every row is valid?
for(let e=0;e<r.length;e++){// check for right sum of fields AND not two numbers in succession
let t=0,n=!1;for(let i=0;i<r[e].length;i++)if($6eb582f9081eb7e5$var$isDigit(r[e][i])){if(n)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(r[e][i],10),n=!0}else{if(!/^[prnbqkPRNBQK]$/.test(r[e][i]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,n=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};let o=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(let{color:e,regex:n}of o){if(!n.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(n)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return{ok:!0}}// this function is used to uniquely identify ambiguous moves
function $6eb582f9081eb7e5$var$getDisambiguator(e,t){let n=e.from,i=e.to,r=e.piece,o=0,a=0,s=0;for(let e=0,l=t.length;e<l;e++){let l=t[e].from,c=t[e].to,u=t[e].piece;r===u&&n!==l&&i===c&&(o++,$6eb582f9081eb7e5$var$rank(n)===$6eb582f9081eb7e5$var$rank(l)&&a++,$6eb582f9081eb7e5$var$file(n)===$6eb582f9081eb7e5$var$file(l)&&s++)}return o>0?a>0&&s>0?$6eb582f9081eb7e5$var$algebraic(n):s>0?$6eb582f9081eb7e5$var$algebraic(n).charAt(1):$6eb582f9081eb7e5$var$algebraic(n).charAt(0):""}function $6eb582f9081eb7e5$var$addMove(e,t,n,i,r,o,a=$6eb582f9081eb7e5$var$BITS.NORMAL){let s=$6eb582f9081eb7e5$var$rank(i);if(r===$6eb582f9081eb7e5$export$4c32fd1f222ff2b0&&(s===$6eb582f9081eb7e5$var$RANK_1||s===$6eb582f9081eb7e5$var$RANK_8))for(let s=0;s<$6eb582f9081eb7e5$var$PROMOTIONS.length;s++){let l=$6eb582f9081eb7e5$var$PROMOTIONS[s];e.push({color:t,from:n,to:i,piece:r,captured:o,promotion:l,flags:a|$6eb582f9081eb7e5$var$BITS.PROMOTION})}else e.push({color:t,from:n,to:i,piece:r,captured:o,flags:a})}function $6eb582f9081eb7e5$var$inferPieceType(e){let t=e.charAt(0);if(t>="a"&&t<="h"){let t=e.match(/[a-h]\d.*[a-h]\d/);if(t)return;return $6eb582f9081eb7e5$export$4c32fd1f222ff2b0}return"o"===(t=t.toLowerCase())?$6eb582f9081eb7e5$export$42387107bb0d6206:t}// parses all of the decorators out of a SAN string
function $6eb582f9081eb7e5$var$strippedSan(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class $6eb582f9081eb7e5$export$a4d6ea685c300d39{_board=Array(128);_turn=$6eb582f9081eb7e5$export$29814851e0aa981f;_header={};_kings={w:$6eb582f9081eb7e5$var$EMPTY,b:$6eb582f9081eb7e5$var$EMPTY};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};constructor(e=$6eb582f9081eb7e5$export$1264a6620073cfaa){this.load(e)}clear(e=!1){this._board=Array(128),this._kings={w:$6eb582f9081eb7e5$var$EMPTY,b:$6eb582f9081eb7e5$var$EMPTY},this._turn=$6eb582f9081eb7e5$export$29814851e0aa981f,this._castling={w:0,b:0},this._epSquare=$6eb582f9081eb7e5$var$EMPTY,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}removeHeader(e){e in this._header&&delete this._header[e]}load(e,t=!1){let n=e.split(/\s+/);// append commonly omitted fen tokens
if(n.length>=2&&n.length<6){let t=["-","-","0","1"];e=n.concat(t.slice(-(6-n.length))).join(" ")}n=e.split(/\s+/);let{ok:i,error:r}=$6eb582f9081eb7e5$export$d9e02ca3a6185312(e);if(!i)throw Error(r);let o=n[0],a=0;this.clear(t);for(let e=0;e<o.length;e++){let t=o.charAt(e);if("/"===t)a+=8;else if($6eb582f9081eb7e5$var$isDigit(t))a+=parseInt(t,10);else{let e=t<"a"?$6eb582f9081eb7e5$export$29814851e0aa981f:$6eb582f9081eb7e5$export$7a91b0fde7ec420f;this.put({type:t.toLowerCase(),color:e},$6eb582f9081eb7e5$var$algebraic(a)),a++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE),this._epSquare="-"===n[3]?$6eb582f9081eb7e5$var$EMPTY:$6eb582f9081eb7e5$var$Ox88[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._updateSetup(this.fen())}fen(){let e=0,t="";for(let n=$6eb582f9081eb7e5$var$Ox88.a8;n<=$6eb582f9081eb7e5$var$Ox88.h1;n++){if(this._board[n]){e>0&&(t+=e,e=0);let{color:i,type:r}=this._board[n];t+=i===$6eb582f9081eb7e5$export$29814851e0aa981f?r.toUpperCase():r.toLowerCase()}else e++;n+1&136&&(e>0&&(t+=e),n!==$6eb582f9081eb7e5$var$Ox88.h1&&(t+="/"),e=0,n+=8)}let n="";this._castling[$6eb582f9081eb7e5$export$29814851e0aa981f]&$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE&&(n+="K"),this._castling[$6eb582f9081eb7e5$export$29814851e0aa981f]&$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE&&(n+="Q"),this._castling[$6eb582f9081eb7e5$export$7a91b0fde7ec420f]&$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE&&(n+="k"),this._castling[$6eb582f9081eb7e5$export$7a91b0fde7ec420f]&$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE&&(n+="q"),// do we have an empty castling flag?
n=n||"-";let i="-";/*
         * only print the ep square if en passant is a valid move (pawn is present
         * and ep capture is not pinned)
         */if(this._epSquare!==$6eb582f9081eb7e5$var$EMPTY){let e=this._epSquare+(this._turn===$6eb582f9081eb7e5$export$29814851e0aa981f?16:-16),t=[e+1,e-1];for(let e of t){// is the square off the board?
if(136&e)continue;let t=this._turn;// is there a pawn that can capture the epSquare?
if(this._board[e]?.color===t&&this._board[e]?.type===$6eb582f9081eb7e5$export$4c32fd1f222ff2b0){// if the pawn makes an ep capture, does it leave it's king in check?
this._makeMove({color:t,from:e,to:this._epSquare,piece:$6eb582f9081eb7e5$export$4c32fd1f222ff2b0,captured:$6eb582f9081eb7e5$export$4c32fd1f222ff2b0,flags:$6eb582f9081eb7e5$var$BITS.EP_CAPTURE});let n=!this._isKingAttacked(t);// if ep is legal, break and set the ep square in the FEN output
if(this._undoMove(),n){i=$6eb582f9081eb7e5$var$algebraic(this._epSquare);break}}}}return[t,this._turn,n,i,this._halfMoves,this._moveNumber].join(" ")}/*
     * Called when the initial board setup is changed with put() or remove().
     * modifies the SetUp and FEN properties of the header object. If the FEN
     * is equal to the default position, the SetUp and FEN are deleted the setup
     * is only updated if history.length is zero, ie moves haven't been made.
     */_updateSetup(e){this._history.length>0||(e!==$6eb582f9081eb7e5$export$1264a6620073cfaa?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load($6eb582f9081eb7e5$export$1264a6620073cfaa)}get(e){return this._board[$6eb582f9081eb7e5$var$Ox88[e]]||!1}put({type:e,color:t},n){// check for piece
if(-1===$6eb582f9081eb7e5$var$SYMBOLS.indexOf(e.toLowerCase())||!(n in $6eb582f9081eb7e5$var$Ox88))return!1;let i=$6eb582f9081eb7e5$var$Ox88[n];return(// don't let the user place more than one king
(e!=$6eb582f9081eb7e5$export$42387107bb0d6206||this._kings[t]==$6eb582f9081eb7e5$var$EMPTY||this._kings[t]==i)&&(this._board[i]={type:e,color:t},e===$6eb582f9081eb7e5$export$42387107bb0d6206&&(this._kings[t]=i),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0))}remove(e){let t=this.get(e);return delete this._board[$6eb582f9081eb7e5$var$Ox88[e]],t&&t.type===$6eb582f9081eb7e5$export$42387107bb0d6206&&(this._kings[t.color]=$6eb582f9081eb7e5$var$EMPTY),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){let e=this._board[$6eb582f9081eb7e5$var$Ox88.e1]?.type===$6eb582f9081eb7e5$export$42387107bb0d6206&&this._board[$6eb582f9081eb7e5$var$Ox88.e1]?.color===$6eb582f9081eb7e5$export$29814851e0aa981f,t=this._board[$6eb582f9081eb7e5$var$Ox88.e8]?.type===$6eb582f9081eb7e5$export$42387107bb0d6206&&this._board[$6eb582f9081eb7e5$var$Ox88.e8]?.color===$6eb582f9081eb7e5$export$7a91b0fde7ec420f;e&&this._board[$6eb582f9081eb7e5$var$Ox88.a1]?.type===$6eb582f9081eb7e5$export$68d4c913908dc245&&this._board[$6eb582f9081eb7e5$var$Ox88.a1]?.color===$6eb582f9081eb7e5$export$29814851e0aa981f||(this._castling.w&=~$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE),e&&this._board[$6eb582f9081eb7e5$var$Ox88.h1]?.type===$6eb582f9081eb7e5$export$68d4c913908dc245&&this._board[$6eb582f9081eb7e5$var$Ox88.h1]?.color===$6eb582f9081eb7e5$export$29814851e0aa981f||(this._castling.w&=~$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE),t&&this._board[$6eb582f9081eb7e5$var$Ox88.a8]?.type===$6eb582f9081eb7e5$export$68d4c913908dc245&&this._board[$6eb582f9081eb7e5$var$Ox88.a8]?.color===$6eb582f9081eb7e5$export$7a91b0fde7ec420f||(this._castling.b&=~$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE),t&&this._board[$6eb582f9081eb7e5$var$Ox88.h8]?.type===$6eb582f9081eb7e5$export$68d4c913908dc245&&this._board[$6eb582f9081eb7e5$var$Ox88.h8]?.color===$6eb582f9081eb7e5$export$7a91b0fde7ec420f||(this._castling.b&=~$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE)}_updateEnPassantSquare(){if(this._epSquare===$6eb582f9081eb7e5$var$EMPTY)return;let e=this._epSquare+(this._turn===$6eb582f9081eb7e5$export$29814851e0aa981f?-16:16),t=this._epSquare+(this._turn===$6eb582f9081eb7e5$export$29814851e0aa981f?16:-16),n=[t+1,t-1];if(null!==this._board[e]||null!==this._board[this._epSquare]||this._board[t]?.color!==$6eb582f9081eb7e5$var$swapColor(this._turn)||this._board[t]?.type!==$6eb582f9081eb7e5$export$4c32fd1f222ff2b0){this._epSquare=$6eb582f9081eb7e5$var$EMPTY;return}let i=e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type===$6eb582f9081eb7e5$export$4c32fd1f222ff2b0;n.some(i)||(this._epSquare=$6eb582f9081eb7e5$var$EMPTY)}_attacked(e,t){for(let n=$6eb582f9081eb7e5$var$Ox88.a8;n<=$6eb582f9081eb7e5$var$Ox88.h1;n++){// did we run off the end of the board
if(136&n){n+=7;continue}// if empty square or wrong color
if(void 0===this._board[n]||this._board[n].color!==e)continue;let i=this._board[n],r=n-t;// skip - to/from square are the same
if(0===r)continue;let o=r+119;if($6eb582f9081eb7e5$var$ATTACKS[o]&$6eb582f9081eb7e5$var$PIECE_MASKS[i.type]){if(i.type===$6eb582f9081eb7e5$export$4c32fd1f222ff2b0){if(r>0){if(i.color===$6eb582f9081eb7e5$export$29814851e0aa981f)return!0}else if(i.color===$6eb582f9081eb7e5$export$7a91b0fde7ec420f)return!0;continue}// if the piece is a knight or a king
if("n"===i.type||"k"===i.type)return!0;let e=$6eb582f9081eb7e5$var$RAYS[o],a=n+e,s=!1;for(;a!==t;){if(null!=this._board[a]){s=!0;break}a+=e}if(!s)return!0}}return!1}_isKingAttacked(e){let t=this._kings[e];return -1!==t&&this._attacked($6eb582f9081eb7e5$var$swapColor(e),t)}isAttacked(e,t){return this._attacked(t,$6eb582f9081eb7e5$var$Ox88[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){/*
         * k.b. vs k.b. (of opposite colors) with mate in 1:
         * 8/8/8/8/1b6/8/B1k5/K7 b - - 0 1
         *
         * k.b. vs k.n. with mate in 1:
         * 8/8/8/8/1n6/8/B7/K1k5 b - - 2 1
         */let e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],n=0,i=0;for(let r=$6eb582f9081eb7e5$var$Ox88.a8;r<=$6eb582f9081eb7e5$var$Ox88.h1;r++){if(i=(i+1)%2,136&r){r+=7;continue}let o=this._board[r];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===$6eb582f9081eb7e5$export$54a167f801c5dba3&&t.push(i),n++)}// k vs. k
if(2===n||3===n&&(1===e[$6eb582f9081eb7e5$export$54a167f801c5dba3]||1===e[$6eb582f9081eb7e5$export$ce32bc8c2a29bae6]))return!0;if(n===e[$6eb582f9081eb7e5$export$54a167f801c5dba3]+2){// kb vs. kb where any number of bishops are all on the same color
let e=0,n=t.length;for(let i=0;i<n;i++)e+=t[i];if(0===e||e===n)return!0}return!1}isThreefoldRepetition(){let e=[],t={},n=!1;for(;;){let t=this._undoMove();if(!t)break;e.push(t)}for(;;){/*
             * remove the last two fields in the FEN string, they're not needed when
             * checking for draw by rep
             */let i=this.fen().split(" ").slice(0,4).join(" ");// has the position occurred three or move times
t[i]=i in t?t[i]+1:1,t[i]>=3&&(n=!0);let r=e.pop();if(r)this._makeMove(r);else break}return n}isDraw(){return this._halfMoves>=100||// 50 moves per side = 100 half moves
this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:n}={}){let i=this._moves({square:t,piece:n});return e?i.map(e=>this._makePretty(e)):i.map(e=>this._moveToSan(e,i))}_moves({legal:e=!0,piece:t,square:n}={}){let i=n?n.toLowerCase():void 0,r=t?.toLowerCase(),o=[],a=this._turn,s=$6eb582f9081eb7e5$var$swapColor(a),l=$6eb582f9081eb7e5$var$Ox88.a8,c=$6eb582f9081eb7e5$var$Ox88.h1,u=!1;// are we generating moves for a single square?
if(i){// illegal square, return empty moves
if(!(i in $6eb582f9081eb7e5$var$Ox88))return[];l=c=$6eb582f9081eb7e5$var$Ox88[i],u=!0}for(let e=l;e<=c;e++){let t;// did we run off the end of the board
if(136&e){e+=7;continue}// empty square or opponent, skip
if(!this._board[e]||this._board[e].color===s)continue;let{type:n}=this._board[e];if(n===$6eb582f9081eb7e5$export$4c32fd1f222ff2b0){if(r&&r!==n)continue;// single square, non-capturing
t=e+$6eb582f9081eb7e5$var$PAWN_OFFSETS[a][0],this._board[t]||($6eb582f9081eb7e5$var$addMove(o,a,e,t,$6eb582f9081eb7e5$export$4c32fd1f222ff2b0),// double square
t=e+$6eb582f9081eb7e5$var$PAWN_OFFSETS[a][1],$6eb582f9081eb7e5$var$SECOND_RANK[a]!==$6eb582f9081eb7e5$var$rank(e)||this._board[t]||$6eb582f9081eb7e5$var$addMove(o,a,e,t,$6eb582f9081eb7e5$export$4c32fd1f222ff2b0,void 0,$6eb582f9081eb7e5$var$BITS.BIG_PAWN));// pawn captures
for(let n=2;n<4;n++)136&(t=e+$6eb582f9081eb7e5$var$PAWN_OFFSETS[a][n])||(this._board[t]?.color===s?$6eb582f9081eb7e5$var$addMove(o,a,e,t,$6eb582f9081eb7e5$export$4c32fd1f222ff2b0,this._board[t].type,$6eb582f9081eb7e5$var$BITS.CAPTURE):t===this._epSquare&&$6eb582f9081eb7e5$var$addMove(o,a,e,t,$6eb582f9081eb7e5$export$4c32fd1f222ff2b0,$6eb582f9081eb7e5$export$4c32fd1f222ff2b0,$6eb582f9081eb7e5$var$BITS.EP_CAPTURE))}else{if(r&&r!==n)continue;for(let i=0,r=$6eb582f9081eb7e5$var$PIECE_OFFSETS[n].length;i<r;i++){let r=$6eb582f9081eb7e5$var$PIECE_OFFSETS[n][i];for(t=e;!(136&(t+=r));){if(this._board[t]){// own color, stop loop
if(this._board[t].color===a)break;$6eb582f9081eb7e5$var$addMove(o,a,e,t,n,this._board[t].type,$6eb582f9081eb7e5$var$BITS.CAPTURE);break}/* break, if knight or king */if($6eb582f9081eb7e5$var$addMove(o,a,e,t,n),n===$6eb582f9081eb7e5$export$ce32bc8c2a29bae6||n===$6eb582f9081eb7e5$export$42387107bb0d6206)break}}}}/*
         * check for castling if we're:
         *   a) generating all moves, or
         *   b) doing single square move generation on the king's square
         */if((void 0===r||r===$6eb582f9081eb7e5$export$42387107bb0d6206)&&(!u||c===this._kings[a])){// king-side castling
if(this._castling[a]&$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE){let e=this._kings[a],t=e+2;this._board[e+1]||this._board[t]||this._attacked(s,this._kings[a])||this._attacked(s,e+1)||this._attacked(s,t)||$6eb582f9081eb7e5$var$addMove(o,a,this._kings[a],t,$6eb582f9081eb7e5$export$42387107bb0d6206,void 0,$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE)}// queen-side castling
if(this._castling[a]&$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE){let e=this._kings[a],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(s,this._kings[a])||this._attacked(s,e-1)||this._attacked(s,t)||$6eb582f9081eb7e5$var$addMove(o,a,this._kings[a],t,$6eb582f9081eb7e5$export$42387107bb0d6206,void 0,$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE)}}/*
         * return all pseudo-legal moves (this includes moves that allow the king
         * to be captured)
         */if(!e||-1===this._kings[a])return o;// filter out illegal moves
let h=[];for(let e=0,t=o.length;e<t;e++)this._makeMove(o[e]),this._isKingAttacked(a)||h.push(o[e]),this._undoMove();return h}move(e,{strict:t=!1}={}){/*
         * The move function can be called with in the following parameters:
         *
         * .move('Nxb7')       <- argument is a case-sensitive SAN string
         *
         * .move({ from: 'h7', <- argument is a move object
         *         to :'h8',
         *         promotion: 'q' })
         *
         *
         * An optional strict argument may be supplied to tell chess.js to
         * strictly follow the SAN specification.
         */let n=null;if("string"==typeof e)n=this._moveFromSan(e,t);else if("object"==typeof e){let t=this._moves();// convert the pretty move object to an ugly move object
for(let i=0,r=t.length;i<r;i++)if(e.from===$6eb582f9081eb7e5$var$algebraic(t[i].from)&&e.to===$6eb582f9081eb7e5$var$algebraic(t[i].to)&&(!("promotion"in t[i])||e.promotion===t[i].promotion)){n=t[i];break}}// failed to find move
if(!n){if("string"==typeof e)throw Error(`Invalid move: ${e}`);throw Error(`Invalid move: ${JSON.stringify(e)}`)}/*
         * need to make a copy of move because we can't generate SAN after the move
         * is made
         */let i=this._makePretty(n);return this._makeMove(n),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){let t=this._turn,n=$6eb582f9081eb7e5$var$swapColor(t);// if we moved the king
if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&$6eb582f9081eb7e5$var$BITS.EP_CAPTURE&&(this._turn===$6eb582f9081eb7e5$export$7a91b0fde7ec420f?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===$6eb582f9081eb7e5$export$42387107bb0d6206){// if we castled, move the rook next to the king
if(this._kings[t]=e.to,e.flags&$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE){let t=e.to-1,n=e.to+1;this._board[t]=this._board[n],delete this._board[n]}else if(e.flags&$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE){let t=e.to+1,n=e.to-2;this._board[t]=this._board[n],delete this._board[n]}// turn off castling
this._castling[t]=0}// turn off castling if we move a rook
if(this._castling[t]){for(let n=0,i=$6eb582f9081eb7e5$var$ROOKS[t].length;n<i;n++)if(e.from===$6eb582f9081eb7e5$var$ROOKS[t][n].square&&this._castling[t]&$6eb582f9081eb7e5$var$ROOKS[t][n].flag){this._castling[t]^=$6eb582f9081eb7e5$var$ROOKS[t][n].flag;break}}// turn off castling if we capture a rook
if(this._castling[n]){for(let t=0,i=$6eb582f9081eb7e5$var$ROOKS[n].length;t<i;t++)if(e.to===$6eb582f9081eb7e5$var$ROOKS[n][t].square&&this._castling[n]&$6eb582f9081eb7e5$var$ROOKS[n][t].flag){this._castling[n]^=$6eb582f9081eb7e5$var$ROOKS[n][t].flag;break}}e.flags&$6eb582f9081eb7e5$var$BITS.BIG_PAWN?t===$6eb582f9081eb7e5$export$7a91b0fde7ec420f?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=$6eb582f9081eb7e5$var$EMPTY,e.piece===$6eb582f9081eb7e5$export$4c32fd1f222ff2b0?this._halfMoves=0:e.flags&($6eb582f9081eb7e5$var$BITS.CAPTURE|$6eb582f9081eb7e5$var$BITS.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===$6eb582f9081eb7e5$export$7a91b0fde7ec420f&&this._moveNumber++,this._turn=n}undo(){let e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){let e=this._history.pop();if(void 0===e)return null;let t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;let n=this._turn,i=$6eb582f9081eb7e5$var$swapColor(n);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured){if(t.flags&$6eb582f9081eb7e5$var$BITS.EP_CAPTURE){// en passant capture
let e;e=n===$6eb582f9081eb7e5$export$7a91b0fde7ec420f?t.to-16:t.to+16,this._board[e]={type:$6eb582f9081eb7e5$export$4c32fd1f222ff2b0,color:i}}else this._board[t.to]={type:t.captured,color:i}}if(t.flags&($6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE|$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE)){let e,n;t.flags&$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE?(e=t.to+1,n=t.to-1):(e=t.to-2,n=t.to+1),this._board[e]=this._board[n],delete this._board[n]}return t}pgn({newline:e="\n",maxWidth:t=0}={}){/*
         * using the specification from http://www.chessclub.com/help/PGN-spec
         * example for html usage: .pgn({ max_width: 72, newline_char: "<br />" })
         */let n=[],i=!1;/* add the PGN header information */for(let t in this._header)/*
             * TODO: order of enumerated properties in header object is not
             * guaranteed, see ECMA-262 spec (section 12.6.4)
             */n.push("["+t+' "'+this._header[t]+'"]'+e),i=!0;i&&this._history.length&&n.push(e);let r=e=>{let t=this._comments[this.fen()];if(void 0!==t){let n=e.length>0?" ":"";e=`${e}${n}{${t}}`}return e},o=[];for(;this._history.length>0;)o.push(this._undoMove());let a=[],s="";// build the list of moves.  a move_string looks like: "3. e3 e6"
for(0===o.length&&a.push(r(""));o.length>0;){s=r(s);let e=o.pop();// make TypeScript stop complaining about move being undefined
if(!e)break;// if the position started with black to move, start PGN with #. ...
if(this._history.length||"b"!==e.color)"w"===e.color&&(s.length&&a.push(s),s=this._moveNumber+".");else{let e=`${this._moveNumber}. ...`;// is there a comment preceding the first move?
s=s?`${s} ${e}`:e}s=s+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}/*
         * history should be back to what it was before we started generating PGN,
         * so join together moves
         */if(s.length&&a.push(r(s)),void 0!==this._header.Result&&a.push(this._header.Result),0===t)return n.join("")+a.join(" ");// TODO (jah): huh?
let l=function(){return n.length>0&&" "===n[n.length-1]&&(n.pop(),!0)},c=function(i,r){for(let o of r.split(" "))if(o){if(i+o.length>t){for(;l();)i--;n.push(e),i=0}n.push(o),i+=o.length,n.push(" "),i++}return l()&&i--,i},u=0;for(let i=0;i<a.length;i++){if(u+a[i].length>t&&a[i].includes("{")){u=c(u,a[i]);continue}u+a[i].length>t&&0!==i?(" "===n[n.length-1]&&n.pop(),n.push(e),u=0):0!==i&&(n.push(" "),u++),n.push(a[i]),u+=a[i].length}return n.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:n="\r?\n"}={}){function i(e){return e.replace(/\\/g,"\\")}function r(e){let t={},r=e.split(new RegExp(i(n))),o="",a="";for(let e=0;e<r.length;e++){let n=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;o=r[e].replace(n,"$1"),a=r[e].replace(n,"$2"),o.trim().length>0&&(t[o]=a)}return t}// strip whitespace from head/tail of PGN block
e=e.trim();/*
         * RegExp to split header. Takes advantage of the fact that header and movetext
         * will always have a blank line between them (ie, two newline_char's). Handles
         * case where movetext is empty by matching newlineChar until end of string is
         * matched - effectively trimming from the end extra newlineChar.
         *
         * With default newline_char, will equal:
         * /^(\[((?:\r?\n)|.)*\])((?:\s*\r?\n){2}|(?:\s*\r?\n)*$)/
         */let o=RegExp("^(\\[((?:"+i(n)+")|.)*\\])((?:\\s*"+i(n)+"){2}|(?:\\s*"+i(n)+")*$)"),a=o.exec(e),s=a&&a.length>=2?a[1]:"";// Put the board in the starting position
this.reset();// parse PGN header
let l=r(s),c="";for(let e in l)"fen"===e.toLowerCase()&&(c=l[e]),this.header(e,l[e]);/*
         * the permissive parser should attempt to load a fen tag, even if it's the
         * wrong case and doesn't include a corresponding [SetUp "1"] tag
         */if(t)/*
             * strict parser - load the starting position indicated by [Setup '1']
             * and [FEN position]
             */{if("1"===l.SetUp){if(!("FEN"in l))throw Error("Invalid PGN: FEN tag must be supplied with SetUp tag");// second argument to load: don't clear the headers
this.load(l.FEN,!0)}}else c&&this.load(c,!0);/*
         * NB: the regexes below that delete move numbers, recursive annotations,
         * and numeric annotation glyphs may also match text in comments. To
         * prevent this, we transform comments by hex-encoding them in place and
         * decoding them again after the other tokens have been deleted.
         *
         * While the spec states that PGN files should be ASCII encoded, we use
         * {en,de}codeURIComponent here to support arbitrary UTF8 as a convenience
         * for modern users
         */function u(e){return Array.from(e).map(function(e){/*
                 * encodeURI doesn't transform most ASCII characters, so we handle
                 * these ourselves
                 */return 128>e.charCodeAt(0)?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()}).join("")}function h(e){return 0==e.length?"":decodeURIComponent("%"+(e.match(/.{1,2}/g)||[]).join("%"))}let d=function(e){return e=e.replace(RegExp(i(n),"g")," "),`{${u(e.slice(1,e.length-1))}}`},p=function(e){if(e.startsWith("{")&&e.endsWith("}"))return h(e.slice(1,e.length-1))},f=e.replace(s,"").replace(RegExp(`({[^}]*})+?|;([^${i(n)}]*)`,"g"),function(e,t,n){return void 0!==t?d(t):" "+d(`{${n.slice(1)}}`)}).replace(RegExp(i(n),"g")," "),m=/(\([^()]+\))+?/g;for(;m.test(f);)f=f.replace(m,"");// trim and get array of moves
let y=/* delete numeric annotation glyphs */(f=// delete ... indicating black to move
(f=// delete move numbers
(f=f.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).trim().split(new RegExp(/\s+/));// delete empty entries
y=y.filter(e=>""!==e);let g="";for(let e=0;e<y.length;e++){let n=p(y[e]);if(void 0!==n){this._comments[this.fen()]=n;continue}let i=this._moveFromSan(y[e],t);// invalid move
if(null==i){// was the move an end of game marker
if($6eb582f9081eb7e5$var$TERMINATION_MARKERS.indexOf(y[e])>-1)g=y[e];else throw Error(`Invalid move in PGN: ${y[e]}`)}else // reset the end of game marker if making a valid move
g="",this._makeMove(i)}g&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",g)}/*
     * Convert a move from 0x88 coordinates to Standard Algebraic Notation
     * (SAN)
     *
     * @param {boolean} strict Use the strict SAN parser. It will throw errors
     * on overly disambiguated moves (see below):
     *
     * r1bqkbnr/ppp2ppp/2n5/1B1pP3/4P3/8/PPPP2PP/RNBQK1NR b KQkq - 2 4
     * 4. ... Nge7 is overly disambiguated because the knight on c6 is pinned
     * 4. ... Ne7 is technically the valid SAN
     */_moveToSan(e,t){let n="";if(e.flags&$6eb582f9081eb7e5$var$BITS.KSIDE_CASTLE)n="O-O";else if(e.flags&$6eb582f9081eb7e5$var$BITS.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==$6eb582f9081eb7e5$export$4c32fd1f222ff2b0){let i=$6eb582f9081eb7e5$var$getDisambiguator(e,t);n+=e.piece.toUpperCase()+i}e.flags&($6eb582f9081eb7e5$var$BITS.CAPTURE|$6eb582f9081eb7e5$var$BITS.EP_CAPTURE)&&(e.piece===$6eb582f9081eb7e5$export$4c32fd1f222ff2b0&&(n+=$6eb582f9081eb7e5$var$algebraic(e.from)[0]),n+="x"),n+=$6eb582f9081eb7e5$var$algebraic(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}// convert a move from Standard Algebraic Notation (SAN) to 0x88 coordinates
_moveFromSan(e,t=!1){let n,i,r,o,a;// strip off any move decorations: e.g Nf3+?! becomes Nf3
let s=$6eb582f9081eb7e5$var$strippedSan(e),l=$6eb582f9081eb7e5$var$inferPieceType(s),c=this._moves({legal:!0,piece:l});// strict parser
for(let e=0,t=c.length;e<t;e++)if(s===$6eb582f9081eb7e5$var$strippedSan(this._moveToSan(c[e],c)))return c[e];// the strict parser failed
if(t)return null;/*
         * The default permissive (non-strict) parser allows the user to parse
         * non-standard chess notations. This parser is only run after the strict
         * Standard Algebraic Notation (SAN) parser has failed.
         *
         * When running the permissive parser, we'll run a regex to grab the piece, the
         * to/from square, and an optional promotion piece. This regex will
         * parse common non-standard notation like: Pe2-e4, Rc1c4, Qf3xf7,
         * f7f8q, b1c3
         *
         * NOTE: Some positions and moves may be ambiguous when using the permissive
         * parser. For example, in this position: 6k1/8/8/B7/8/8/8/BN4K1 w - - 0 1,
         * the move b1c3 may be interpreted as Nc3 or B1c3 (a disambiguated bishop
         * move). In these cases, the permissive parser will default to the most
         * basic interpretation (which is b1c3 parsing to Nc3).
         */let u=!1;if((i=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(n=i[1],r=i[2],o=i[3],a=i[4],1==r.length&&(u=!0)):/*
             * The [a-h]?[1-8]? portion of the regex below handles moves that may be
             * overly disambiguated (e.g. Nge7 is unnecessary and non-standard when
             * there is one legal knight move to e7). In this case, the value of
             * 'from' variable will be a rank or file, not a square.
             */(i=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(n=i[1],r=i[2],o=i[3],a=i[4],1==r.length&&(u=!0)),l=$6eb582f9081eb7e5$var$inferPieceType(s),c=this._moves({legal:!0,piece:n||l}),!o)return null;for(let e=0,t=c.length;e<t;e++)if(r){if((!n||n.toLowerCase()==c[e].piece)&&$6eb582f9081eb7e5$var$Ox88[r]==c[e].from&&$6eb582f9081eb7e5$var$Ox88[o]==c[e].to&&(!a||a.toLowerCase()==c[e].promotion))return c[e];if(u){/*
                 * SPECIAL CASE: we parsed a move string that may have an unneeded
                 * rank/file disambiguator (e.g. Nge7).  The 'from' variable will
                 */let t=$6eb582f9081eb7e5$var$algebraic(c[e].from);if((!n||n.toLowerCase()==c[e].piece)&&$6eb582f9081eb7e5$var$Ox88[o]==c[e].to&&(r==t[0]||r==t[1])&&(!a||a.toLowerCase()==c[e].promotion))return c[e]}}else // if there is no from square, it could be just 'x' missing from a capture
if(s===$6eb582f9081eb7e5$var$strippedSan(this._moveToSan(c[e],c)).replace("x",""))return c[e];return null}ascii(){let e="   +------------------------+\n";for(let t=$6eb582f9081eb7e5$var$Ox88.a8;t<=$6eb582f9081eb7e5$var$Ox88.h1;t++){if(0===$6eb582f9081eb7e5$var$file(t)&&(e+=" "+"87654321"[$6eb582f9081eb7e5$var$rank(t)]+" |"),this._board[t]){let n=this._board[t].type,i=this._board[t].color,r=i===$6eb582f9081eb7e5$export$29814851e0aa981f?n.toUpperCase():n.toLowerCase();e+=" "+r+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+"   +------------------------+\n     a  b  c  d  e  f  g  h"}perft(e){let t=this._moves({legal:!1}),n=0,i=this._turn;for(let r=0,o=t.length;r<o;r++)this._makeMove(t[r]),!this._isKingAttacked(i)&&(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}// pretty = external move object
_makePretty(e){let{color:t,piece:n,from:i,to:r,flags:o,captured:a,promotion:s}=e,l="";for(let e in $6eb582f9081eb7e5$var$BITS)$6eb582f9081eb7e5$var$BITS[e]&o&&(l+=$6eb582f9081eb7e5$var$FLAGS[e]);let c=$6eb582f9081eb7e5$var$algebraic(i),u=$6eb582f9081eb7e5$var$algebraic(r),h={color:t,piece:n,from:c,to:u,san:this._moveToSan(e,this._moves({legal:!0})),flags:l,lan:c+u,before:this.fen(),after:""};return(// generate the FEN for the 'after' key
this._makeMove(e),h.after=this.fen(),this._undoMove(),a&&(h.captured=a),s&&(h.promotion=s,h.lan+=s),h)}turn(){return this._turn}board(){let e=[],t=[];for(let n=$6eb582f9081eb7e5$var$Ox88.a8;n<=$6eb582f9081eb7e5$var$Ox88.h1;n++)null==this._board[n]?t.push(null):t.push({square:$6eb582f9081eb7e5$var$algebraic(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}squareColor(e){if(e in $6eb582f9081eb7e5$var$Ox88){let t=$6eb582f9081eb7e5$var$Ox88[e];return($6eb582f9081eb7e5$var$rank(t)+$6eb582f9081eb7e5$var$file(t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){let t=[],n=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){let i=t.pop();if(!i)break;e?n.push(this._makePretty(i)):n.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return n}_pruneComments(){let e=[],t={},n=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){let t=e.pop();if(!t)break;this._makeMove(t),n(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){let e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{let t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(let n of[$6eb582f9081eb7e5$export$42387107bb0d6206,$6eb582f9081eb7e5$export$36a8946792f13ec9])void 0!==t[n]&&(t[n]?this._castling[e]|=$6eb582f9081eb7e5$var$SIDES[n]:this._castling[e]&=~$6eb582f9081eb7e5$var$SIDES[n]);this._updateCastlingRights();let n=this.getCastlingRights(e);return(void 0===t[$6eb582f9081eb7e5$export$42387107bb0d6206]||t[$6eb582f9081eb7e5$export$42387107bb0d6206]===n[$6eb582f9081eb7e5$export$42387107bb0d6206])&&(void 0===t[$6eb582f9081eb7e5$export$36a8946792f13ec9]||t[$6eb582f9081eb7e5$export$36a8946792f13ec9]===n[$6eb582f9081eb7e5$export$36a8946792f13ec9])}getCastlingRights(e){return{[$6eb582f9081eb7e5$export$42387107bb0d6206]:(this._castling[e]&$6eb582f9081eb7e5$var$SIDES[$6eb582f9081eb7e5$export$42387107bb0d6206])!=0,[$6eb582f9081eb7e5$export$36a8946792f13ec9]:(this._castling[e]&$6eb582f9081eb7e5$var$SIDES[$6eb582f9081eb7e5$export$36a8946792f13ec9])!=0}}moveNumber(){return this._moveNumber}}const $236ba31c448bdb87$export$45f641c0a85ed846="abcdefgh";let $236ba31c448bdb87$var$squares=[],$236ba31c448bdb87$var$files=[...$236ba31c448bdb87$export$45f641c0a85ed846];$236ba31c448bdb87$var$files.forEach(e=>{for(let t=1;t<=8;t++)$236ba31c448bdb87$var$squares.push(e+t)});const $236ba31c448bdb87$export$5fc67852ab417150=$236ba31c448bdb87$var$squares;function $236ba31c448bdb87$export$ef42e39072fd379(e){let t=e.from+e.to;return e.promotion&&(t+=e.promotion),t}function $236ba31c448bdb87$export$a23e9f71e3b927c7(e){let t=new $6eb582f9081eb7e5$export$a4d6ea685c300d39(e),n=t.moves({verbose:!0})//, legal: false})
,i=Array(64).fill(0);return n.forEach((e,t)=>{let n=$236ba31c448bdb87$export$5fc67852ab417150.indexOf(e.to);i[n]+=1}),$236ba31c448bdb87$export$5fc67852ab417150.forEach((e,n)=>{t.get(e)&&t.get(e).color==t.turn()&&(i[n]+=1)}),i}function $236ba31c448bdb87$export$def19b3072191111(e){let t=e.split(" ");return t[1]="w"==t[1]?"b":"w",// fix for en passant
t[3]="-",t.join(" ")}function $236ba31c448bdb87$export$f784c029d2bce31b(e,t){let n=[];return e.board().map((e,i)=>{e.map((e,r)=>{e&&e.type==t.type&&e.color==t.color&&n.push($236ba31c448bdb87$export$45f641c0a85ed846[r]+(8-i))})}),n}var $b058e0cf7a9c3e39$exports={};function $d5ffb40ab7d69c90$export$7dc676b6dd72d281(e){let t=new Map;return $236ba31c448bdb87$export$5fc67852ab417150.forEach(n=>{let i=e.moves({square:n,verbose:!0});i.length&&t.set(n,i.map(e=>e.to))}),console.log("all moves",t),t}function $d5ffb40ab7d69c90$export$4282caeda4cf6c97(e){return"w"===e.turn()?"white":"black"}function $d5ffb40ab7d69c90$export$5b50b356a8724b72(e,t){return(n,i)=>{e.move({from:n,to:i}),$d5ffb40ab7d69c90$export$8aee836dd884f091(e,t)}}function $d5ffb40ab7d69c90$export$8aee836dd884f091(e,t){t.set({fen:e.fen(),check:e.isCheck(),turnColor:$d5ffb40ab7d69c90$export$4282caeda4cf6c97(e),movable:{color:$d5ffb40ab7d69c90$export$4282caeda4cf6c97(e),dests:$d5ffb40ab7d69c90$export$7dc676b6dd72d281(e)}});let n=e.history({verbose:!0});if(n.length){let e=n.pop();t.set({lastMove:[e.from,e.to]})}}function $d5ffb40ab7d69c90$export$dfb56f6b9abe10bc(e,t){let n=new $b058e0cf7a9c3e39$exports.Graph(Array(8).fill(Array(8).fill(1)),{diagonal:!0});console.log("finding path",e,t,n);let i=n.grid[e.charCodeAt(0)-97][e.charCodeAt(1)-49],r=n.grid[t.charCodeAt(0)-97][t.charCodeAt(1)-49],o=(0,$b058e0cf7a9c3e39$exports.astar).search(n,i,r,{heuristic:$b058e0cf7a9c3e39$exports.astar.heuristics.diagonal});return o.unshift(i),console.log("found path",o),o}!// javascript-astar 0.4.1
// http://github.com/bgrins/javascript-astar
// Freely distributable under the MIT License.
// Implements the astar search algorithm in javascript using a Binary Heap.
// Includes Binary Heap (with modifications) from Marijn Haverbeke.
// http://eloquentjavascript.net/appendix2.html
function(e){/* global module, define */if("object"==typeof $b058e0cf7a9c3e39$exports)$b058e0cf7a9c3e39$exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t=e();window.astar=t.astar,window.Graph=t.Graph}}(function(){function e(e){for(var t=e,n=[];t.parent;)n.unshift(t),t=t.parent;return n}function t(){return new o(function(e){return e.f})}var n={/**
    * Perform an A* Search on a graph given a start and end node.
    * @param {Graph} graph
    * @param {GridNode} start
    * @param {GridNode} end
    * @param {Object} [options]
    * @param {bool} [options.closest] Specifies whether to return the
               path to the closest node if the target is unreachable.
    * @param {Function} [options.heuristic] Heuristic function (see
    *          astar.heuristics).
    */search:function(i,r,o,a){i.cleanDirty();var s=(a=a||{}).heuristic||n.heuristics.manhattan,l=a.closest||!1,c=t(),u=r;for(r.h=s(r,o),c.push(r);c.size()>0;){// Grab the lowest f(x) to process next.  Heap keeps this sorted for us.
var h=c.pop();// End case -- result has been found, return the traced path.
if(h===o)return e(h);// Normal case -- move currentNode from open to closed, process each of its neighbors.
h.closed=!0;for(var d=i.neighbors(h),p=0,f=d.length;p<f;++p){var m=d[p];if(!(m.closed||m.isWall())){// The g score is the shortest distance from start to current node.
// We need to check if the path we have arrived at this neighbor is the shortest one we have seen yet.
var y=h.g+m.getCost(h),g=m.visited;(!g||y<m.g)&&(// Found an optimal (so far) path to this node.  Take score for node to see how good it is.
m.visited=!0,m.parent=h,m.h=m.h||s(m,o),m.g=y,m.f=m.g+m.h,i.markDirty(m),l&&(m.h<u.h||m.h===u.h&&m.g<u.g)&&(u=m),g?c.rescoreElement(m):c.push(m))}}}return l?e(u):[]},// See list of heuristics: http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html
heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var n=1,i=Math.sqrt(2),r=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return n*(r+o)+(i-2*n)*Math.min(r,o)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};/**
* A graph memory structure
* @param {Array} gridIn 2D array of input weights
* @param {Object} [options]
* @param {bool} [options.diagonal] Specifies whether diagonal moves are allowed
*/function i(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var n=0;n<e.length;n++){this.grid[n]=[];for(var i=0,o=e[n];i<o.length;i++){var a=new r(n,i,o[i]);this.grid[n][i]=a,this.nodes.push(a)}}this.init()}function r(e,t,n){this.x=e,this.y=t,this.weight=n}function o(e){this.content=[],this.scoreFunction=e}return i.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)n.cleanNode(this.nodes[e])},i.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)n.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},i.prototype.markDirty=function(e){this.dirtyNodes.push(e)},i.prototype.neighbors=function(e){var t=[],n=e.x,i=e.y,r=this.grid;return r[n-1]&&r[n-1][i]&&t.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&t.push(r[n+1][i]),r[n]&&r[n][i-1]&&t.push(r[n][i-1]),r[n]&&r[n][i+1]&&t.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&t.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&t.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&t.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&t.push(r[n+1][i+1])),t},i.prototype.toString=function(){for(var e,t,n,i,r=[],o=this.grid,a=0,s=o.length;a<s;a++){for(n=0,e=[],i=(t=o[a]).length;n<i;n++)e.push(t[n].weight);r.push(e.join(" "))}return r.join("\n")},r.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},r.prototype.getCost=function(e){return(// Take diagonal weight into consideration.
e&&e.x!=this.x&&e.y!=this.y?1.41421*this.weight:this.weight)},r.prototype.isWall=function(){return 0===this.weight},o.prototype={push:function(e){// Add the new element to the end of the array.
this.content.push(e),// Allow it to sink down.
this.sinkDown(this.content.length-1)},pop:function(){// Store the first element so we can return it later.
var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){// When at 0, an element can not sink any further.
for(// Fetch the element that has to be sunk.
var t=this.content[e];e>0;){// Compute the parent element's index, and fetch it.
var n=(e+1>>1)-1,i=this.content[n];// Swap the elements if the parent is greater.
if(this.scoreFunction(t)<this.scoreFunction(i))this.content[n]=t,this.content[e]=i,// Update 'n' to continue at the new position.
e=n;else break}},bubbleUp:function(e){for(// Look up the target element and its score.
var t=this.content.length,n=this.content[e],i=this.scoreFunction(n);;){// Compute the indices of the child elements.
var r,o=e+1<<1,a=o-1,s=null;// If the first child exists (is inside the array)...
if(a<t){// Look it up and compute its score.
var l=this.content[a];(r=this.scoreFunction(l))<i&&(s=a)}// Do the same checks for the other child.
if(o<t){var c=this.content[o];this.scoreFunction(c)<(null===s?i:r)&&(s=o)}// If the element needs to be moved, swap it, and continue.
if(null!==s)this.content[e]=this.content[s],this.content[s]=n,e=s;else break}}},{astar:n,Graph:i}});var $61fb775615801b9d$exports={},$61fb775615801b9d$var$__extends=$61fb775615801b9d$exports&&$61fb775615801b9d$exports.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$61fb775615801b9d$var$__assign=$61fb775615801b9d$exports&&$61fb775615801b9d$exports.__assign||function(){return($61fb775615801b9d$var$__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},$61fb775615801b9d$var$__awaiter=$61fb775615801b9d$exports&&$61fb775615801b9d$exports.__awaiter||function(e,t,n,i){function r(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){e.done?n(e.value):r(e.value).then(a,s)}l((i=i.apply(e,t||[])).next())})},$61fb775615801b9d$var$__generator=$61fb775615801b9d$exports&&$61fb775615801b9d$exports.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return l([e,t])}}function l(o){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},$61fb775615801b9d$var$__spreadArrays=$61fb775615801b9d$exports&&$61fb775615801b9d$exports.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i};Object.defineProperty($61fb775615801b9d$exports,"__esModule",{value:!0});/**
 * A list of OAuth2AuthCodePKCE errors.
 */// To "namespace" all errors.
var $61fb775615801b9d$var$ErrorOAuth2=/** @class */function(){function e(){}return e.prototype.toString=function(){return"ErrorOAuth2"},e}();$61fb775615801b9d$exports.ErrorOAuth2=$61fb775615801b9d$var$ErrorOAuth2;// For really unknown errors.
var $61fb775615801b9d$var$ErrorUnknown=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorUnknown"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorUnknown=$61fb775615801b9d$var$ErrorUnknown;// Some generic, internal errors that can happen.
var $61fb775615801b9d$var$ErrorNoAuthCode=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorNoAuthCode"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorNoAuthCode=$61fb775615801b9d$var$ErrorNoAuthCode;var $61fb775615801b9d$var$ErrorInvalidReturnedStateParam=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorInvalidReturnedStateParam"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorInvalidReturnedStateParam=$61fb775615801b9d$var$ErrorInvalidReturnedStateParam;var $61fb775615801b9d$var$ErrorInvalidJson=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorInvalidJson"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorInvalidJson=$61fb775615801b9d$var$ErrorInvalidJson;// Errors that occur across many endpoints
var $61fb775615801b9d$var$ErrorInvalidScope=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorInvalidScope"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorInvalidScope=$61fb775615801b9d$var$ErrorInvalidScope;var $61fb775615801b9d$var$ErrorInvalidRequest=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorInvalidRequest"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorInvalidRequest=$61fb775615801b9d$var$ErrorInvalidRequest;var $61fb775615801b9d$var$ErrorInvalidToken=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorInvalidToken"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorInvalidToken=$61fb775615801b9d$var$ErrorInvalidToken;/**
 * Possible authorization grant errors given by the redirection from the
 * authorization server.
 */var $61fb775615801b9d$var$ErrorAuthenticationGrant=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorAuthenticationGrant"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorAuthenticationGrant=$61fb775615801b9d$var$ErrorAuthenticationGrant;var $61fb775615801b9d$var$ErrorUnauthorizedClient=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorUnauthorizedClient"},t}($61fb775615801b9d$var$ErrorAuthenticationGrant);$61fb775615801b9d$exports.ErrorUnauthorizedClient=$61fb775615801b9d$var$ErrorUnauthorizedClient;var $61fb775615801b9d$var$ErrorAccessDenied=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorAccessDenied"},t}($61fb775615801b9d$var$ErrorAuthenticationGrant);$61fb775615801b9d$exports.ErrorAccessDenied=$61fb775615801b9d$var$ErrorAccessDenied;var $61fb775615801b9d$var$ErrorUnsupportedResponseType=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorUnsupportedResponseType"},t}($61fb775615801b9d$var$ErrorAuthenticationGrant);$61fb775615801b9d$exports.ErrorUnsupportedResponseType=$61fb775615801b9d$var$ErrorUnsupportedResponseType;var $61fb775615801b9d$var$ErrorServerError=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorServerError"},t}($61fb775615801b9d$var$ErrorAuthenticationGrant);$61fb775615801b9d$exports.ErrorServerError=$61fb775615801b9d$var$ErrorServerError;var $61fb775615801b9d$var$ErrorTemporarilyUnavailable=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorTemporarilyUnavailable"},t}($61fb775615801b9d$var$ErrorAuthenticationGrant);$61fb775615801b9d$exports.ErrorTemporarilyUnavailable=$61fb775615801b9d$var$ErrorTemporarilyUnavailable;/**
 * A list of possible access token response errors.
 */var $61fb775615801b9d$var$ErrorAccessTokenResponse=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorAccessTokenResponse"},t}($61fb775615801b9d$var$ErrorOAuth2);$61fb775615801b9d$exports.ErrorAccessTokenResponse=$61fb775615801b9d$var$ErrorAccessTokenResponse;var $61fb775615801b9d$var$ErrorInvalidClient=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorInvalidClient"},t}($61fb775615801b9d$var$ErrorAccessTokenResponse);$61fb775615801b9d$exports.ErrorInvalidClient=$61fb775615801b9d$var$ErrorInvalidClient;var $61fb775615801b9d$var$ErrorInvalidGrant=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorInvalidGrant"},t}($61fb775615801b9d$var$ErrorAccessTokenResponse);$61fb775615801b9d$exports.ErrorInvalidGrant=$61fb775615801b9d$var$ErrorInvalidGrant;var $61fb775615801b9d$var$ErrorUnsupportedGrantType=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $61fb775615801b9d$var$__extends(t,e),t.prototype.toString=function(){return"ErrorUnsupportedGrantType"},t}($61fb775615801b9d$var$ErrorAccessTokenResponse);$61fb775615801b9d$exports.ErrorUnsupportedGrantType=$61fb775615801b9d$var$ErrorUnsupportedGrantType;/**
 * WWW-Authenticate error object structure for less error prone handling.
 */var $61fb775615801b9d$var$ErrorWWWAuthenticate=/** @class */function(){return function(){this.realm="",this.error=""}}();/**
 * Translate the raw error strings returned from the server into error classes.
 */function $61fb775615801b9d$var$toErrorClass(e){return new($61fb775615801b9d$exports.RawErrorToErrorClassMap[e]||$61fb775615801b9d$var$ErrorUnknown)}/**
 * A convience function to turn, for example, `Bearer realm="bity.com",
 * error="invalid_client"` into `{ realm: "bity.com", error: "invalid_client"
 * }`.
 */function $61fb775615801b9d$var$fromWWWAuthenticateHeaderStringToObject(e){var t=e.slice(7).replace(/"/g,"").split(", ").map(function(e){var t,n=e.split("="),i=n[0],r=n[1];return(t={})[i]=r,t}).reduce(function(e,t){return $61fb775615801b9d$var$__assign($61fb775615801b9d$var$__assign({},e),t)},{});return{realm:t.realm,error:t.error}}$61fb775615801b9d$exports.ErrorWWWAuthenticate=$61fb775615801b9d$var$ErrorWWWAuthenticate,$61fb775615801b9d$exports.RawErrorToErrorClassMap={invalid_request:$61fb775615801b9d$var$ErrorInvalidRequest,invalid_grant:$61fb775615801b9d$var$ErrorInvalidGrant,unauthorized_client:$61fb775615801b9d$var$ErrorUnauthorizedClient,access_denied:$61fb775615801b9d$var$ErrorAccessDenied,unsupported_response_type:$61fb775615801b9d$var$ErrorUnsupportedResponseType,invalid_scope:$61fb775615801b9d$var$ErrorInvalidScope,server_error:$61fb775615801b9d$var$ErrorServerError,temporarily_unavailable:$61fb775615801b9d$var$ErrorTemporarilyUnavailable,invalid_client:$61fb775615801b9d$var$ErrorInvalidClient,unsupported_grant_type:$61fb775615801b9d$var$ErrorUnsupportedGrantType,invalid_json:$61fb775615801b9d$var$ErrorInvalidJson,invalid_token:$61fb775615801b9d$var$ErrorInvalidToken},$61fb775615801b9d$exports.toErrorClass=$61fb775615801b9d$var$toErrorClass,$61fb775615801b9d$exports.fromWWWAuthenticateHeaderStringToObject=$61fb775615801b9d$var$fromWWWAuthenticateHeaderStringToObject;/**
 * HTTP headers that we need to access.
 */var $61fb775615801b9d$var$HEADER_AUTHORIZATION="Authorization",$61fb775615801b9d$var$HEADER_WWW_AUTHENTICATE="WWW-Authenticate";/**
 * To store the OAuth client's data between websites due to redirection.
 */$61fb775615801b9d$exports.LOCALSTORAGE_ID="oauth2authcodepkce",$61fb775615801b9d$exports.LOCALSTORAGE_STATE=$61fb775615801b9d$exports.LOCALSTORAGE_ID+"-state",/**
 * The maximum length for a code verifier for the best security we can offer.
 * Please note the NOTE section of RFC 7636 § 4.1 - the length must be >= 43,
 * but <= 128, **after** base64 url encoding. This means 32 code verifier bytes
 * encoded will be 43 bytes, or 96 bytes encoded will be 128 bytes. So 96 bytes
 * is the highest valid value that can be used.
 */$61fb775615801b9d$exports.RECOMMENDED_CODE_VERIFIER_LENGTH=96,/**
 * A sensible length for the state's length, for anti-csrf.
 */$61fb775615801b9d$exports.RECOMMENDED_STATE_LENGTH=32;/**
 * Character set to generate code verifier defined in rfc7636.
 */var $61fb775615801b9d$var$PKCE_CHARSET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",$61fb775615801b9d$var$OAuth2AuthCodePKCE=/** @class */function(){function e(e){return this.state={},this.config=e,this.recoverState(),this}return(/**
     * Attach the OAuth logic to all fetch requests and translate errors (either
     * returned as json or through the WWW-Authenticate header) into nice error
     * classes.
     */e.prototype.decorateFetchHTTPClient=function(e){var t=this;return function(n,i){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return t.state.isHTTPDecoratorActive?t.getAccessToken().then(function(t){var o=t.token,a=Object.assign({},i);return a.headers||(a.headers={}),a.headers[$61fb775615801b9d$var$HEADER_AUTHORIZATION]="Bearer "+o.value,e.apply(void 0,$61fb775615801b9d$var$__spreadArrays([n,a],r))}).then(function(e){if(e.ok||!e.headers.has($61fb775615801b9d$var$HEADER_WWW_AUTHENTICATE.toLowerCase()))return e;var n=$61fb775615801b9d$var$toErrorClass($61fb775615801b9d$var$fromWWWAuthenticateHeaderStringToObject(e.headers.get($61fb775615801b9d$var$HEADER_WWW_AUTHENTICATE.toLowerCase())).error);return n instanceof $61fb775615801b9d$var$ErrorInvalidToken&&t.config.onAccessTokenExpiry(function(){return t.exchangeRefreshTokenForAccessToken()}),Promise.reject(n)}):e.apply(void 0,$61fb775615801b9d$var$__spreadArrays([n,i],r))}},/**
     * If there is an error, it will be passed back as a rejected Promise.
     * If there is no code, the user should be redirected via
     * [fetchAuthorizationCode].
     */e.prototype.isReturningFromAuthServer=function(){var t=e.extractParamFromUrl(location.href,"error");if(t)return Promise.reject($61fb775615801b9d$var$toErrorClass(t));var n=e.extractParamFromUrl(location.href,"code");if(!n)return Promise.resolve(!1);var i=JSON.parse(localStorage.getItem($61fb775615801b9d$exports.LOCALSTORAGE_STATE)||"{}");return e.extractParamFromUrl(location.href,"state")!==i.stateQueryParam?(console.warn("state query string parameter doesn't match the one sent! Possible malicious activity somewhere."),Promise.reject(new $61fb775615801b9d$var$ErrorInvalidReturnedStateParam)):(i.authorizationCode=n,i.hasAuthCodeBeenExchangedForAccessToken=!1,localStorage.setItem($61fb775615801b9d$exports.LOCALSTORAGE_STATE,JSON.stringify(i)),this.setState(i),Promise.resolve(!0))},/**
     * Fetch an authorization grant via redirection. In a sense this function
     * doesn't return because of the redirect behavior (uses `location.replace`).
     *
     * @param oneTimeParams A way to specify "one time" used query string
     * parameters during the authorization code fetching process, usually for
     * values which need to change at run-time.
     */e.prototype.fetchAuthorizationCode=function(t){return $61fb775615801b9d$var$__awaiter(this,void 0,void 0,function(){var n,i,r,o,a,s,l,c,u,h,d;return $61fb775615801b9d$var$__generator(this,function(p){switch(p.label){case 0:return this.assertStateAndConfigArePresent(),i=(n=this.config).clientId,r=n.extraAuthorizationParams,o=n.redirectUrl,a=n.scopes,[4/*yield*/,e.generatePKCECodes()];case 1:return l=(s=p.sent()).codeChallenge,c=s.codeVerifier,u=e.generateRandomState($61fb775615801b9d$exports.RECOMMENDED_STATE_LENGTH),this.state=$61fb775615801b9d$var$__assign($61fb775615801b9d$var$__assign({},this.state),{codeChallenge:l,codeVerifier:c,stateQueryParam:u,isHTTPDecoratorActive:!0}),localStorage.setItem($61fb775615801b9d$exports.LOCALSTORAGE_STATE,JSON.stringify(this.state)),h=this.config.authorizationUrl+"?response_type=code&client_id="+encodeURIComponent(i)+"&redirect_uri="+encodeURIComponent(o)+"&scope="+encodeURIComponent(a.join(" "))+"&state="+u+"&code_challenge="+encodeURIComponent(l)+"&code_challenge_method=S256",(r||t)&&(d=$61fb775615801b9d$var$__assign($61fb775615801b9d$var$__assign({},r),t),h=h+"&"+e.objectToQueryString(d)),location.replace(h),[2/*return*/]}})})},/**
     * Tries to get the current access token. If there is none
     * it will fetch another one. If it is expired, it will fire
     * [onAccessTokenExpiry] but it's up to the user to call the refresh token
     * function. This is because sometimes not using the refresh token facilities
     * is easier.
     */e.prototype.getAccessToken=function(){var e=this;this.assertStateAndConfigArePresent();var t=this.config.onAccessTokenExpiry,n=this.state,i=n.accessToken,r=n.authorizationCode,o=n.explicitlyExposedTokens,a=n.hasAuthCodeBeenExchangedForAccessToken,s=n.refreshToken,l=n.scopes;return r?this.authCodeForAccessTokenRequest?this.authCodeForAccessTokenRequest:this.isAuthorized()&&a?s&&this.isAccessTokenExpired()?t(function(){return e.exchangeRefreshTokenForAccessToken()}):Promise.resolve({token:i,explicitlyExposedTokens:o,scopes:l,refreshToken:s}):(this.authCodeForAccessTokenRequest=this.exchangeAuthCodeForAccessToken(),this.authCodeForAccessTokenRequest):Promise.reject(new $61fb775615801b9d$var$ErrorNoAuthCode)},/**
     * Refresh an access token from the remote service.
     */e.prototype.exchangeRefreshTokenForAccessToken=function(){var t,n=this;this.assertStateAndConfigArePresent();var i=this.config,r=i.extraRefreshParams,o=i.clientId,a=i.tokenUrl,s=this.state.refreshToken;s||console.warn("No refresh token is present.");var l=a,c="grant_type=refresh_token&refresh_token="+(null===(t=s)||void 0===t?void 0:t.value)+"&client_id="+o;return r&&(c=l+"&"+e.objectToQueryString(r)),fetch(l,{method:"POST",body:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.status>=400?e.json().then(function(e){return Promise.reject(e)}):e.json()}).then(function(e){var t=e.access_token,i=e.expires_in,r=e.refresh_token,o=e.scope,a=n.config.explicitlyExposedTokens,s=[],l={},c={value:t,expiry:new Date(Date.now()+1e3*parseInt(i)).toString()};if(n.state.accessToken=c,r){var u={value:r};n.state.refreshToken=u}a&&(l=Object.fromEntries(a.map(function(t){return[t,e[t]]}).filter(function(e){return e[0],void 0!==e[1]})),n.state.explicitlyExposedTokens=l),o&&(// Multiple scopes are passed and delimited by spaces,
// despite using the singular name "scope".
s=o.split(" "),n.state.scopes=s),localStorage.setItem($61fb775615801b9d$exports.LOCALSTORAGE_STATE,JSON.stringify(n.state));var h={token:c,scopes:s};return a&&(h.explicitlyExposedTokens=l),h}).catch(function(e){var t=n.config.onInvalidGrant,i=e.error||"There was a network error.";return"invalid_grant"===i&&t(function(){return n.fetchAuthorizationCode()}),Promise.reject($61fb775615801b9d$var$toErrorClass(i))})},/**
     * Get the scopes that were granted by the authorization server.
     */e.prototype.getGrantedScopes=function(){return this.state.scopes},/**
     * Signals if OAuth HTTP decorating should be active or not.
     */e.prototype.isHTTPDecoratorActive=function(e){this.state.isHTTPDecoratorActive=e,localStorage.setItem($61fb775615801b9d$exports.LOCALSTORAGE_STATE,JSON.stringify(this.state))},/**
     * Tells if the client is authorized or not. This means the client has at
     * least once successfully fetched an access token. The access token could be
     * expired.
     */e.prototype.isAuthorized=function(){return!!this.state.accessToken},/**
     * Checks to see if the access token has expired.
     */e.prototype.isAccessTokenExpired=function(){var e=this.state.accessToken;return!!(e&&new Date>=new Date(e.expiry))},/**
     * Resets the state of the client. Equivalent to "logging out" the user.
     */e.prototype.reset=function(){this.setState({}),this.authCodeForAccessTokenRequest=void 0},/**
     * If the state or config are missing, it means the client is in a bad state.
     * This should never happen, but the check is there just in case.
     */e.prototype.assertStateAndConfigArePresent=function(){if(!this.state||!this.config)throw console.error("state:",this.state,"config:",this.config),Error("state or config is not set.")},/**
     * Fetch an access token from the remote service. You may pass a custom
     * authorization grant code for any reason, but this is non-standard usage.
     */e.prototype.exchangeAuthCodeForAccessToken=function(e){var t=this;this.assertStateAndConfigArePresent();var n=this.state,i=n.authorizationCode,r=void 0===i?e:i,o=n.codeVerifier,a=void 0===o?"":o,s=this.config,l=s.clientId,c=s.onInvalidGrant,u=s.redirectUrl;a?r||console.warn("No authorization grant code is being passed."):console.warn("No code verifier is being sent.");var h=this.config.tokenUrl,d="grant_type=authorization_code&code="+encodeURIComponent(r||"")+"&redirect_uri="+encodeURIComponent(u)+"&client_id="+encodeURIComponent(l)+"&code_verifier="+a;return fetch(h,{method:"POST",body:d,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var n=e.json().catch(function(e){return{error:"invalid_json"}});return e.ok?n.then(function(e){var n=e.access_token,i=e.expires_in,r=e.refresh_token,o=e.scope,a=t.config.explicitlyExposedTokens,s=[],l={};t.state.hasAuthCodeBeenExchangedForAccessToken=!0,t.authCodeForAccessTokenRequest=void 0;var c={value:n,expiry:new Date(Date.now()+1e3*parseInt(i)).toString()};if(t.state.accessToken=c,r){var u={value:r};t.state.refreshToken=u}a&&(l=Object.fromEntries(a.map(function(t){return[t,e[t]]}).filter(function(e){return e[0],void 0!==e[1]})),t.state.explicitlyExposedTokens=l),o&&(// Multiple scopes are passed and delimited by spaces,
// despite using the singular name "scope".
s=o.split(" "),t.state.scopes=s),localStorage.setItem($61fb775615801b9d$exports.LOCALSTORAGE_STATE,JSON.stringify(t.state));var h={token:c,scopes:s};return a&&(h.explicitlyExposedTokens=l),h}):n.then(function(e){var n=e.error;return"invalid_grant"===n&&c(function(){return t.fetchAuthorizationCode()}),Promise.reject($61fb775615801b9d$var$toErrorClass(n))})})},e.prototype.recoverState=function(){return this.state=JSON.parse(localStorage.getItem($61fb775615801b9d$exports.LOCALSTORAGE_STATE)||"{}"),this},e.prototype.setState=function(e){return this.state=e,localStorage.setItem($61fb775615801b9d$exports.LOCALSTORAGE_STATE,JSON.stringify(e)),this},/**
     * Implements *base64url-encode* (RFC 4648 § 5) without padding, which is NOT
     * the same as regular base64 encoding.
     */e.base64urlEncode=function(e){var t=btoa(e);return(t=(t=t.replace(/\+/g,"-")).replace(/\//g,"_")).replace(/=/g,"")},/**
     * Extracts a query string parameter.
     */e.extractParamFromUrl=function(e,t){var n=e.split("?");if(n.length<2)return"";var i=// Account for hash URLs that SPAs usually use.
(n=n[1].split("#"))[0].split("&").reduce(function(e,t){return e.concat(t.split("="))},[]);if(i.length<2)return"";var r=i.indexOf(t);return decodeURIComponent(r>=0?i[r+1]:"")},/**
     * Converts the keys and values of an object to a url query string
     */e.objectToQueryString=function(e){return Object.entries(e).map(function(e){return e[0]+"="+encodeURIComponent(e[1])}).join("&")},/**
     * Generates a code_verifier and code_challenge, as specified in rfc7636.
     */e.generatePKCECodes=function(){var t=new Uint32Array($61fb775615801b9d$exports.RECOMMENDED_CODE_VERIFIER_LENGTH);crypto.getRandomValues(t);var n=e.base64urlEncode(Array.from(t).map(function(e){return $61fb775615801b9d$var$PKCE_CHARSET[e%$61fb775615801b9d$var$PKCE_CHARSET.length]}).join(""));return crypto.subtle.digest("SHA-256",new TextEncoder().encode(n)).then(function(e){for(var t=new Uint8Array(e),n="",i=t.byteLength,r=0;r<i;r++)n+=String.fromCharCode(t[r]);return n}).then(e.base64urlEncode).then(function(e){return{codeChallenge:e,codeVerifier:n}})},/**
     * Generates random state to be passed for anti-csrf.
     */e.generateRandomState=function(e){var t=new Uint32Array(e);return crypto.getRandomValues(t),Array.from(t).map(function(e){return $61fb775615801b9d$var$PKCE_CHARSET[e%$61fb775615801b9d$var$PKCE_CHARSET.length]}).join("")},e)}();$61fb775615801b9d$exports.OAuth2AuthCodePKCE=$61fb775615801b9d$var$OAuth2AuthCodePKCE;// ND-JSON response streamer
// See https://lichess.org/api#section/Introduction/Streaming-with-ND-JSON
const $c18e048c96a42e94$export$e45226161c660403=(e,t,n)=>{let i=t.body.getReader(),r=/\r?\n/,o=new TextDecoder,a="",s=t=>{let i=JSON.parse(t);console.log(e,i),n(i)},l=()=>i.read().then(({done:e,value:t})=>{if(e){a.length>0&&s(a);return}{let e=o.decode(t,{stream:!0});a+=e;let n=a.split(r);for(let e of(a=n.pop()||"",n.filter(e=>e)))s(e);return l()}});return{closePromise:l(),close:()=>i.cancel()}},$c88ba0be6ebdc294$export$f478a3382b69e867="https://lichess.org",$c88ba0be6ebdc294$export$54a06e3f4a159ad8=["board:play"],$c88ba0be6ebdc294$export$e80e8b1bea817f73="launchchess-client",$c88ba0be6ebdc294$export$e360011a2b524b1a=`${location.protocol}//${location.host}${location.pathname}`,$c88ba0be6ebdc294$export$334c29725a78c21d=(e,t)=>({oauth:new $61fb775615801b9d$exports.OAuth2AuthCodePKCE({authorizationUrl:`${$c88ba0be6ebdc294$export$f478a3382b69e867}/oauth`,tokenUrl:`${$c88ba0be6ebdc294$export$f478a3382b69e867}/api/token`,clientId:$c88ba0be6ebdc294$export$e80e8b1bea817f73,scopes:$c88ba0be6ebdc294$export$54a06e3f4a159ad8,redirectUrl:$c88ba0be6ebdc294$export$e360011a2b524b1a,onAccessTokenExpiry:e=>e(),onInvalidGrant:console.warn}),// me?: Me,
    init:async()=>{try{let t=await e.auth.oauth.getAccessToken();t&&await e.auth.authenticate()}catch(e){console.error(e)}if(!e.loggedIn())try{let t=await e.auth.oauth.isReturningFromAuthServer();t&&await e.auth.authenticate()}catch(e){console.error(e)}},login:async()=>{await e.auth.oauth.fetchAuthorizationCode()},logout:async()=>{e.loggedIn()&&await e.user.httpClient(`${$c88ba0be6ebdc294$export$f478a3382b69e867}/api/token`,{method:"DELETE"}),localStorage.clear(),e.user={}},authenticate:async()=>{let n=e.auth.oauth.decorateFetchHTTPClient(window.fetch),i=await n(`${$c88ba0be6ebdc294$export$f478a3382b69e867}/api/account`);if(i.error)throw i.error;let r=await i.json(),o={username:r.username,profile:r,httpClient:n};e.user=o,e.loggedIn(!0),localStorage.setItem("me",JSON.stringify(o)),console.log("Authenticated as",o.username,t),await t.getGames(),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).redraw()},openStream:async(t,n,i)=>{let r=await e.auth.fetchResponse(t,n);return $c18e048c96a42e94$export$e45226161c660403(`STREAM ${t}`,r,i)},fetchBody:async(t,n={})=>{let i=await e.auth.fetchResponse(t,n),r=await i.json();return r},fetchResponse:async(t,n={})=>{let i=await (e.user.httpClient||window.fetch)(`${$c88ba0be6ebdc294$export$f478a3382b69e867}${t}`,n);if(i.error||!i.ok){let e=`${i.error} ${i.status} ${i.statusText}`;throw alert(e),e}return i}}),$22788da0e2196326$export$2fb70d5e506c6bc2=(e,t)=>({login:async t=>{console.log("logging in"),e.auth.login(),console.log("logged in as: ",e.user.username),e.user.loggedIn=!0,/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.param("redirect")?/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set(/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.param("redirect")):"/login"==/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.get()&&/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/"),// m.redraw()
    e.user.profile=await e.auth.fetchBody("/oauth/profile"),e.user.username=e.user.profile.username},logout:()=>{console.log("logging out"),e.auth.logout(),e.user.username=null,e.user.loggedIn=!1,window.localStorage.setItem("CREDENTIALS_FLUSH",Date.now().toString()),window.localStorage.removeItem("CREDENTIALS_FLUSH");// m.redraw()
    },initAuth:async()=>{localStorage.getItem("me")&&(e.user=JSON.parse(localStorage.getItem("me")),e.user.loggedIn=!0,console.log("loaded user from localstorage",e.user)),e.auth=$c88ba0be6ebdc294$export$334c29725a78c21d(e,t),await e.auth.init(),console.log("auth inited")}});var $c6ddc35a8c0d5f38$exports={};$c6ddc35a8c0d5f38$exports=parcelRequire("f1bNS");const $a01e4d144b50218c$export$d02631cccf789723=(e,t)=>Array.apply(0,Array(t-1)).map((t,n)=>n+e),$a01e4d144b50218c$export$7254cc27399e90bd=()=>({auth:null,loggedIn:$c6ddc35a8c0d5f38$exports(!1),user:{username:null,profile:null},theme:"dark",input:null,output:null,inputName:null,outputName:null,inputs:$c6ddc35a8c0d5f38$exports([]),outputs:$c6ddc35a8c0d5f38$exports([]),deviceId:null,deviceName:null,deviceType:null,connected:!1,top:$a01e4d144b50218c$export$d02631cccf789723(91,10),header:null,layout:null,changeLayout:null,game:null,games:$c6ddc35a8c0d5f38$exports([]),stream:null,opponent:null,chess:new $6eb582f9081eb7e5$export$a4d6ea685c300d39,ground:null,color:"w",selectedSquare:null,selectedPiece:null,invert:$c6ddc35a8c0d5f38$exports(!1),grid:!0,pieces:!0,influence:!1,history:$c6ddc35a8c0d5f38$exports(1),animationDuration:400,animations:[],colors:$9066c94fd6c8e22f$export$56d196d2844d1ca1}),$a01e4d144b50218c$export$b52183d5cfb26dc9=(e,t)=>({incrementHistory:()=>{e.history(e.history()+1),t.lightBoard()},decrementHistory:()=>{e.history(Math.max(0,e.history()-1)),t.lightBoard()},send:(t,n)=>{try{e.output.send(t,n)}catch(e){console.debug("failed to send message",e)}},sendSysex:(t,n)=>{try{e.output.sendSysex(t,n)}catch(e){console.debug("failed to send sysex",e)}},lightMatrix:()=>null,lightGame:()=>null,clearAnimations:()=>null,clear:()=>null,highlightAvailableMoves:()=>null}),$a01e4d144b50218c$export$81ce9b7e86ec18db=(e,t)=>({onmove:(n,i)=>{let r={from:n,to:i},o=e.chess.get(r.from);"p"==o.type&&("w"==o.color&&8==r.to.charAt(1)||"b"==o.color&&1==r.to.charAt(1))&&(console.log("promotion! Auto promote to Queen"),r.promotion="q"),e.chess.move(r),console.log("moved",r,o,e.chess.ascii()),e.ground.set({fen:e.chess.fen()}),t.lightBoard(!0),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).redraw();// send to lichess api
    let a=$236ba31c448bdb87$export$ef42e39072fd379(r),s=e.auth.fetchBody("/api/board/game/"+/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.param("id")+"/move/"+a,{method:"post"});console.log("played move",a,s)}}),$9066c94fd6c8e22f$export$9dae6f82820323cf=144,$9066c94fd6c8e22f$export$d265beb1ee5d4530=176,$9066c94fd6c8e22f$export$c6f17c29808f1b66=[0,32,41],$9066c94fd6c8e22f$export$4b04cd3b2feae9ab={LaunchpadX:[2,12],LaunchpadMk2:[2,24],LaunchpadPro:[2,16],LaunchpadMini:[2,14],LaunchpadMiniMk3:[2,13],LaunchpadS:[32,0]},$9066c94fd6c8e22f$export$776a922db93662cb={"Launchpad MK2 MIDI 1":"LaunchpadMk2","Launchpad MK2":"LaunchpadMk2","Launchpad X MIDI 2":"LaunchpadX","Launchpad X LPX MIDI In":"LaunchpadX","Launchpad X LPX MIDI Out":"LaunchpadX","MIDIIN2 (LPX MIDI)":"LaunchpadX","MIDIOUT2 (LPX MIDI)":"LaunchpadX","Launchpad Mini In":"LaunchpadMini","Launchpad Mini Out":"LaunchpadMini","LPMiniMK3 MIDI In":"LaunchpadMiniMk3","LPMiniMK3 MIDI Out":"LaunchpadMiniMk3"},$9066c94fd6c8e22f$export$56d196d2844d1ca1={p:13,r:9,n:45,b:37,q:53,k:49,white:3,dim_white:1,black:0,movable:21,moved:89,check:5,brown:83},$9066c94fd6c8e22f$export$a17043daf8ba543f=(e,t)=>({nToLaunch:t=>(e.invert()&&(t=63-t),11+(t>>3)*10+t%8),launchToN:t=>{/** Convert a Launchpad MIDI number into 0-63 for chess squares.
     * @param {int} l - Launchpad MIDI number
     */if((t-11)%10==8)return null;let n=8*Math.floor((t-11)/10)+(t-11)%10;return e.invert()?63-n:n},squareToN:e=>(Number(e[1])-1)*8+e.charCodeAt(0)-97,nToSquare:e=>String.fromCharCode(97+e%8,49+(e>>3)),toggleLive:n=>{!0===n?e.connected=!0:!1===n?e.connected=!1:e.connected=!e.connected,t.sendSysex($9066c94fd6c8e22f$export$c6f17c29808f1b66,[...e.header,e.changeLayout,e.connected?e.layout[1]:e.layout[0]])},clear:()=>{for(var n=0;n<64;n++)t.send($9066c94fd6c8e22f$export$9dae6f82820323cf,[t.nToLaunch(n),0]);e.top.forEach((e,n)=>{t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[e,0])})},grid:()=>{for(let e=0;e<8;e++)for(let n=0;n<8;n++)t.send($9066c94fd6c8e22f$export$9dae6f82820323cf,[11+n+10*e,(n+e)%2==0?0:1])},lightMatrix:e=>{for(let n=0;n<8;n++)for(let i=0;i<8;i++)t.send($9066c94fd6c8e22f$export$9dae6f82820323cf,[11+i+10*n,e[i+8*n]])},lightGame:(n=!1)=>{let i=e.chess.board();for(let n=0;n<64;n++){let r;let o=0,a=t.nToLaunch(n);i[63-n>>3][n%8]?(r=i[63-n>>3][n%8],e.pieces?(o=$9066c94fd6c8e22f$export$56d196d2844d1ca1[r.type],"b"==r.color&&(o+=2)):e.grid&&(o=(n+(n>>3))%2==0?0:1)):(r=null,e.grid&&(o=(n+(n>>3))%2==0?0:1)),// console.log(i, piece, l)
    // console.log(NOTE_ON, l, c)
    t.send($9066c94fd6c8e22f$export$9dae6f82820323cf,[a,o])}let r=e.chess.history();for(let i=0;i<Math.min(r.length,e.history());i++)t.highlightMove(i,n)},highlightMove:(n,i=!1)=>{let r=e.chess.history({verbose:!0}).reverse()[n];if(r){console.log("lastmove ",r);let n=r.from,o=r.to;console.log("highlighting",r,n,o);let a=$d5ffb40ab7d69c90$export$dfb56f6b9abe10bc(n,o);// Add an extra final square to the animation list
    // so the piece holds on the final square before restarting
    a.push(a[a.length-1]);let s=$9066c94fd6c8e22f$export$56d196d2844d1ca1[r.piece];"b"==r.color&&(s+=2),i&&t.animatePath(a,s,0),e.chess.isCheck()&&t.highlightCheck(),e.chess.isCheckmate()&&t.highlightCheckmate()}},animatePath:(n,i,r)=>{// console.log('animating path', path, step)
    let o=n.splice(r,1)[0];n.forEach((e,n)=>{t.send(2|$9066c94fd6c8e22f$export$9dae6f82820323cf,[t.nToLaunch(8*e.y+e.x),$9066c94fd6c8e22f$export$56d196d2844d1ca1.moved])}),t.send(2|$9066c94fd6c8e22f$export$9dae6f82820323cf,[t.nToLaunch(8*o.y+o.x),i]),n.splice(r,0,o),// console.log('path', path.length)
    e.animations.push(setTimeout(t.animatePath,e.animationDuration,n,i,(r+1)%n.length))},clearAnimations:()=>{e.animations.forEach((e,t)=>{clearTimeout(e)})},highlightCheck:()=>{let n=$236ba31c448bdb87$export$f784c029d2bce31b(e.chess,{type:"k",color:e.chess.turn()})[0];console.log("check!",n),t.send(1|$9066c94fd6c8e22f$export$9dae6f82820323cf,[t.nToLaunch(t.squareToN(n)),$9066c94fd6c8e22f$export$56d196d2844d1ca1.check])},highlightCheckmate:()=>{let n=$236ba31c448bdb87$export$f784c029d2bce31b(e.chess,{type:"k",color:e.chess.turn()})[0];console.log("mate!",n),t.send($9066c94fd6c8e22f$export$9dae6f82820323cf,[t.nToLaunch(t.squareToN(n)),$9066c94fd6c8e22f$export$56d196d2844d1ca1.check])},highlightAvailableMoves:n=>{let i=t.nToLaunch(t.squareToN(n));console.log("highlighting",n,i,t.squareToN(n)),t.send(1|$9066c94fd6c8e22f$export$9dae6f82820323cf,[i,$9066c94fd6c8e22f$export$56d196d2844d1ca1.movable]);let r=e.chess.moves({square:n,verbose:!0});console.log("possible moves",r),r.forEach((n,i)=>{e.chess.get(n.to)?// console.log('capture', actions.nToLaunch(actions.squareToN(p.to)))
    t.send(1|$9066c94fd6c8e22f$export$9dae6f82820323cf,[t.nToLaunch(t.squareToN(n.to)),$9066c94fd6c8e22f$export$56d196d2844d1ca1.movable]):t.send(2|$9066c94fd6c8e22f$export$9dae6f82820323cf,[t.nToLaunch(t.squareToN(n.to)),$9066c94fd6c8e22f$export$56d196d2844d1ca1.movable])})}}),$9066c94fd6c8e22f$export$726be47e50c912d1=(e,t)=>(e.header=[2,12],e.changeLayout=14,e.layout=[0,1],{...$9066c94fd6c8e22f$export$a17043daf8ba543f(e,t)}),$9066c94fd6c8e22f$export$fef6b4cfd4f0cac0=(e,t)=>(e.header=[2,16],e.changeLayout=44,e.layout=[0,3],{...$9066c94fd6c8e22f$export$a17043daf8ba543f(e,t)}),$9066c94fd6c8e22f$export$e078d1c822b6d179=(e,t)=>(e.header=[2,13],e.changeLayout=14,e.layout=[0,1],{...$9066c94fd6c8e22f$export$cb572084ac15dab5(e,t)}),$9066c94fd6c8e22f$export$cb572084ac15dab5=(e,t)=>(e.top=$a01e4d144b50218c$export$d02631cccf789723(104,9),e.header=[2,24],e.changeLayout=34,e.layout=[0,0],{...$9066c94fd6c8e22f$export$a17043daf8ba543f(e,t)}),$9066c94fd6c8e22f$export$ceb4afcefeff8d=(e,t)=>(e.changeLayout=14,e.layout=[0,1],{...$9066c94fd6c8e22f$export$a17043daf8ba543f(e,t)}),$9066c94fd6c8e22f$export$20e6038b255aa41=(e,t)=>({...$9066c94fd6c8e22f$export$a17043daf8ba543f(e,t),nToLaunch:t=>/** Convert a 0-63 chess square into a Launchpad MIDI number
     * @param {int} n - 0-63, chess square
     */e.invert()?8-t%8+(t>>3)*16:112+t%8-(t>>3)*16,launchToN:t=>/** Convert a Launchpad MIDI number into 0-63 for chess squares.
     * The original Launchpad uses a different grid numbering system than mk2+ Launchpads
     * @param {int} l - Launchpad MIDI number
     */e.invert()?8*Math.floor(t/16)+7-(t%8>>3):(7-Math.floor(t/16))*8+(t%8>>3),toggleLive:n=>{!0===n?e.connected=!0:!1===n?e.connected=!1:e.connected=!e.connected,t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[0,e.connected?1:2])},lightMatrix:e=>{for(let n=0;n<8;n++)for(let i=0;i<8;i++)t.send($9066c94fd6c8e22f$export$9dae6f82820323cf,[t.nToLaunch(i+8*n),e[i+8*n]])}}),$9066c94fd6c8e22f$export$4586496351d727fb={Launchpad:$9066c94fd6c8e22f$export$20e6038b255aa41,LaunchpadS:$9066c94fd6c8e22f$export$20e6038b255aa41,LaunchpadMk2:$9066c94fd6c8e22f$export$cb572084ac15dab5,LaunchpadX:$9066c94fd6c8e22f$export$726be47e50c912d1,LaunchpadMini:$9066c94fd6c8e22f$export$e078d1c822b6d179,LaunchpadMiniMk3:$9066c94fd6c8e22f$export$ceb4afcefeff8d,LaunchpadPro:$9066c94fd6c8e22f$export$fef6b4cfd4f0cac0};var $6ff984c8b6ecdbd9$exports={},$1e857081292cf176$exports={};$1e857081292cf176$exports={};var $6ff984c8b6ecdbd9$var$ndjsonStream=function(e){// For cancellation
var t,n=!1;return new ReadableStream({start:function(i){var r=e.getReader();t=r;var o=new TextDecoder,a="";r.read().then(function e(t){if(t.done){if(n)return;if(0!==(a=a.trim()).length)try{var s=JSON.parse(a);i.enqueue(s)}catch(e){i.error(e);return}i.close();return}for(var l=o.decode(t.value,{stream:!0}),c=(a+=l).split("\n"),u=0;u<c.length-1;++u){var h=c[u].trim();if(h.length>0)try{var d=JSON.parse(h);i.enqueue(d)}catch(e){i.error(e),n=!0,r.cancel();return}}return a=c[c.length-1],r.read().then(e)})},cancel:function(e){console.log("Cancel registered due to ",e),n=!0,t.cancel()}})};$6ff984c8b6ecdbd9$exports=$1e857081292cf176$exports.ndjsonStream=$6ff984c8b6ecdbd9$var$ndjsonStream;var $134912d8b38e370d$exports={},$134912d8b38e370d$var$runtime=function(e){var t,n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{// IE 8 has a broken Object.defineProperty that only works on DOM objects.
c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=Object.create((t&&t.prototype instanceof g?t:g).prototype);return(// The ._invoke method unifies the implementations of the .next,
// .throw, and .return methods.
r(o,"_invoke",{value:N(e,n,new T(i||[]))}),o)}// Try/catch helper to minimize deoptimizations. Returns a completion
// record like context.tryEntries[i].completion. This interface could
// have been (and was previously) designed to take a closure to be
// invoked without arguments, but in all the cases we care about we
// already have an existing method we want to call, so there's no need
// to create a new function object. We can even get away with assuming
// the method takes exactly one argument, since that happens to be true
// in every case, so we don't have to touch the arguments object. The
// only additional allocation required is the completion record, which
// has a stable shape and so hopefully should be cheap to allocate.
function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",y={};// Dummy constructor functions that we use as the .constructor and
// .constructor.prototype properties for functions that return Generator
// objects. For full spec compliance, you may wish to configure your
// minifier not to mangle the names of these two functions.
function g(){}function v(){}function b(){}// This is a polyfill for %IteratorPrototype% for environments that
// don't natively support it.
var x={};c(x,a,function(){return this});var _=Object.getPrototypeOf,E=_&&_(_(I([])));E&&E!==n&&i.call(E,a)&&// of the polyfill.
(x=E);var w=b.prototype=g.prototype=Object.create(x);// Helper for defining the .next, .throw, and .return methods of the
// Iterator interface in terms of a single ._invoke method.
function M(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var n;function o(n,r,a,s){var l=h(e[n],e,r);if("throw"===l.type)s(l.arg);else{var c=l.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then(function(e){o("next",e,a,s)},function(e){o("throw",e,a,s)}):t.resolve(u).then(function(e){// When a yielded Promise is resolved, its final value becomes
// the .value of the Promise<{value,done}> result for the
// current iteration.
c.value=e,a(c)},function(e){// If a rejected Promise was yielded, throw the rejection back
// into the async generator function so it can be handled there.
return o("throw",e,a,s)})}}// Define the unified helper method that is used to implement .next,
// .throw, and .return (see defineIteratorMethods).
r(this,"_invoke",{value:function(e,i){function r(){return new t(function(t,n){o(e,i,t,n)})}return n=// all previous Promises have been resolved before calling invoke,
// so that results are always delivered in the correct order. If
// enqueue has not been called before, then it is important to
// call invoke immediately, without waiting on a callback to fire,
// so that the async generator function has the opportunity to do
// any necessary setup in a predictable way. This predictability
// is why the Promise constructor synchronously invokes its
// executor callback, and why async functions synchronously
// execute code before the first await. Since we implement simple
// async functions in terms of async generators, it is especially
// important to get this right, even though it requires care.
n?n.then(r,// invocations of the iterator.
r):r()}})}function N(e,t,n){var i=d;return function(r,o){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===r)throw o;// Be forgiving, per 25.3.3.3.3 of the spec:
// https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
return O()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)// function.sent implementation.
n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=h(e,t,n);if("normal"===l.type){if(// If an exception is thrown from innerFn, we leave state ===
// GenStateExecuting and loop back for another invocation.
i=n.done?m:p,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=m,// Dispatch the exception by looping back around to the
// context.dispatchException(context.arg) call above.
n.method="throw",n.arg=l.arg)}}}// Call delegate.iterator[context.method](context.arg) and handle the
// result, either by returning a { value, done } result from the
// delegate iterator, or by modifying context.method and context.arg,
// setting context.delegate to null, and returning the ContinueSentinel.
function A(e,n){var i=n.method,r=e.iterator[i];if(r===t)return(// A .throw or .return when the delegate iterator has no .throw
// method, or a missing .next mehtod, always terminate the
// yield* loop.
n.delegate=null,"throw"===i&&e.iterator.return&&(// If the delegate iterator has a return method, give it a
// chance to clean up.
n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),y);var o=h(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(// Assign the result of the finished delegate to the temporary
// variable specified by delegate.resultName (see delegateYield).
n[e.resultName]=a.value,// Resume execution at the desired location (see delegateYield).
n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),// The delegate iterator is finished, so forget it and continue with
// the outer generator.
n.delegate=null,y):a:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,y)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){// The root entry object (effectively a try statement without a catch
// or a finally block) gives us a place to store values thrown from
// locations where there is no enclosing try statement.
this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(i.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}// Return an iterator with no values.
return{next:O}}function O(){return{value:t,done:!0}}// Regardless of whether this script is executing as a CommonJS module
// or not, return the runtime object so that we can declare the variable
// regeneratorRuntime in the outer scope, which allows this module to be
// injected easily by `bin/regenerator --include-runtime script.js`.
return v.prototype=b,r(w,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===// For the native GeneratorFunction constructor, the best we can
// do is to check its .name property.
(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},// Within the body of any async function, `await x` is transformed to
// `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
// `hasOwn.call(value, "__await")` to determine if the yielded value is
// meant to be awaited.
e.awrap=function(e){return{__await:e}},M(S.prototype),c(S.prototype,s,function(){return this}),e.AsyncIterator=S,// Note that simple async functions are implemented on top of
// AsyncIterator objects; they just return a Promise for the value of
// the final result produced by the iterator.
e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new S(u(t,n,i,r),o);return e.isGeneratorFunction(n)?a// If outerFn is a generator, return the full iterator.
:a.next().then(function(e){return e.done?e.value:a.next()})},// Define Generator.prototype.{next,throw,return} in terms of the
// unified ._invoke helper method.
M(w),c(w,l,"Generator"),// A Generator should always return itself as the iterator object when the
// @@iterator function is called on it. Some browsers' implementations of the
// iterator prototype chain incorrectly implement this, causing the Generator
// object to not be returned from this call. This ensures that doesn't happen.
// See https://github.com/facebook/regenerator/issues/274 for more details.
c(w,a,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);// Rather than returning an object with a next method, we keep
// things simple and return the next function itself.
return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return(// To avoid creating an additional object, we just hang the .value
// and .done properties off the next function object itself. This
// also ensures that the minifier will not anonymize the function.
e.done=!0,e)}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,// Resetting context._sent for legacy support of Babel's
// function.sent implementation.
this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(i,r){return s.type="throw",s.arg=e,n.next=i,r&&(// If the dispatched exception was caught by a catch block,
// then let that catch block handle the exception normally.
n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)// it, so set the completion value of the entire function to
// throw the exception.
return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else if(c){if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&// location outside the try/catch block.
(o=null);var a=o?o.completion:{};return(a.type=e,a.arg=t,o)?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}// The context.catch method must only be called with a location
// argument that corresponds to a known catch block.
throw Error("illegal catch attempt")},delegateYield:function(e,n,i){return this.delegate={iterator:I(e),resultName:n,nextLoc:i},"next"===this.method&&// accidentally pass it on to the delegate.
(this.arg=t),y}},e}($134912d8b38e370d$exports);try{regeneratorRuntime=$134912d8b38e370d$var$runtime}catch(accidentalStrictMode){"object"==typeof globalThis?globalThis.regeneratorRuntime=$134912d8b38e370d$var$runtime:Function("r","regeneratorRuntime = r")($134912d8b38e370d$var$runtime)}const $cae4a8b830b22bcf$export$74a0f09caf74d623=[5,121,9,11,15,1,23,37,45,49,69],$cae4a8b830b22bcf$export$683788d28fb74d54=(e,t)=>({lightBoard:(n=!1)=>{t.clearAnimations(),e.chess?e.influence?t.showInfluence():t.lightGame(n):e.grid&&t.grid(),t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[e.top[0],Math.min(e.history()+1,3)]),t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[e.top[1],Math.min(e.history(),3)]),t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[e.top[2],67]),t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[e.top[4],e.invert()?$9066c94fd6c8e22f$export$56d196d2844d1ca1.brown:3]),t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[e.top[5],e.grid?$9066c94fd6c8e22f$export$56d196d2844d1ca1.white:$9066c94fd6c8e22f$export$56d196d2844d1ca1.dim_white]),t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[e.top[6],e.pieces?$9066c94fd6c8e22f$export$56d196d2844d1ca1.q:82]),// actions.send(CONTROL_CHANGE, [state.top[7], state.influence ? 5 : 7])
    t.send($9066c94fd6c8e22f$export$d265beb1ee5d4530,[e.top[e.top.length-1],"w"==e.chess.turn()?3:$9066c94fd6c8e22f$export$56d196d2844d1ca1.brown])},togglePieces:(n=null)=>{e.pieces=n||!e.pieces,e.ground.set({drawable:{visible:!1}}),t.lightBoard()},flipBoard:()=>{e.invert(!e.invert()),t.lightBoard(),// if (ground)
    e.ground.toggleOrientation();// m.redraw()
    },showInfluence:()=>{let n=e.chess.fen(),i=$236ba31c448bdb87$export$a23e9f71e3b927c7(n),r=$236ba31c448bdb87$export$a23e9f71e3b927c7($236ba31c448bdb87$export$def19b3072191111(n));console.log(n,i,r);let o=i.map((e,t)=>e-r[t]);console.log("heatmap",o);let a=o.map((t,n)=>{let i=Math.min(t+5,9);return $cae4a8b830b22bcf$export$74a0f09caf74d623[e.chess.turn()==e.color?i:10-i]});e.invert()!=("b"==e.color)&&a.reverse(),console.log("colorMap",// reverse ranks
    a=a.map((e,t)=>a[(7-Math.floor(t/8))*8+t%8])),t.lightMatrix(a)},newGame:()=>{e.chess=new $6eb582f9081eb7e5$export$a4d6ea685c300d39,$d5ffb40ab7d69c90$export$8aee836dd884f091(e.chess,e.ground)},onInput:n=>{if(console.log("input",n=n.data),n[2]){let i=t.launchToN(n[1]);if(null===i)return;let r=t.nToSquare(i);console.log("touched",i);let o=e.chess.moves({verbose:!0});if(console.log("legal moves",o),e.selectedSquare&&t.squareToN(e.selectedSquare)==i?(// clear selected piece
    t.lightBoard(),e.selectedSquare=null,e.ground.selectSquare(null)):e.chess.get(r)&&e.chess.get(r).color==e.chess.turn()?(e.selectedSquare&&(// clear other selected piece
    t.lightBoard(),e.selectedSquare=null,e.ground.selectSquare(null)),console.log("checking",r,e.chess.get(r)),e.chess.get(r)&&e.chess.get(r).color==e.chess.turn()&&(// select piece
    e.selectedSquare=r,e.selectedPiece=e.chess.get(r),e.ground.selectSquare(e.selectedSquare),t.highlightAvailableMoves(e.selectedSquare))):e.chess.history().length&&i==t.squareToN(e.chess.history({verbose:!0}).pop().to)&&(console.log("clear animations and resend current position"),t.lightBoard()),e.selectedSquare){// move selected to square
    let n={from:e.selectedSquare,to:r};console.log("checking if ",n," is legal");let i=e.chess.moves({square:e.selectedSquare,verbose:!0}).map(e=>e.to);i.includes(n.to)?t.makeMove(n):console.log("illegal move",n)}}},onCC:n=>{if((n=n.data)[2])switch(console.log("cc",n),n[1]){case e.top[0]:// up arrow
    // increase history
    t.incrementHistory();break;case e.top[1]:// down arrow
    // decreace history
    t.decrementHistory();break;case e.top[2]:// left arrow
    // undo move
    t.takeback();break;case e.top[4]:// Session button
    // flip board
    t.flipBoard(),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).redraw();break;case e.top[5]:// Custom button
    // Toggle grid
    e.grid=!e.grid,t.lightBoard();break;case e.top[6]:// Note button
    // Toggle pieces
    e.pieces=!e.pieces,t.lightBoard();break;case e.top[7]:// Custom Midi
    // toggle square influence / game
    t.toggleInfluence()}},toggleInfluence:()=>{e.influence=!e.influence,t.lightBoard()},streamGame:()=>{e.loggedIn||/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/login"),console.log("streaming game",/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.param("id")),e.auth.openStream("/api/board/game/stream/"+/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.param("id"),{},n=>{console.log("calling back",n),"gameFull"==n.type?(e.game=n,// TODO: change to Stream()
    // m.redraw()
    console.log("loading game",n.state.moves),console.log("loaded?",e.chess.loadPgn(n.state.moves,{sloppy:!0})),n.black.id!=e.user.profile.id||e.invert()?e.color="w":(// if playing black, and not already inverted, flip board
    t.flipBoard(),e.color="b")):"gameState"==n.type&&(console.log("move played",n.moves),console.log("loaded?",e.chess.loadPgn(n.moves,{sloppy:!0}))),console.log("updated. turn is","w"==e.chess.turn()?"white":"black"),$d5ffb40ab7d69c90$export$8aee836dd884f091(e.chess,e.ground),t.lightBoard(!0)})},newGame:()=>{e.chess=new $6eb582f9081eb7e5$export$a4d6ea685c300d39,console.log("new game",e.chess.ascii()),$d5ffb40ab7d69c90$export$8aee836dd884f091(e.chess,e.ground),e.ground.selectSquare(null),t.lightBoard()},makeMove:t=>{e.ground.move(t.from,t.to),e.ground.selectSquare(null)},onmove:(n,i)=>{let r={from:n,to:i},o=e.chess.get(r.from);"p"==o.type&&("w"==o.color&&8==r.to.charAt(1)||"b"==o.color&&1==r.to.charAt(1))&&(console.log("promotion! Auto promote to Queen"),r.promotion="q"),e.chess.move(r),console.log("moved",r,o,e.chess.ascii()),e.ground.set({fen:e.chess.fen()}),t.lightBoard(!0),$d5ffb40ab7d69c90$export$5b50b356a8724b72(e.chess,e.ground)(n,i)},afterInit:()=>{t.initMidi(t.onInput,t.onCC,()=>{t.lightBoard()})},takeback:()=>{e.chess.undo(),e.selectedPiece,e.selectedSquare=null,e.ground.set({fen:e.chess.fen()}),t.lightBoard(),$d5ffb40ab7d69c90$export$8aee836dd884f091(e.chess,e.ground)}}),$bb75f90500322e40$export$21a94553ffa41578=(e,t)=>({oninit:t=>{e.loggedIn()&&(console.log("already logged in. Not sure how we got here."),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/"))},view:e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("",{onclick:t.login},/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i",{},"Login with lichess"))}),$f00dad157732f88c$export$8f45430ccf837300=["white","black"],$f00dad157732f88c$export$3a444357c5f65f65=["a","b","c","d","e","f","g","h"],$f00dad157732f88c$export$d8e4e3952f325c95=["1","2","3","4","5","6","7","8"],$dbbfaf35dad95b1f$export$978f7ef4c67d166e=[...$f00dad157732f88c$export$d8e4e3952f325c95].reverse(),$dbbfaf35dad95b1f$export$ade7a30951d0bc54=Array.prototype.concat(...$f00dad157732f88c$export$3a444357c5f65f65.map(e=>$f00dad157732f88c$export$d8e4e3952f325c95.map(t=>e+t))),$dbbfaf35dad95b1f$export$fe9f8b727818c0ae=e=>$dbbfaf35dad95b1f$export$ade7a30951d0bc54[8*e[0]+e[1]],$dbbfaf35dad95b1f$export$e2878eba51f22d11=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],$dbbfaf35dad95b1f$export$26773b74d67e09c2=$dbbfaf35dad95b1f$export$ade7a30951d0bc54.map($dbbfaf35dad95b1f$export$e2878eba51f22d11);function $dbbfaf35dad95b1f$export$7c73462e0d25e514(e){let t;let n=()=>(void 0===t&&(t=e()),t);return n.clear=()=>{t=void 0},n}const $dbbfaf35dad95b1f$export$9dc4ecf953986f04=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;let t=performance.now()-e;return e=void 0,t}}},$dbbfaf35dad95b1f$export$a27c3a1c44ba515b=e=>"white"===e?"black":"white",$dbbfaf35dad95b1f$export$e4884e1734dcd545=(e,t)=>{let n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},$dbbfaf35dad95b1f$export$e329b1a538c004fa=(e,t)=>e.role===t.role&&e.color===t.color,$dbbfaf35dad95b1f$export$2135ad75550a2ff4=e=>(t,n)=>[(n?t[0]:7-t[0])*e.width/8,(n?7-t[1]:t[1])*e.height/8],$dbbfaf35dad95b1f$export$d73ee8ef04f5226a=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},$dbbfaf35dad95b1f$export$f8afaca97e230dc6=(e,t,n=1)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px) scale(${n})`},$dbbfaf35dad95b1f$export$8cb512849e51eaf5=(e,t)=>{e.style.visibility=t?"visible":"hidden"},$dbbfaf35dad95b1f$export$33052595192f7117=e=>{var t;return e.clientX||0===e.clientX?[e.clientX,e.clientY]:(null===(t=e.targetTouches)||void 0===t?void 0:t[0])?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},$dbbfaf35dad95b1f$export$947a472b5b3020ba=e=>2===e.buttons||2===e.button,$dbbfaf35dad95b1f$export$3d7cd8ed57263b30=(e,t)=>{let n=document.createElement(e);return t&&(n.className=t),n};function $dbbfaf35dad95b1f$export$1c17f680299a31f7(e,t,n){let i=$dbbfaf35dad95b1f$export$e2878eba51f22d11(e);return t||(i[0]=7-i[0],i[1]=7-i[1]),[n.left+n.width*i[0]/8+n.width/16,n.top+n.height*(7-i[1])/8+n.height/16]}const $9edb68138fa5ce8d$var$diff=(e,t)=>Math.abs(e-t),$9edb68138fa5ce8d$var$pawn=e=>(t,n,i,r)=>2>$9edb68138fa5ce8d$var$diff(t,i)&&("white"===e?r===n+1||n<=1&&r===n+2&&t===i:r===n-1||n>=6&&r===n-2&&t===i),$9edb68138fa5ce8d$export$5584fb45fd3a6d08=(e,t,n,i)=>{let r=$9edb68138fa5ce8d$var$diff(e,n),o=$9edb68138fa5ce8d$var$diff(t,i);return 1===r&&2===o||2===r&&1===o},$9edb68138fa5ce8d$var$bishop=(e,t,n,i)=>$9edb68138fa5ce8d$var$diff(e,n)===$9edb68138fa5ce8d$var$diff(t,i),$9edb68138fa5ce8d$var$rook=(e,t,n,i)=>e===n||t===i,$9edb68138fa5ce8d$export$b9d1aa6d9cf991c6=(e,t,n,i)=>$9edb68138fa5ce8d$var$bishop(e,t,n,i)||$9edb68138fa5ce8d$var$rook(e,t,n,i),$9edb68138fa5ce8d$var$king=(e,t,n)=>(i,r,o,a)=>2>$9edb68138fa5ce8d$var$diff(i,o)&&2>$9edb68138fa5ce8d$var$diff(r,a)||n&&r===a&&r===("white"===e?0:7)&&(4===i&&(2===o&&t.includes(0)||6===o&&t.includes(7))||t.includes(o));function $9edb68138fa5ce8d$var$rookFilesOf(e,t){let n="white"===t?"1":"8",i=[];for(let[r,o]of e)r[1]===n&&o.color===t&&"rook"===o.role&&i.push($dbbfaf35dad95b1f$export$e2878eba51f22d11(r)[0]);return i}function $9edb68138fa5ce8d$export$99ff1a176ab1ff90(e,t,n){let i=e.get(t);if(!i)return[];let r=$dbbfaf35dad95b1f$export$e2878eba51f22d11(t),o=i.role,a="pawn"===o?$9edb68138fa5ce8d$var$pawn(i.color):"knight"===o?$9edb68138fa5ce8d$export$5584fb45fd3a6d08:"bishop"===o?$9edb68138fa5ce8d$var$bishop:"rook"===o?$9edb68138fa5ce8d$var$rook:"queen"===o?$9edb68138fa5ce8d$export$b9d1aa6d9cf991c6:$9edb68138fa5ce8d$var$king(i.color,$9edb68138fa5ce8d$var$rookFilesOf(e,i.color),n);return $dbbfaf35dad95b1f$export$26773b74d67e09c2.filter(e=>(r[0]!==e[0]||r[1]!==e[1])&&a(r[0],r[1],e[0],e[1])).map($dbbfaf35dad95b1f$export$fe9f8b727818c0ae)}function $80f8b45278b0164a$export$6511920ae9f0cd34(e,...t){e&&setTimeout(()=>e(...t),1)}function $80f8b45278b0164a$export$e798007c48b456cd(e){e.orientation=$dbbfaf35dad95b1f$export$a27c3a1c44ba515b(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0}function $80f8b45278b0164a$export$20a063d1402ff7ff(e,t){for(let[n,i]of t)i?e.pieces.set(n,i):e.pieces.delete(n)}function $80f8b45278b0164a$export$6503933b06013bb6(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(let[n,i]of e.pieces)"king"===i.role&&i.color===t&&(e.check=n)}function $80f8b45278b0164a$var$setPremove(e,t,n,i){$80f8b45278b0164a$export$9e6f418e5ea6b92c(e),e.premovable.current=[t,n],$80f8b45278b0164a$export$6511920ae9f0cd34(e.premovable.events.set,t,n,i)}function $80f8b45278b0164a$export$f92a111f74a3f7c7(e){e.premovable.current&&(e.premovable.current=void 0,$80f8b45278b0164a$export$6511920ae9f0cd34(e.premovable.events.unset))}function $80f8b45278b0164a$var$setPredrop(e,t,n){$80f8b45278b0164a$export$f92a111f74a3f7c7(e),e.predroppable.current={role:t,key:n},$80f8b45278b0164a$export$6511920ae9f0cd34(e.predroppable.events.set,t,n)}function $80f8b45278b0164a$export$9e6f418e5ea6b92c(e){let t=e.predroppable;t.current&&(t.current=void 0,$80f8b45278b0164a$export$6511920ae9f0cd34(t.events.unset))}function $80f8b45278b0164a$var$tryAutoCastle(e,t,n){if(!e.autoCastle)return!1;let i=e.pieces.get(t);if(!i||"king"!==i.role)return!1;let r=$dbbfaf35dad95b1f$export$e2878eba51f22d11(t),o=$dbbfaf35dad95b1f$export$e2878eba51f22d11(n);if(0!==r[1]&&7!==r[1]||r[1]!==o[1])return!1;4!==r[0]||e.pieces.has(n)||(6===o[0]?n=$dbbfaf35dad95b1f$export$fe9f8b727818c0ae([7,o[1]]):2===o[0]&&(n=$dbbfaf35dad95b1f$export$fe9f8b727818c0ae([0,o[1]])));let a=e.pieces.get(n);return!!a&&a.color===i.color&&"rook"===a.role&&(e.pieces.delete(t),e.pieces.delete(n),r[0]<o[0]?(e.pieces.set($dbbfaf35dad95b1f$export$fe9f8b727818c0ae([6,o[1]]),i),e.pieces.set($dbbfaf35dad95b1f$export$fe9f8b727818c0ae([5,o[1]]),a)):(e.pieces.set($dbbfaf35dad95b1f$export$fe9f8b727818c0ae([2,o[1]]),i),e.pieces.set($dbbfaf35dad95b1f$export$fe9f8b727818c0ae([3,o[1]]),a)),!0)}function $80f8b45278b0164a$export$13f6ca6271343510(e,t,n){let i=e.pieces.get(t),r=e.pieces.get(n);if(t===n||!i)return!1;let o=r&&r.color!==i.color?r:void 0;return n===e.selected&&$80f8b45278b0164a$export$fe412c270a34f415(e),$80f8b45278b0164a$export$6511920ae9f0cd34(e.events.move,t,n,o),$80f8b45278b0164a$var$tryAutoCastle(e,t,n)||(e.pieces.set(n,i),e.pieces.delete(t)),e.lastMove=[t,n],e.check=void 0,$80f8b45278b0164a$export$6511920ae9f0cd34(e.events.change),o||!0}function $80f8b45278b0164a$export$13886f9573facc29(e,t,n,i){if(e.pieces.has(n)){if(!i)return!1;e.pieces.delete(n)}return $80f8b45278b0164a$export$6511920ae9f0cd34(e.events.dropNewPiece,t,n),e.pieces.set(n,t),e.lastMove=[n],e.check=void 0,$80f8b45278b0164a$export$6511920ae9f0cd34(e.events.change),e.movable.dests=void 0,e.turnColor=$dbbfaf35dad95b1f$export$a27c3a1c44ba515b(e.turnColor),!0}function $80f8b45278b0164a$var$baseUserMove(e,t,n){let i=$80f8b45278b0164a$export$13f6ca6271343510(e,t,n);return i&&(e.movable.dests=void 0,e.turnColor=$dbbfaf35dad95b1f$export$a27c3a1c44ba515b(e.turnColor),e.animation.current=void 0),i}function $80f8b45278b0164a$export$843c446e2e718822(e,t,n){if($80f8b45278b0164a$export$a4ef2b0c3fa55ad2(e,t,n)){let i=$80f8b45278b0164a$var$baseUserMove(e,t,n);if(i){let r=e.hold.stop();$80f8b45278b0164a$export$fe412c270a34f415(e);let o={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:r};return!0!==i&&(o.captured=i),$80f8b45278b0164a$export$6511920ae9f0cd34(e.movable.events.after,t,n,o),!0}}else if($80f8b45278b0164a$var$canPremove(e,t,n))return $80f8b45278b0164a$var$setPremove(e,t,n,{ctrlKey:e.stats.ctrlKey}),$80f8b45278b0164a$export$fe412c270a34f415(e),!0;return $80f8b45278b0164a$export$fe412c270a34f415(e),!1}function $80f8b45278b0164a$export$b2b9f46b948033b0(e,t,n,i){let r=e.pieces.get(t);r&&($80f8b45278b0164a$var$canDrop(e,t,n)||i)?(e.pieces.delete(t),$80f8b45278b0164a$export$13886f9573facc29(e,r,n,i),$80f8b45278b0164a$export$6511920ae9f0cd34(e.movable.events.afterNewPiece,r.role,n,{premove:!1,predrop:!1})):r&&$80f8b45278b0164a$var$canPredrop(e,t,n)?$80f8b45278b0164a$var$setPredrop(e,r.role,n):($80f8b45278b0164a$export$f92a111f74a3f7c7(e),$80f8b45278b0164a$export$9e6f418e5ea6b92c(e)),e.pieces.delete(t),$80f8b45278b0164a$export$fe412c270a34f415(e)}function $80f8b45278b0164a$export$6073914ea697a63e(e,t,n){if($80f8b45278b0164a$export$6511920ae9f0cd34(e.events.select,t),e.selected){if(e.selected!==t||e.draggable.enabled){if((e.selectable.enabled||n)&&e.selected!==t&&$80f8b45278b0164a$export$843c446e2e718822(e,e.selected,t)){e.stats.dragged=!1;return}}else{$80f8b45278b0164a$export$fe412c270a34f415(e),e.hold.cancel();return}}(e.selectable.enabled||e.draggable.enabled)&&($80f8b45278b0164a$var$isMovable(e,t)||$80f8b45278b0164a$var$isPremovable(e,t))&&($80f8b45278b0164a$export$5a4818cec1656a71(e,t),e.hold.start())}function $80f8b45278b0164a$export$5a4818cec1656a71(e,t){e.selected=t,$80f8b45278b0164a$var$isPremovable(e,t)?e.premovable.customDests||(e.premovable.dests=$9edb68138fa5ce8d$export$99ff1a176ab1ff90(e.pieces,t,e.premovable.castle)):e.premovable.dests=void 0}function $80f8b45278b0164a$export$fe412c270a34f415(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function $80f8b45278b0164a$var$isMovable(e,t){let n=e.pieces.get(t);return!!n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}const $80f8b45278b0164a$export$a4ef2b0c3fa55ad2=(e,t,n)=>{var i,r;return t!==n&&$80f8b45278b0164a$var$isMovable(e,t)&&(e.movable.free||!!(null===(r=null===(i=e.movable.dests)||void 0===i?void 0:i.get(t))||void 0===r?void 0:r.includes(n)))};function $80f8b45278b0164a$var$canDrop(e,t,n){let i=e.pieces.get(t);return!!i&&(t===n||!e.pieces.has(n))&&("both"===e.movable.color||e.movable.color===i.color&&e.turnColor===i.color)}function $80f8b45278b0164a$var$isPremovable(e,t){let n=e.pieces.get(t);return!!n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function $80f8b45278b0164a$var$canPremove(e,t,n){var i,r;let o=null!==(r=null===(i=e.premovable.customDests)||void 0===i?void 0:i.get(t))&&void 0!==r?r:$9edb68138fa5ce8d$export$99ff1a176ab1ff90(e.pieces,t,e.premovable.castle);return t!==n&&$80f8b45278b0164a$var$isPremovable(e,t)&&o.includes(n)}function $80f8b45278b0164a$var$canPredrop(e,t,n){let i=e.pieces.get(t),r=e.pieces.get(n);return!!i&&(!r||r.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==i.role||"1"!==n[1]&&"8"!==n[1])&&e.movable.color===i.color&&e.turnColor!==i.color}function $80f8b45278b0164a$export$fe8f97248bbe2d04(e,t){let n=e.pieces.get(t);return!!n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))}function $80f8b45278b0164a$export$d04320a93cdae73d(e){let t=e.premovable.current;if(!t)return!1;let n=t[0],i=t[1],r=!1;if($80f8b45278b0164a$export$a4ef2b0c3fa55ad2(e,n,i)){let t=$80f8b45278b0164a$var$baseUserMove(e,n,i);if(t){let o={premove:!0};!0!==t&&(o.captured=t),$80f8b45278b0164a$export$6511920ae9f0cd34(e.movable.events.after,n,i,o),r=!0}}return $80f8b45278b0164a$export$f92a111f74a3f7c7(e),r}function $80f8b45278b0164a$export$8efa9460c0cedd9e(e,t){let n=e.predroppable.current,i=!1;if(!n)return!1;if(t(n)){let t={role:n.role,color:e.movable.color};$80f8b45278b0164a$export$13886f9573facc29(e,t,n.key)&&($80f8b45278b0164a$export$6511920ae9f0cd34(e.movable.events.afterNewPiece,n.role,n.key,{premove:!1,predrop:!0}),i=!0)}return $80f8b45278b0164a$export$9e6f418e5ea6b92c(e),i}function $80f8b45278b0164a$export$e47a3d6268102bb5(e){$80f8b45278b0164a$export$f92a111f74a3f7c7(e),$80f8b45278b0164a$export$9e6f418e5ea6b92c(e),$80f8b45278b0164a$export$fe412c270a34f415(e)}function $80f8b45278b0164a$export$fa6813432f753b0d(e){e.movable.color=e.movable.dests=e.animation.current=void 0,$80f8b45278b0164a$export$e47a3d6268102bb5(e)}function $80f8b45278b0164a$export$102bdd581884418b(e,t,n){let i=Math.floor(8*(e[0]-n.left)/n.width);t||(i=7-i);let r=7-Math.floor(8*(e[1]-n.top)/n.height);return t||(r=7-r),i>=0&&i<8&&r>=0&&r<8?$dbbfaf35dad95b1f$export$fe9f8b727818c0ae([i,r]):void 0}function $80f8b45278b0164a$export$6ee499125a88eb43(e,t,n,i){let r=$dbbfaf35dad95b1f$export$e2878eba51f22d11(e),o=$dbbfaf35dad95b1f$export$26773b74d67e09c2.filter(e=>$9edb68138fa5ce8d$export$b9d1aa6d9cf991c6(r[0],r[1],e[0],e[1])||$9edb68138fa5ce8d$export$5584fb45fd3a6d08(r[0],r[1],e[0],e[1])),a=o.map(e=>$dbbfaf35dad95b1f$export$1c17f680299a31f7($dbbfaf35dad95b1f$export$fe9f8b727818c0ae(e),n,i)),s=a.map(e=>$dbbfaf35dad95b1f$export$e4884e1734dcd545(t,e)),[,l]=s.reduce((e,t,n)=>e[0]<t?e:[t,n],[s[0],0]);return $dbbfaf35dad95b1f$export$fe9f8b727818c0ae(o[l])}const $80f8b45278b0164a$export$970133fdf67d86cb=e=>"white"===e.orientation,$f37f4d2e14067e5f$export$59ff82fc918bd7e3="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR",$f37f4d2e14067e5f$var$roles={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},$f37f4d2e14067e5f$var$letters={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};function $f37f4d2e14067e5f$export$aafa59e2e03f2942(e){"start"===e&&(e=$f37f4d2e14067e5f$export$59ff82fc918bd7e3);let t=new Map,n=7,i=0;for(let r of e)switch(r){case" ":case"[":return t;case"/":if(--n<0)return t;i=0;break;case"~":{let e=t.get($dbbfaf35dad95b1f$export$fe9f8b727818c0ae([i-1,n]));e&&(e.promoted=!0);break}default:{let e=r.charCodeAt(0);if(e<57)i+=e-48;else{let e=r.toLowerCase();t.set($dbbfaf35dad95b1f$export$fe9f8b727818c0ae([i,n]),{role:$f37f4d2e14067e5f$var$roles[e],color:r===e?"black":"white"}),++i}}}return t}function $f37f4d2e14067e5f$export$68d8715fc104d294(e){return $dbbfaf35dad95b1f$export$978f7ef4c67d166e.map(t=>$f00dad157732f88c$export$3a444357c5f65f65.map(n=>{let i=e.get(n+t);if(!i)return"1";{let e=$f37f4d2e14067e5f$var$letters[i.role];return"white"===i.color&&(e=e.toUpperCase()),i.promoted&&(e+="~"),e}}).join("")).join("/").replace(/1{2,}/g,e=>e.length.toString())}function $fe7eac34876cd925$export$d771543c4ed87064(e,t){t.animation&&($fe7eac34876cd925$var$deepMerge(e.animation,t.animation),70>(e.animation.duration||0)&&(e.animation.enabled=!1))}function $fe7eac34876cd925$export$8d21e34596265fa2(e,t){var n,i,r;if((null===(n=t.movable)||void 0===n?void 0:n.dests)&&(e.movable.dests=void 0),(null===(i=t.drawable)||void 0===i?void 0:i.autoShapes)&&(e.drawable.autoShapes=[]),$fe7eac34876cd925$var$deepMerge(e,t),t.fen&&(e.pieces=$f37f4d2e14067e5f$export$aafa59e2e03f2942(t.fen),e.drawable.shapes=(null===(r=t.drawable)||void 0===r?void 0:r.shapes)||[]),"check"in t&&$80f8b45278b0164a$export$6503933b06013bb6(e,t.check||!1),"lastMove"in t&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&$80f8b45278b0164a$export$5a4818cec1656a71(e,e.selected),$fe7eac34876cd925$export$d771543c4ed87064(e,t),!e.movable.rookCastle&&e.movable.dests){let t="white"===e.movable.color?"1":"8",n="e"+t,i=e.movable.dests.get(n),r=e.pieces.get(n);if(!i||!r||"king"!==r.role)return;e.movable.dests.set(n,i.filter(e=>!(e==="a"+t&&i.includes("c"+t))&&!(e==="h"+t&&i.includes("g"+t))))}}function $fe7eac34876cd925$var$deepMerge(e,t){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)&&$fe7eac34876cd925$var$isPlainObject(e[n])&&$fe7eac34876cd925$var$isPlainObject(t[n])?$fe7eac34876cd925$var$deepMerge(e[n],t[n]):e[n]=t[n])}function $fe7eac34876cd925$var$isPlainObject(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}const $b81ba4ea6c3c4676$export$bd46b8ab3689edc4=(e,t)=>t.animation.enabled?$b81ba4ea6c3c4676$var$animate(e,t):$b81ba4ea6c3c4676$export$b3890eb0ae9dca99(e,t);function $b81ba4ea6c3c4676$export$b3890eb0ae9dca99(e,t){let n=e(t);return t.dom.redraw(),n}const $b81ba4ea6c3c4676$var$makePiece=(e,t)=>({key:e,pos:$dbbfaf35dad95b1f$export$e2878eba51f22d11(e),piece:t}),$b81ba4ea6c3c4676$var$closer=(e,t)=>t.sort((t,n)=>$dbbfaf35dad95b1f$export$e4884e1734dcd545(e.pos,t.pos)-$dbbfaf35dad95b1f$export$e4884e1734dcd545(e.pos,n.pos))[0];function $b81ba4ea6c3c4676$var$computePlan(e,t){let n,i,r;let o=new Map,a=[],s=new Map,l=[],c=[],u=new Map;for(let[t,n]of e)u.set(t,$b81ba4ea6c3c4676$var$makePiece(t,n));for(let e of $dbbfaf35dad95b1f$export$ade7a30951d0bc54)n=t.pieces.get(e),i=u.get(e),n?i?$dbbfaf35dad95b1f$export$e329b1a538c004fa(n,i.piece)||(l.push(i),c.push($b81ba4ea6c3c4676$var$makePiece(e,n))):c.push($b81ba4ea6c3c4676$var$makePiece(e,n)):i&&l.push(i);for(let e of c)(i=$b81ba4ea6c3c4676$var$closer(e,l.filter(t=>$dbbfaf35dad95b1f$export$e329b1a538c004fa(e.piece,t.piece))))&&(r=[i.pos[0]-e.pos[0],i.pos[1]-e.pos[1]],o.set(e.key,r.concat(r)),a.push(i.key));for(let e of l)a.includes(e.key)||s.set(e.key,e.piece);return{anims:o,fadings:s}}function $b81ba4ea6c3c4676$var$step(e,t){let n=e.animation.current;if(void 0===n){e.dom.destroyed||e.dom.redrawNow();return}let i=1-(t-n.start)*n.frequency;if(i<=0)e.animation.current=void 0,e.dom.redrawNow();else{let t=$b81ba4ea6c3c4676$var$easing(i);for(let e of n.plan.anims.values())e[2]=e[0]*t,e[3]=e[1]*t;e.dom.redrawNow(!0),requestAnimationFrame((t=performance.now())=>$b81ba4ea6c3c4676$var$step(e,t))}}function $b81ba4ea6c3c4676$var$animate(e,t){// clone state before mutating it
let n=new Map(t.pieces),i=e(t),r=$b81ba4ea6c3c4676$var$computePlan(n,t);if(r.anims.size||r.fadings.size){let e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:r},e||$b81ba4ea6c3c4676$var$step(t,performance.now())}else t.dom.redraw();return i}// https://gist.github.com/gre/1650294
const $b81ba4ea6c3c4676$var$easing=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,$7a42cea72ae7e4e6$var$brushes=["green","red","blue","yellow"];function $7a42cea72ae7e4e6$export$b3571188c770cc5a(e,t){// support one finger touch only
if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?$80f8b45278b0164a$export$fe412c270a34f415(e):$80f8b45278b0164a$export$e47a3d6268102bb5(e);let n=$dbbfaf35dad95b1f$export$33052595192f7117(t),i=$80f8b45278b0164a$export$102bdd581884418b(n,$80f8b45278b0164a$export$970133fdf67d86cb(e),e.dom.bounds());i&&(e.drawable.current={orig:i,pos:n,brush:$7a42cea72ae7e4e6$var$eventBrush(t),snapToValidMove:e.drawable.defaultSnapToValidMove},$7a42cea72ae7e4e6$export$816e7b21815d9cf9(e))}function $7a42cea72ae7e4e6$export$816e7b21815d9cf9(e){requestAnimationFrame(()=>{let t=e.drawable.current;if(t){let n=$80f8b45278b0164a$export$102bdd581884418b(t.pos,$80f8b45278b0164a$export$970133fdf67d86cb(e),e.dom.bounds());n||(t.snapToValidMove=!1);let i=t.snapToValidMove?$80f8b45278b0164a$export$6ee499125a88eb43(t.orig,t.pos,$80f8b45278b0164a$export$970133fdf67d86cb(e),e.dom.bounds()):n;i!==t.mouseSq&&(t.mouseSq=i,t.dest=i!==t.orig?i:void 0,e.dom.redrawNow()),$7a42cea72ae7e4e6$export$816e7b21815d9cf9(e)}})}function $7a42cea72ae7e4e6$export$d947e5f4f4c48d48(e,t){e.drawable.current&&(e.drawable.current.pos=$dbbfaf35dad95b1f$export$33052595192f7117(t))}function $7a42cea72ae7e4e6$export$bd5df0f255a350f8(e){let t=e.drawable.current;t&&(t.mouseSq&&$7a42cea72ae7e4e6$var$addShape(e.drawable,t),$7a42cea72ae7e4e6$export$70b61ad426ddbe54(e))}function $7a42cea72ae7e4e6$export$70b61ad426ddbe54(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function $7a42cea72ae7e4e6$export$42ffd38884aecdac(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),$7a42cea72ae7e4e6$var$onChange(e.drawable))}function $7a42cea72ae7e4e6$var$eventBrush(e){var t;let n=(e.shiftKey||e.ctrlKey)&&$dbbfaf35dad95b1f$export$947a472b5b3020ba(e),i=e.altKey||e.metaKey||(null===(t=e.getModifierState)||void 0===t?void 0:t.call(e,"AltGraph"));return $7a42cea72ae7e4e6$var$brushes[(n?1:0)+(i?2:0)]}function $7a42cea72ae7e4e6$var$addShape(e,t){let n=e=>e.orig===t.orig&&e.dest===t.dest,i=e.shapes.find(n);i&&(e.shapes=e.shapes.filter(e=>!n(e))),i&&i.brush===t.brush||e.shapes.push({orig:t.orig,dest:t.dest,brush:t.brush}),$7a42cea72ae7e4e6$var$onChange(e)}function $7a42cea72ae7e4e6$var$onChange(e){e.onChange&&e.onChange(e.shapes)}function $84ee20f15ef980fb$export$b3571188c770cc5a(e,t){if(!(e.trustAllEvents||t.isTrusted)||void 0!==t.button&&0!==t.button||t.touches&&t.touches.length>1)return;// only trust when trustAllEvents is enabled
let n=e.dom.bounds(),i=$dbbfaf35dad95b1f$export$33052595192f7117(t),r=$80f8b45278b0164a$export$102bdd581884418b(i,$80f8b45278b0164a$export$970133fdf67d86cb(e),n);if(!r)return;let o=e.pieces.get(r),a=e.selected;// Prevent touch scroll and create no corresponding mouse event, if there
// is an intent to interact with the board.
if(!a&&e.drawable.enabled&&(e.drawable.eraseOnClick||!o||o.color!==e.turnColor)&&$7a42cea72ae7e4e6$export$42ffd38884aecdac(e),!1!==t.cancelable&&(!t.touches||e.blockTouchScroll||o||a||$84ee20f15ef980fb$var$pieceCloseTo(e,i)))t.preventDefault();else if(t.touches)return;// Handle only corresponding mouse event https://github.com/lichess-org/chessground/pull/268
let s=!!e.premovable.current,l=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&$80f8b45278b0164a$export$a4ef2b0c3fa55ad2(e,e.selected,r)?$b81ba4ea6c3c4676$export$bd46b8ab3689edc4(e=>$80f8b45278b0164a$export$6073914ea697a63e(e,r),e):$80f8b45278b0164a$export$6073914ea697a63e(e,r);let c=e.selected===r,u=$84ee20f15ef980fb$var$pieceElementByKey(e,r);if(o&&u&&c&&$80f8b45278b0164a$export$fe8f97248bbe2d04(e,r)){e.draggable.current={orig:r,piece:o,origPos:i,pos:i,started:e.draggable.autoDistance&&e.stats.dragged,element:u,previouslySelected:a,originTarget:t.target,keyHasChanged:!1},u.cgDragging=!0,u.classList.add("dragging");// place ghost
let s=e.dom.elements.ghost;s&&(s.className=`ghost ${o.color} ${o.role}`,$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(s,$dbbfaf35dad95b1f$export$2135ad75550a2ff4(n)($dbbfaf35dad95b1f$export$e2878eba51f22d11(r),$80f8b45278b0164a$export$970133fdf67d86cb(e))),$dbbfaf35dad95b1f$export$8cb512849e51eaf5(s,!0)),$84ee20f15ef980fb$var$processDrag(e)}else s&&$80f8b45278b0164a$export$f92a111f74a3f7c7(e),l&&$80f8b45278b0164a$export$9e6f418e5ea6b92c(e);e.dom.redraw()}function $84ee20f15ef980fb$var$pieceCloseTo(e,t){let n=$80f8b45278b0164a$export$970133fdf67d86cb(e),i=e.dom.bounds(),r=Math.pow(i.width/8,2);for(let o of e.pieces.keys()){let e=$dbbfaf35dad95b1f$export$1c17f680299a31f7(o,n,i);if($dbbfaf35dad95b1f$export$e4884e1734dcd545(e,t)<=r)return!0}return!1}function $84ee20f15ef980fb$export$65771a6862d302e4(e,t,n,i){let r="a0";e.pieces.set(r,t),e.dom.redraw();let o=$dbbfaf35dad95b1f$export$33052595192f7117(n);e.draggable.current={orig:r,piece:t,origPos:o,pos:o,started:!0,element:()=>$84ee20f15ef980fb$var$pieceElementByKey(e,r),originTarget:n.target,newPiece:!0,force:!!i,keyHasChanged:!1},$84ee20f15ef980fb$var$processDrag(e)}function $84ee20f15ef980fb$var$processDrag(e){requestAnimationFrame(()=>{var t;let n=e.draggable.current;if(!n)return;(null===(t=e.animation.current)||void 0===t?void 0:t.plan.anims.has(n.orig))&&(e.animation.current=void 0);// if moving piece is gone, cancel
let i=e.pieces.get(n.orig);if(i&&$dbbfaf35dad95b1f$export$e329b1a538c004fa(i,n.piece)){if(!n.started&&$dbbfaf35dad95b1f$export$e4884e1734dcd545(n.pos,n.origPos)>=Math.pow(e.draggable.distance,2)&&(n.started=!0),n.started){// support lazy elements
if("function"==typeof n.element){let e=n.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),n.element=e}let t=e.dom.bounds();$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(n.element,[n.pos[0]-t.left-t.width/16,n.pos[1]-t.top-t.height/16]),n.keyHasChanged||(n.keyHasChanged=n.orig!==$80f8b45278b0164a$export$102bdd581884418b(n.pos,$80f8b45278b0164a$export$970133fdf67d86cb(e),t))}}else $84ee20f15ef980fb$export$70b61ad426ddbe54(e);$84ee20f15ef980fb$var$processDrag(e)})}function $84ee20f15ef980fb$export$d947e5f4f4c48d48(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=$dbbfaf35dad95b1f$export$33052595192f7117(t))}function $84ee20f15ef980fb$export$bd5df0f255a350f8(e,t){let n=e.draggable.current;if(!n)return;// comparing with the origin target is an easy way to test that the end event
// has the same touch origin
if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&n.originTarget!==t.target&&!n.newPiece){e.draggable.current=void 0;return}$80f8b45278b0164a$export$f92a111f74a3f7c7(e),$80f8b45278b0164a$export$9e6f418e5ea6b92c(e);// touchend has no position; so use the last touchmove position instead
let i=$dbbfaf35dad95b1f$export$33052595192f7117(t)||n.pos,r=$80f8b45278b0164a$export$102bdd581884418b(i,$80f8b45278b0164a$export$970133fdf67d86cb(e),e.dom.bounds());r&&n.started&&n.orig!==r?n.newPiece?$80f8b45278b0164a$export$b2b9f46b948033b0(e,n.orig,r,n.force):(e.stats.ctrlKey=t.ctrlKey,$80f8b45278b0164a$export$843c446e2e718822(e,n.orig,r)&&(e.stats.dragged=!0)):n.newPiece?e.pieces.delete(n.orig):e.draggable.deleteOnDropOff&&!r&&(e.pieces.delete(n.orig),$80f8b45278b0164a$export$6511920ae9f0cd34(e.events.change)),(n.orig===n.previouslySelected||n.keyHasChanged)&&(n.orig===r||!r)?$80f8b45278b0164a$export$fe412c270a34f415(e):e.selectable.enabled||$80f8b45278b0164a$export$fe412c270a34f415(e),$84ee20f15ef980fb$var$removeDragElements(e),e.draggable.current=void 0,e.dom.redraw()}function $84ee20f15ef980fb$export$70b61ad426ddbe54(e){let t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,$80f8b45278b0164a$export$fe412c270a34f415(e),$84ee20f15ef980fb$var$removeDragElements(e),e.dom.redraw())}function $84ee20f15ef980fb$var$removeDragElements(e){let t=e.dom.elements;t.ghost&&$dbbfaf35dad95b1f$export$8cb512849e51eaf5(t.ghost,!1)}function $84ee20f15ef980fb$var$pieceElementByKey(e,t){let n=e.dom.elements.board.firstChild;for(;n;){if(n.cgKey===t&&"PIECE"===n.tagName)return n;n=n.nextSibling}}function $edda395882a62460$export$4971bcc2704b21ab(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{$edda395882a62460$var$setStage(e,2),setTimeout(()=>$edda395882a62460$var$setStage(e,void 0),120)},120)}function $edda395882a62460$var$setStage(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}function $77723e179126bec6$export$b3571188c770cc5a(e,t){function n(){$80f8b45278b0164a$export$e798007c48b456cd(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&n(),$fe7eac34876cd925$export$d771543c4ed87064(e,t),(t.fen?$b81ba4ea6c3c4676$export$bd46b8ab3689edc4:$b81ba4ea6c3c4676$export$b3890eb0ae9dca99)(e=>$fe7eac34876cd925$export$8d21e34596265fa2(e,t),e)},state:e,getFen:()=>$f37f4d2e14067e5f$export$68d8715fc104d294(e.pieces),toggleOrientation:n,setPieces(t){$b81ba4ea6c3c4676$export$bd46b8ab3689edc4(e=>$80f8b45278b0164a$export$20a063d1402ff7ff(e,t),e)},selectSquare(t,n){t?$b81ba4ea6c3c4676$export$bd46b8ab3689edc4(e=>$80f8b45278b0164a$export$6073914ea697a63e(e,t,n),e):e.selected&&($80f8b45278b0164a$export$fe412c270a34f415(e),e.dom.redraw())},move(t,n){$b81ba4ea6c3c4676$export$bd46b8ab3689edc4(e=>$80f8b45278b0164a$export$13f6ca6271343510(e,t,n),e)},newPiece(t,n){$b81ba4ea6c3c4676$export$bd46b8ab3689edc4(e=>$80f8b45278b0164a$export$13886f9573facc29(e,t,n),e)},playPremove(){if(e.premovable.current){if($b81ba4ea6c3c4676$export$bd46b8ab3689edc4($80f8b45278b0164a$export$d04320a93cdae73d,e))return!0;// if the premove couldn't be played, redraw to clear it up
e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){let n=$80f8b45278b0164a$export$8efa9460c0cedd9e(e,t);return e.dom.redraw(),n}return!1},cancelPremove(){$b81ba4ea6c3c4676$export$b3890eb0ae9dca99($80f8b45278b0164a$export$f92a111f74a3f7c7,e)},cancelPredrop(){$b81ba4ea6c3c4676$export$b3890eb0ae9dca99($80f8b45278b0164a$export$9e6f418e5ea6b92c,e)},cancelMove(){$b81ba4ea6c3c4676$export$b3890eb0ae9dca99(e=>{$80f8b45278b0164a$export$e47a3d6268102bb5(e),$84ee20f15ef980fb$export$70b61ad426ddbe54(e)},e)},stop(){$b81ba4ea6c3c4676$export$b3890eb0ae9dca99(e=>{$80f8b45278b0164a$export$fa6813432f753b0d(e),$84ee20f15ef980fb$export$70b61ad426ddbe54(e)},e)},explode(t){$edda395882a62460$export$4971bcc2704b21ab(e,t)},setAutoShapes(t){$b81ba4ea6c3c4676$export$b3890eb0ae9dca99(e=>e.drawable.autoShapes=t,e)},setShapes(t){$b81ba4ea6c3c4676$export$b3890eb0ae9dca99(e=>e.drawable.shapes=t,e)},getKeyAtDomPos:t=>$80f8b45278b0164a$export$102bdd581884418b(t,$80f8b45278b0164a$export$970133fdf67d86cb(e),e.dom.bounds()),redrawAll:t,dragNewPiece(t,n,i){$84ee20f15ef980fb$export$65771a6862d302e4(e,t,n,i)},destroy(){$80f8b45278b0164a$export$fa6813432f753b0d(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}function $7b1d28100d027626$export$ebe90cb607ad99e(){return{pieces:$f37f4d2e14067e5f$export$aafa59e2e03f2942($f37f4d2e14067e5f$export$59ff82fc918bd7e3),orientation:"white",turnColor:"white",coordinates:!0,ranksPosition:"right",autoCastle:!0,viewOnly:!1,disableContextMenu:!1,addPieceZIndex:!1,blockTouchScroll:!1,pieceKey:!1,trustAllEvents:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{// on touchscreen, default to "tap-tap" moves
// instead of drag
dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15},purple:{key:"purp",color:"#68217a",opacity:.65,lineWidth:10},pink:{key:"pink",color:"#ee2080",opacity:.5,lineWidth:10},hilite:{key:"hilite",color:"#fff",opacity:1,lineWidth:1}},prevSvgHash:""},hold:$dbbfaf35dad95b1f$export$9dc4ecf953986f04()}}function $3eabe156c0ff4c04$export$a529cedf94de8dc(){let e=$3eabe156c0ff4c04$export$c8a8987d4410bf2d("defs"),t=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("filter"),{id:"cg-filter-blur"});return t.appendChild($3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("feGaussianBlur"),{stdDeviation:"0.022"})),e.appendChild(t),e}function $3eabe156c0ff4c04$export$fb80b1b7d7777ee5(e,t,n){var i;let r=e.drawable,o=r.current,a=o&&o.mouseSq?o:void 0,s=new Map,l=e.dom.bounds(),c=r.autoShapes.filter(e=>!e.piece);for(let t of r.shapes.concat(c).concat(a?[a]:[])){if(!t.dest)continue;let n=null!==(i=s.get(t.dest))&&void 0!==i?i:new Set,r=$3eabe156c0ff4c04$var$pos2user($3eabe156c0ff4c04$var$orient($dbbfaf35dad95b1f$export$e2878eba51f22d11(t.orig),e.orientation),l),o=$3eabe156c0ff4c04$var$pos2user($3eabe156c0ff4c04$var$orient($dbbfaf35dad95b1f$export$e2878eba51f22d11(t.dest),e.orientation),l);n.add($3eabe156c0ff4c04$var$moveAngle(r,o)),s.set(t.dest,n)}let u=r.shapes.concat(c).map(e=>({shape:e,current:!1,hash:$3eabe156c0ff4c04$var$shapeHash(e,$3eabe156c0ff4c04$var$isShort(e.dest,s),!1,l)}));a&&u.push({shape:a,current:!0,hash:$3eabe156c0ff4c04$var$shapeHash(a,$3eabe156c0ff4c04$var$isShort(a.dest,s),!0,l)});let h=u.map(e=>e.hash).join(";");if(h===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=h;/*
      -- DOM hierarchy --
      <svg class="cg-shapes">      (<= svg)
        <defs>
          ...(for brushes)...
        </defs>
        <g>
          ...(for arrows and circles)...
        </g>
      </svg>
      <svg class="cg-custom-svgs"> (<= customSvg)
        <g>
          ...(for custom svgs)...
        </g>
      </svg>
    */let d=t.querySelector("defs");$3eabe156c0ff4c04$var$syncDefs(r,u,d),$3eabe156c0ff4c04$var$syncShapes(u,t.querySelector("g"),n.querySelector("g"),t=>$3eabe156c0ff4c04$var$renderShape(e,t,r.brushes,s,l))}// append only. Don't try to update/remove.
function $3eabe156c0ff4c04$var$syncDefs(e,t,n){var i;let r;let o=new Map;for(let n of t.filter(e=>e.shape.dest&&e.shape.brush))r=$3eabe156c0ff4c04$var$makeCustomBrush(e.brushes[n.shape.brush],n.shape.modifiers),(null===(i=n.shape.modifiers)||void 0===i?void 0:i.hilite)&&o.set("hilite",e.brushes.hilite),o.set(r.key,r);let a=new Set,s=n.firstElementChild;for(;s;)a.add(s.getAttribute("cgKey")),s=s.nextElementSibling;for(let[e,t]of o.entries())a.has(e)||n.appendChild($3eabe156c0ff4c04$var$renderMarker(t))}function $3eabe156c0ff4c04$var$syncShapes(e,t,n,i){let r=new Map;for(let t of e)r.set(t.hash,!1);for(let e of[t,n]){let t=[],n=e.firstElementChild,i;for(;n;)i=n.getAttribute("cgHash"),r.has(i)?r.set(i,!0):t.push(n),n=n.nextElementSibling;for(let n of t)e.removeChild(n)}// insert shapes that are not yet in dom
for(let o of e.filter(e=>!r.get(e.hash)))for(let e of i(o))e.isCustom?n.appendChild(e.el):t.appendChild(e.el)}function $3eabe156c0ff4c04$var$shapeHash({orig:e,dest:t,brush:n,piece:i,modifiers:r,customSvg:o,label:a},s,l,c){var u,h;// a shape and an overlay svg share a lifetime and have the same cgHash attribute
return[c.width,c.height,l,e,t,n,s&&"-",i&&$3eabe156c0ff4c04$var$pieceHash(i),r&&$3eabe156c0ff4c04$var$modifiersHash(r),o&&`custom-${$3eabe156c0ff4c04$var$textHash(o.html)},${null!==(h=null===(u=o.center)||void 0===u?void 0:u[0])&&void 0!==h?h:"o"}`,a&&`label-${$3eabe156c0ff4c04$var$textHash(a.text)}`].filter(e=>e).join(",")}function $3eabe156c0ff4c04$var$pieceHash(e){return[e.color,e.role,e.scale].filter(e=>e).join(",")}function $3eabe156c0ff4c04$var$modifiersHash(e){return[e.lineWidth,e.hilite&&"*"].filter(e=>e).join(",")}function $3eabe156c0ff4c04$var$textHash(e){// Rolling hash with base 31 (cf. https://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript)
let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)>>>0;return t.toString()}function $3eabe156c0ff4c04$var$renderShape(e,{shape:t,current:n,hash:i},r,o,a){var s,l;let c=$3eabe156c0ff4c04$var$pos2user($3eabe156c0ff4c04$var$orient($dbbfaf35dad95b1f$export$e2878eba51f22d11(t.orig),e.orientation),a),u=t.dest?$3eabe156c0ff4c04$var$pos2user($3eabe156c0ff4c04$var$orient($dbbfaf35dad95b1f$export$e2878eba51f22d11(t.dest),e.orientation),a):c,h=t.brush&&$3eabe156c0ff4c04$var$makeCustomBrush(r[t.brush],t.modifiers),d=o.get(t.dest),p=[];if(h){let e=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("g"),{cgHash:i});p.push({el:e}),c[0]!==u[0]||c[1]!==u[1]?e.appendChild($3eabe156c0ff4c04$var$renderArrow(t,h,c,u,n,$3eabe156c0ff4c04$var$isShort(t.dest,o))):e.appendChild($3eabe156c0ff4c04$var$renderCircle(r[t.brush],c,n,a))}if(t.label){let e=t.label;null!==(s=e.fill)&&void 0!==s||(e.fill=t.brush&&r[t.brush].color);let n=t.brush?void 0:"tr";p.push({el:$3eabe156c0ff4c04$var$renderLabel(e,i,c,u,d,n),isCustom:!0})}if(t.customSvg){let e=null!==(l=t.customSvg.center)&&void 0!==l?l:"orig",[n,r]="label"===e?$3eabe156c0ff4c04$var$labelCoords(c,u,d).map(e=>e-.5):"dest"===e?u:c,o=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("g"),{transform:`translate(${n},${r})`,cgHash:i});o.innerHTML=`<svg width="1" height="1" viewBox="0 0 100 100">${t.customSvg.html}</svg>`,p.push({el:o,isCustom:!0})}return p}function $3eabe156c0ff4c04$var$renderCircle(e,t,n,i){let r=$3eabe156c0ff4c04$var$circleWidth(),o=(i.width+i.height)/(4*Math.max(i.width,i.height));return $3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("circle"),{stroke:e.color,"stroke-width":r[n?0:1],fill:"none",opacity:$3eabe156c0ff4c04$var$opacity(e,n),cx:t[0],cy:t[1],r:o-r[1]/2})}function $3eabe156c0ff4c04$var$renderArrow(e,t,n,i,r,o){var a;function s(a){var s;let l=$3eabe156c0ff4c04$var$arrowMargin(o&&!r),c=i[0]-n[0],u=i[1]-n[1],h=Math.atan2(u,c),d=Math.cos(h)*l,p=Math.sin(h)*l;return $3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("line"),{stroke:a?"white":t.color,"stroke-width":$3eabe156c0ff4c04$var$lineWidth(t,r)+(a?.04:0),"stroke-linecap":"round","marker-end":`url(#arrowhead-${a?"hilite":t.key})`,opacity:(null===(s=e.modifiers)||void 0===s?void 0:s.hilite)?1:$3eabe156c0ff4c04$var$opacity(t,r),x1:n[0],y1:n[1],x2:i[0]-d,y2:i[1]-p})}if(!(null===(a=e.modifiers)||void 0===a?void 0:a.hilite))return s(!1);let l=$3eabe156c0ff4c04$export$c8a8987d4410bf2d("g"),c=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("g"),{filter:"url(#cg-filter-blur)"});return c.appendChild($3eabe156c0ff4c04$var$filterBox(n,i)),c.appendChild(s(!0)),l.appendChild(c),l.appendChild(s(!1)),l}function $3eabe156c0ff4c04$var$renderMarker(e){let t=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("marker"),{id:"arrowhead-"+e.key,orient:"auto",overflow:"visible",markerWidth:4,markerHeight:4,refX:"hilite"===e.key?1.86:2.05,refY:2});return t.appendChild($3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function $3eabe156c0ff4c04$var$renderLabel(e,t,n,i,r,o){var a;let s=.4,l=s*.75**e.text.length,c=$3eabe156c0ff4c04$var$labelCoords(n,i,r),u="tr"===o?.4:0,h=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("g"),{transform:`translate(${c[0]+u},${c[1]-u})`,cgHash:t});h.appendChild($3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("circle"),{r:s/2,"fill-opacity":o?1:.8,"stroke-opacity":o?1:.7,"stroke-width":.03,fill:null!==(a=e.fill)&&void 0!==a?a:"#666",stroke:"white"}));let d=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("text"),{"font-size":l,"font-family":"Noto Sans","text-anchor":"middle",fill:"white",y:.13*.75**e.text.length});return d.innerHTML=e.text,h.appendChild(d),h}function $3eabe156c0ff4c04$var$orient(e,t){return"white"===t?e:[7-e[0],7-e[1]]}function $3eabe156c0ff4c04$var$isShort(e,t){return!0===(e&&t.has(e)&&t.get(e).size>1)}function $3eabe156c0ff4c04$export$c8a8987d4410bf2d(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function $3eabe156c0ff4c04$export$74da2cba014bdc09(e,t){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.setAttribute(n,t[n]);return e}function $3eabe156c0ff4c04$var$makeCustomBrush(e,t){return t?{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(e=>e).join("")}:e}function $3eabe156c0ff4c04$var$circleWidth(){return[3/64,4/64]}function $3eabe156c0ff4c04$var$lineWidth(e,t){return(e.lineWidth||10)*(t?.85:1)/64}function $3eabe156c0ff4c04$var$opacity(e,t){return(e.opacity||1)*(t?.9:1)}function $3eabe156c0ff4c04$var$arrowMargin(e){return(e?20:10)/64}function $3eabe156c0ff4c04$var$pos2user(e,t){let n=Math.min(1,t.width/t.height),i=Math.min(1,t.height/t.width);return[(e[0]-3.5)*n,(3.5-e[1])*i]}function $3eabe156c0ff4c04$var$filterBox(e,t){// lines/arrows are considered to be one dimensional for the purposes of SVG filters,
// so we add a transparent bounding box to ensure they apply to the 2nd dimension
let n={from:[Math.floor(Math.min(e[0],t[0])),Math.floor(Math.min(e[1],t[1]))],to:[Math.ceil(Math.max(e[0],t[0])),Math.ceil(Math.max(e[1],t[1]))]};return $3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("rect"),{x:n.from[0],y:n.from[1],width:n.to[0]-n.from[0],height:n.to[1]-n.from[1],fill:"none",stroke:"none"})}function $3eabe156c0ff4c04$var$moveAngle(e,t,n=!0){let i=Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI;return n?(Math.round(8*i/Math.PI)+16)%16:i}function $3eabe156c0ff4c04$var$dist(e,t){return Math.sqrt([e[0]-t[0],e[1]-t[1]].reduce((e,t)=>e+t*t,0))}/*
 try to place label at the junction of the destination shaft and arrowhead. if there's more than
 1 arrow pointing to a square, the arrow shortens by 10 / 64 units so the label must move as well.
 
 if the angle between two incoming arrows is pi / 8, such as when an adjacent knight and bishop
 attack the same square, the knight's label is slid further down the shaft by an amount equal to
 our label size to avoid collision
*/function $3eabe156c0ff4c04$var$labelCoords(e,t,n){let i=$3eabe156c0ff4c04$var$dist(e,t),r=$3eabe156c0ff4c04$var$moveAngle(e,t,!1);if(n&&(i-=33/64,n.size>1)){i-=10/64;// reduce by shortening factor
let r=$3eabe156c0ff4c04$var$moveAngle(e,t);(n.has((r+1)%16)||n.has((r+15)%16))&&1&r&&(i-=.4)}return[e[0]-Math.cos(r)*i,e[1]-Math.sin(r)*i].map(e=>e+.5)}function $0a27377e74afbcfd$export$79188534738a92bf(e,t){let n,i,r,o;for(let n of(// .cg-wrap (element passed to Chessground)
//   cg-container
//     cg-board
//     svg.cg-shapes
//       defs
//       g
//     svg.cg-custom-svgs
//       g
//     cg-auto-pieces
//     coords.ranks
//     coords.files
//     piece.ghost
e.innerHTML="",// ensure the cg-wrap class is set
// so bounds calculation can use the CSS width/height values
// add that class yourself to the element before calling chessground
// for a slight performance improvement! (avoids recomputing style)
e.classList.add("cg-wrap"),$f00dad157732f88c$export$8f45430ccf837300))e.classList.toggle("orientation-"+n,t.orientation===n);e.classList.toggle("manipulable",!t.viewOnly);let a=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("cg-container");e.appendChild(a);let s=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("cg-board");if(a.appendChild(s),t.drawable.visible&&((n=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("svg"),{class:"cg-shapes",viewBox:"-4 -4 8 8",preserveAspectRatio:"xMidYMid slice"})).appendChild($3eabe156c0ff4c04$export$a529cedf94de8dc()),n.appendChild($3eabe156c0ff4c04$export$c8a8987d4410bf2d("g")),(i=$3eabe156c0ff4c04$export$74da2cba014bdc09($3eabe156c0ff4c04$export$c8a8987d4410bf2d("svg"),{class:"cg-custom-svgs",viewBox:"-3.5 -3.5 8 8",preserveAspectRatio:"xMidYMid slice"})).appendChild($3eabe156c0ff4c04$export$c8a8987d4410bf2d("g")),r=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("cg-auto-pieces"),a.appendChild(n),a.appendChild(i),a.appendChild(r)),t.coordinates){let e="black"===t.orientation?" black":"",n="left"===t.ranksPosition?" left":"";a.appendChild($0a27377e74afbcfd$var$renderCoords($f00dad157732f88c$export$d8e4e3952f325c95,"ranks"+e+n)),a.appendChild($0a27377e74afbcfd$var$renderCoords($f00dad157732f88c$export$3a444357c5f65f65,"files"+e))}return t.draggable.enabled&&t.draggable.showGhost&&($dbbfaf35dad95b1f$export$8cb512849e51eaf5(o=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("piece","ghost"),!1),a.appendChild(o)),{board:s,container:a,wrap:e,ghost:o,svg:n,customSvg:i,autoPieces:r}}function $0a27377e74afbcfd$var$renderCoords(e,t){let n;let i=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("coords",t);for(let t of e)(n=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("coord")).textContent=t,i.appendChild(n);return i}function $de1bc8749e875bbb$export$663103110d94aac9(e,t){if(!e.dropmode.active)return;$80f8b45278b0164a$export$f92a111f74a3f7c7(e),$80f8b45278b0164a$export$9e6f418e5ea6b92c(e);let n=e.dropmode.piece;if(n){e.pieces.set("a0",n);let i=$dbbfaf35dad95b1f$export$33052595192f7117(t),r=i&&$80f8b45278b0164a$export$102bdd581884418b(i,$80f8b45278b0164a$export$970133fdf67d86cb(e),e.dom.bounds());r&&$80f8b45278b0164a$export$b2b9f46b948033b0(e,"a0",r)}e.dom.redraw()}function $2d15ce003fd0519b$export$fc48d2ed06541843(e,t){let n=e.dom.elements.board;if("ResizeObserver"in window&&new ResizeObserver(t).observe(e.dom.elements.wrap),(e.disableContextMenu||e.drawable.enabled)&&n.addEventListener("contextmenu",e=>e.preventDefault()),e.viewOnly)return;// Cannot be passive, because we prevent touch scrolling and dragging of
// selected elements.
let i=$2d15ce003fd0519b$var$startDragOrDraw(e);n.addEventListener("touchstart",i,{passive:!1}),n.addEventListener("mousedown",i,{passive:!1})}function $2d15ce003fd0519b$export$fdc77453278b0fa9(e,t){let n=[];if("ResizeObserver"in window||n.push($2d15ce003fd0519b$var$unbindable(document.body,"chessground.resize",t)),!e.viewOnly){let t=$2d15ce003fd0519b$var$dragOrDraw(e,$84ee20f15ef980fb$export$d947e5f4f4c48d48,$7a42cea72ae7e4e6$export$d947e5f4f4c48d48),i=$2d15ce003fd0519b$var$dragOrDraw(e,$84ee20f15ef980fb$export$bd5df0f255a350f8,$7a42cea72ae7e4e6$export$bd5df0f255a350f8);for(let e of["touchmove","mousemove"])n.push($2d15ce003fd0519b$var$unbindable(document,e,t));for(let e of["touchend","mouseup"])n.push($2d15ce003fd0519b$var$unbindable(document,e,i));let r=()=>e.dom.bounds.clear();n.push($2d15ce003fd0519b$var$unbindable(document,"scroll",r,{capture:!0,passive:!0})),n.push($2d15ce003fd0519b$var$unbindable(window,"resize",r,{passive:!0}))}return()=>n.forEach(e=>e())}function $2d15ce003fd0519b$var$unbindable(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}const $2d15ce003fd0519b$var$startDragOrDraw=e=>t=>{e.draggable.current?$84ee20f15ef980fb$export$70b61ad426ddbe54(e):e.drawable.current?$7a42cea72ae7e4e6$export$70b61ad426ddbe54(e):t.shiftKey||$dbbfaf35dad95b1f$export$947a472b5b3020ba(t)?e.drawable.enabled&&$7a42cea72ae7e4e6$export$b3571188c770cc5a(e,t):e.viewOnly||(e.dropmode.active?$de1bc8749e875bbb$export$663103110d94aac9(e,t):$84ee20f15ef980fb$export$b3571188c770cc5a(e,t))},$2d15ce003fd0519b$var$dragOrDraw=(e,t,n)=>i=>{e.drawable.current?e.drawable.enabled&&n(e,i):e.viewOnly||t(e,i)};function $c28505726f0fb896$export$b3890eb0ae9dca99(e){let t,n,i,r,o,a,s,l,c,u;let h=$80f8b45278b0164a$export$970133fdf67d86cb(e),d=$dbbfaf35dad95b1f$export$2135ad75550a2ff4(e.dom.bounds()),p=e.dom.elements.board,f=e.pieces,m=e.animation.current,y=m?m.plan.anims:new Map,g=m?m.plan.fadings:new Map,v=e.draggable.current,b=$c28505726f0fb896$var$computeSquareClasses(e),x=new Set,_=new Set,E=new Map,w=new Map;// by class name
for(// walk over all board dom elements, apply animations and flag moved pieces
n=p.firstChild;n;){if(t=n.cgKey,$c28505726f0fb896$var$isPieceNode(n)){// there is now a piece at this dom key
if(i=f.get(t),o=y.get(t),a=g.get(t),r=n.cgPiece,n.cgDragging&&(!v||v.orig!==t)&&(n.classList.remove("dragging"),$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(n,d($dbbfaf35dad95b1f$export$e2878eba51f22d11(t),h)),n.cgDragging=!1),!a&&n.cgFading&&(n.cgFading=!1,n.classList.remove("fading")),i){// continue animation if already animating and same piece
// (otherwise it could animate a captured piece)
if(o&&n.cgAnimating&&r===$c28505726f0fb896$var$pieceNameOf(i)){let e=$dbbfaf35dad95b1f$export$e2878eba51f22d11(t);e[0]+=o[2],e[1]+=o[3],n.classList.add("anim"),$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(n,d(e,h))}else n.cgAnimating&&(n.cgAnimating=!1,n.classList.remove("anim"),$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(n,d($dbbfaf35dad95b1f$export$e2878eba51f22d11(t),h)),e.addPieceZIndex&&(n.style.zIndex=$c28505726f0fb896$var$posZIndex($dbbfaf35dad95b1f$export$e2878eba51f22d11(t),h)));r!==$c28505726f0fb896$var$pieceNameOf(i)||a&&n.cgFading?a&&r===$c28505726f0fb896$var$pieceNameOf(a)?(n.classList.add("fading"),n.cgFading=!0):$c28505726f0fb896$var$appendValue(E,r,n):x.add(t)}else $c28505726f0fb896$var$appendValue(E,r,n)}else if($c28505726f0fb896$var$isSquareNode(n)){let e=n.className;b.get(t)===e?_.add(t):$c28505726f0fb896$var$appendValue(w,e,n)}n=n.nextSibling}// walk over all squares in current set, apply dom changes to moved squares
// or append new squares
for(let[e,t]of b)if(!_.has(e)){u=(c=w.get(t))&&c.pop();let n=d($dbbfaf35dad95b1f$export$e2878eba51f22d11(e),h);if(u)u.cgKey=e,$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(u,n);else{let i=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("square",t);i.cgKey=e,$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(i,n),p.insertBefore(i,p.firstChild)}}// walk over all pieces in current set, apply dom changes to moved pieces
// or append new pieces
for(let[t,n]of f)if(o=y.get(t),!x.has(t)){// a same piece was moved
if(l=(s=E.get($c28505726f0fb896$var$pieceNameOf(n)))&&s.pop()){// apply dom changes
l.cgKey=t,l.cgFading&&(l.classList.remove("fading"),l.cgFading=!1);let n=$dbbfaf35dad95b1f$export$e2878eba51f22d11(t);e.addPieceZIndex&&(l.style.zIndex=$c28505726f0fb896$var$posZIndex(n,h)),o&&(l.cgAnimating=!0,l.classList.add("anim"),n[0]+=o[2],n[1]+=o[3]),$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(l,d(n,h))}else{let i=$c28505726f0fb896$var$pieceNameOf(n),r=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("piece",i),a=$dbbfaf35dad95b1f$export$e2878eba51f22d11(t);r.cgPiece=i,r.cgKey=t,o&&(r.cgAnimating=!0,a[0]+=o[2],a[1]+=o[3]),$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(r,d(a,h)),e.addPieceZIndex&&(r.style.zIndex=$c28505726f0fb896$var$posZIndex(a,h)),p.appendChild(r)}}// remove any element that remains in the moved sets
for(let t of E.values())$c28505726f0fb896$var$removeNodes(e,t);for(let t of w.values())$c28505726f0fb896$var$removeNodes(e,t)}function $c28505726f0fb896$export$d62f185fd39aa98c(e){let t=$80f8b45278b0164a$export$970133fdf67d86cb(e),n=$dbbfaf35dad95b1f$export$2135ad75550a2ff4(e.dom.bounds()),i=e.dom.elements.board.firstChild;for(;i;)($c28505726f0fb896$var$isPieceNode(i)&&!i.cgAnimating||$c28505726f0fb896$var$isSquareNode(i))&&$dbbfaf35dad95b1f$export$d73ee8ef04f5226a(i,n($dbbfaf35dad95b1f$export$e2878eba51f22d11(i.cgKey),t)),i=i.nextSibling}function $c28505726f0fb896$export$f4467a4f41373bc7(e){var t,n;let i=e.dom.elements.wrap.getBoundingClientRect(),r=e.dom.elements.container,o=i.height/i.width,a=8*Math.floor(i.width*window.devicePixelRatio/8)/window.devicePixelRatio,s=a*o;r.style.width=a+"px",r.style.height=s+"px",e.dom.bounds.clear(),null===(t=e.addDimensionsCssVarsTo)||void 0===t||t.style.setProperty("--cg-width",a+"px"),null===(n=e.addDimensionsCssVarsTo)||void 0===n||n.style.setProperty("--cg-height",s+"px")}const $c28505726f0fb896$var$isPieceNode=e=>"PIECE"===e.tagName,$c28505726f0fb896$var$isSquareNode=e=>"SQUARE"===e.tagName;function $c28505726f0fb896$var$removeNodes(e,t){for(let n of t)e.dom.elements.board.removeChild(n)}function $c28505726f0fb896$var$posZIndex(e,t){let n=3,i=e[1],r=t?n+7-i:n+i;return`${r}`}const $c28505726f0fb896$var$pieceNameOf=e=>`${e.color} ${e.role}`;function $c28505726f0fb896$var$computeSquareClasses(e){var t,n,i;let r=new Map;if(e.lastMove&&e.highlight.lastMove)for(let t of e.lastMove)$c28505726f0fb896$var$addSquare(r,t,"last-move");if(e.check&&e.highlight.check&&$c28505726f0fb896$var$addSquare(r,e.check,"check"),e.selected&&($c28505726f0fb896$var$addSquare(r,e.selected,"selected"),e.movable.showDests)){let o=null===(t=e.movable.dests)||void 0===t?void 0:t.get(e.selected);if(o)for(let t of o)$c28505726f0fb896$var$addSquare(r,t,"move-dest"+(e.pieces.has(t)?" oc":""));let a=null!==(i=null===(n=e.premovable.customDests)||void 0===n?void 0:n.get(e.selected))&&void 0!==i?i:e.premovable.dests;if(a)for(let t of a)$c28505726f0fb896$var$addSquare(r,t,"premove-dest"+(e.pieces.has(t)?" oc":""))}let o=e.premovable.current;if(o)for(let e of o)$c28505726f0fb896$var$addSquare(r,e,"current-premove");else e.predroppable.current&&$c28505726f0fb896$var$addSquare(r,e.predroppable.current.key,"current-premove");let a=e.exploding;if(a)for(let e of a.keys)$c28505726f0fb896$var$addSquare(r,e,"exploding"+a.stage);return e.highlight.custom&&e.highlight.custom.forEach((e,t)=>{$c28505726f0fb896$var$addSquare(r,t,e)}),r}function $c28505726f0fb896$var$addSquare(e,t,n){let i=e.get(t);i?e.set(t,`${i} ${n}`):e.set(t,n)}function $c28505726f0fb896$var$appendValue(e,t,n){let i=e.get(t);i?i.push(n):e.set(t,[n])}// append and remove only. No updates.
function $f6a46b1a152048c7$export$eb48cb918245ce33(e,t,n){let i=new Map,r=[];for(let t of e)i.set(t.hash,!1);let o=t.firstElementChild,a;for(;o;)a=o.getAttribute("cgHash"),i.has(a)?i.set(a,!0):r.push(o),o=o.nextElementSibling;// remove old shapes
for(let e of r)t.removeChild(e);// insert shapes that are not yet in dom
for(let r of e)i.get(r.hash)||t.appendChild(n(r))}function $df86554080128aa6$export$b3890eb0ae9dca99(e,t){let n=e.drawable.autoShapes.filter(e=>e.piece),i=n.map(e=>({shape:e,hash:$df86554080128aa6$var$hash(e),current:!1}));$f6a46b1a152048c7$export$eb48cb918245ce33(i,t,t=>$df86554080128aa6$var$renderShape(e,t,e.dom.bounds()))}function $df86554080128aa6$export$d62f185fd39aa98c(e){var t;let n=$80f8b45278b0164a$export$970133fdf67d86cb(e),i=$dbbfaf35dad95b1f$export$2135ad75550a2ff4(e.dom.bounds()),r=null===(t=e.dom.elements.autoPieces)||void 0===t?void 0:t.firstChild;for(;r;)$dbbfaf35dad95b1f$export$f8afaca97e230dc6(r,i($dbbfaf35dad95b1f$export$e2878eba51f22d11(r.cgKey),n),r.cgScale),r=r.nextSibling}function $df86554080128aa6$var$renderShape(e,{shape:t,hash:n},i){var r,o,a;let s=t.orig,l=null===(r=t.piece)||void 0===r?void 0:r.role,c=null===(o=t.piece)||void 0===o?void 0:o.color,u=null===(a=t.piece)||void 0===a?void 0:a.scale,h=$dbbfaf35dad95b1f$export$3d7cd8ed57263b30("piece",`${l} ${c}`);return h.setAttribute("cgHash",n),h.cgKey=s,h.cgScale=u,$dbbfaf35dad95b1f$export$f8afaca97e230dc6(h,$dbbfaf35dad95b1f$export$2135ad75550a2ff4(i)($dbbfaf35dad95b1f$export$e2878eba51f22d11(s),$80f8b45278b0164a$export$970133fdf67d86cb(e)),u),h}const $df86554080128aa6$var$hash=e=>{var t,n,i;return[e.orig,null===(t=e.piece)||void 0===t?void 0:t.role,null===(n=e.piece)||void 0===n?void 0:n.color,null===(i=e.piece)||void 0===i?void 0:i.scale].join(",")};function $ea2d34c1974d7d8b$export$6aaf0e4db08ad996(e,t){let n=$7b1d28100d027626$export$ebe90cb607ad99e();function i(){let t="dom"in n?n.dom.unbind:void 0,i=$0a27377e74afbcfd$export$79188534738a92bf(e,n),r=$dbbfaf35dad95b1f$export$7c73462e0d25e514(()=>i.board.getBoundingClientRect()),o=e=>{$c28505726f0fb896$export$b3890eb0ae9dca99(s),i.autoPieces&&$df86554080128aa6$export$b3890eb0ae9dca99(s,i.autoPieces),!e&&i.svg&&$3eabe156c0ff4c04$export$fb80b1b7d7777ee5(s,i.svg,i.customSvg)},a=()=>{$c28505726f0fb896$export$f4467a4f41373bc7(s),$c28505726f0fb896$export$d62f185fd39aa98c(s),i.autoPieces&&$df86554080128aa6$export$d62f185fd39aa98c(s)},s=n;return s.dom={elements:i,bounds:r,redraw:$ea2d34c1974d7d8b$var$debounceRedraw(o),redrawNow:o,unbind:t},s.drawable.prevSvgHash="",$c28505726f0fb896$export$f4467a4f41373bc7(s),o(!1),$2d15ce003fd0519b$export$fc48d2ed06541843(s,a),t||(s.dom.unbind=$2d15ce003fd0519b$export$fdc77453278b0fa9(s,a)),s.events.insert&&s.events.insert(i),s}return $fe7eac34876cd925$export$8d21e34596265fa2(n,t||{}),$77723e179126bec6$export$b3571188c770cc5a(i(),i)}function $ea2d34c1974d7d8b$var$debounceRedraw(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}const $497352f3986651c5$export$dc537a3a3893548e=(e,t)=>({oncreate:t=>{e.ground=new $ea2d34c1974d7d8b$export$6aaf0e4db08ad996(t.dom,t.attrs.config)},view:e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".board",{class:e.attrs.class,onclick:e.attrs.onclick})}),$6ed1fb4f245a8c05$export$d0d76c231f6d55bd=(e,t)=>({getGames:async()=>{e.stream=await e.auth.openStream("/api/stream/event",{},t=>{switch(console.log("got game stream msg",t),t.type){case"gameStart":let n=e.games();n.push(t.game),e.games(n),1==n.length&&(console.log("one active game. loading now!"),e.game=n[0]);break;case"gameFinish":e.games(e.games().filter(e=>e.gameId!=t.game.gameId))}})}}),$6ed1fb4f245a8c05$export$e5446db5f37b1855=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(t.isMyTurn?".gamethumb.myturn":".gamethumb",{},[t.opponent.username,/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($497352f3986651c5$export$dc537a3a3893548e,{class:"thumb",config:{fen:t.fen,viewOnly:!0,orientation:t.color,lastMove:[t.lastMove.slice(0,2),t.lastMove.slice(2)]},onclick:n=>{console.log("game clicked",t),e.game=t,e.opponent=t.opponent,/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/online",{id:t.gameId})}})]),$6ed1fb4f245a8c05$export$93fd0e768dbd3f80=(e,t)=>{let n;return{listener:null,oninit:i=>{e.loggedIn||/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/login"),e.invert(!1);let r=e.games();console.log("games",r),e.games(r),e.input&&(n=e.input.addListener("noteon","all",e=>{console.log("connector got message",e);let n=t.launchToN(e.data[1]),i=n%8+(7-Math.floor(n/8))*8;console.log("selected game",i),i<r.length&&/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/online",{id:r[i].gameId})}),r.map((e,n)=>{let i=e.isMyTurn?2|$9066c94fd6c8e22f$export$9dae6f82820323cf:$9066c94fd6c8e22f$export$9dae6f82820323cf,r=n%8+8*(7-Math.floor(n/8)),o=t.nToLaunch(r);console.log("sending",e,n,o),t.send(i,[o,"white"==e.color?15:83])}),t.clearAnimations(),t.clear(),t.send($9066c94fd6c8e22f$export$9dae6f82820323cf,[e.top[e.top.length-1],$9066c94fd6c8e22f$export$56d196d2844d1ca1.q])),1==r.length&&(console.log("one active game. loading now!"),e.game=r[0],/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/online",{id:e.game.gameId}))},onremove:t=>{e.input&&e.input.removeListener(n)},view:n=>[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".toolbar",{},[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{onclick:t.getGames},"refresh"),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("a.inline",{href:"https://lichess.org/?any#ai",target:"_blank"},/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i.material-icons",{title:"create new game on Lichess.com"},/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("img.svgicon",{src:"dark"==e.theme?"static/lichess-logo-white.svg":"static/lichess-logo.svg"})))]),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".selector",{},[e.games().map(t=>$6ed1fb4f245a8c05$export$e5446db5f37b1855(e,t))])]}};let $6ed1fb4f245a8c05$var$config={movable:{color:"both",free:!1}};const $6ed1fb4f245a8c05$export$985739bfa5723e08=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".board",{oninit:n=>{console.log("game loading",n.attrs,e.chess.ascii()),t.streamGame(),t.afterInit()},oncreate:n=>{e.ground=$ea2d34c1974d7d8b$export$6aaf0e4db08ad996(n.dom,{...$6ed1fb4f245a8c05$var$config,...n.attrs.config}),e.ground.set({fen:e.chess.fen(),orientation:e.invert()?"black":"white",movable:{dests:$d5ffb40ab7d69c90$export$7dc676b6dd72d281(e.chess)},events:{select:n=>{console.log("chessground selected",n),e.chess.get(n)&&e.chess.get(n).color==e.chess.turn()&&(// clear previous selection
    t.lightBoard(),e.selectedSquare=n,e.selectedPiece=e.chess.get(n),t.highlightAvailableMoves(n))},move:(e,n)=>{t.onmove(e,n)}}})}}),$6ed1fb4f245a8c05$export$6996ecd26284460f=(e,t)=>({view:n=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".gamePage",{},[$ef84d931ff2e086e$export$4c260019440d418f(e,t),$6ed1fb4f245a8c05$export$985739bfa5723e08(e,t)])}),$6ed1fb4f245a8c05$export$2616165974278734=e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".me",{},e.user.username),$6ed1fb4f245a8c05$export$414a9ba52728302b=e=>e.opponent?/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".opponent",{},JSON.stringify(e.opponent)):null,$6ed1fb4f245a8c05$export$a22305df274c15ec=(e,t)=>({oninit:t=>{e.loggedIn||(console.log("not logged in. Redirecting to login"),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/login"))},view:n=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".gamePage",{},[$ef84d931ff2e086e$export$69d4e78a69e95731(e,t),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".top_user",{},e.invert()!=("b"==e.color)?$6ed1fb4f245a8c05$export$2616165974278734(e):$6ed1fb4f245a8c05$export$414a9ba52728302b(e)),$6ed1fb4f245a8c05$export$985739bfa5723e08(e,t),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".bottom_user",{},e.invert()!=("b"==e.color)?$6ed1fb4f245a8c05$export$414a9ba52728302b(e):$6ed1fb4f245a8c05$export$2616165974278734(e))])});function $325b867be1548751$export$120c0e7b1bef3ec7(e,t){return{view:n=>[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($325b867be1548751$export$5120f2d0b8d4cab8,{},e.user.profile),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("i",{onclick:e=>{(0,$3895aa91744b6895$exports.confirm)("Are you sure you want to deauthorize this device?",e=>{t.logout(),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/"),(0,$3895aa91744b6895$exports.message)("logged out",3)},e=>{console.log("That was a close one!")})}},"deauthorize this device")]}}function $325b867be1548751$export$5120f2d0b8d4cab8(){return{view:e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("table.profile",e.attrs,Object.keys(e.children[0]).map((t,n)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("tr.entry",{},[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("td.key",{},t),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("td.value",{},JSON.stringify(e.children[0][t]))])))}}$3895aa91744b6895$exports.defaults.glossary.title="LaunchChess",$3895aa91744b6895$exports.defaults.transition="zoom",$3895aa91744b6895$exports.defaults.theme.ok="ui positive button",$3895aa91744b6895$exports.defaults.theme.cancel="ui black button",$3895aa91744b6895$exports.defaults.notifier.delay=10;var $kWuxe=parcelRequire("kWuxe"),$48fb4da1ea4addfd$export$2e2bcd8739ae039={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'},$8b880b011fadfe36$export$f04a61298a47a40f=/** @class */function(){function e(){}return e.prototype.view=function(e){var t=e.attrs,n=t.class,i=t.intent,r=t.name,o=t.onclick,a=t.size,s=$17f1b9f8ce16014e$export$3c9a16f847548506(t,["class","intent","name","onclick","size"]),l=/*@__PURE__*/$parcel$interopDefault($fcc1f848a67e05c0$exports)($e4aeb149e284da0d$export$4dbe3495bda74f11.ICON,"".concat($e4aeb149e284da0d$export$4dbe3495bda74f11.ICON,"-").concat(r),i&&"cui-".concat(i),a&&"cui-".concat(a),o&&$e4aeb149e284da0d$export$4dbe3495bda74f11.ICON_ACTION,n),c=/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).trust("<svg viewBox='0 0 24 24'>".concat($48fb4da1ea4addfd$export$2e2bcd8739ae039[r],"</svg>"));return /*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("",$17f1b9f8ce16014e$export$18ce0697a983be9b($17f1b9f8ce16014e$export$18ce0697a983be9b({},s),{class:l,onclick:o}),c)},e}(),$d8e6351f6bd19e38$export$7f7cbe89f1eacd2=/** @class */function(){function e(){}return e.prototype.view=function(e){var t=e.attrs,n=t.active,i=t.background,r=t.class,o=t.fill,a=t.intent,s=t.message,l=t.size,c=$17f1b9f8ce16014e$export$3c9a16f847548506(t,["active","background","class","fill","intent","message","size"]),u=[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".".concat($e4aeb149e284da0d$export$4dbe3495bda74f11.SPINNER_CONTENT),[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".".concat($e4aeb149e284da0d$export$4dbe3495bda74f11.SPINNER_ICON)),s&&/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".".concat($e4aeb149e284da0d$export$4dbe3495bda74f11.SPINNER_MESSAGE),s)])];return /*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("",$17f1b9f8ce16014e$export$18ce0697a983be9b($17f1b9f8ce16014e$export$18ce0697a983be9b({},c),{class:/*@__PURE__*/$parcel$interopDefault($fcc1f848a67e05c0$exports)($e4aeb149e284da0d$export$4dbe3495bda74f11.SPINNER,n&&$e4aeb149e284da0d$export$4dbe3495bda74f11.SPINNER_ACTIVE,i&&$e4aeb149e284da0d$export$4dbe3495bda74f11.SPINNER_BG,o&&$e4aeb149e284da0d$export$4dbe3495bda74f11.SPINNER_FILL,a&&"cui-".concat(t.intent),l&&"cui-".concat(t.size),r)}),u)},e}();function $0e6f230737bfa6ad$export$c8733ae29fb53302(e){return null==e||""===e||!1===e}var $5b35d122dacb9815$export$353f5b6fc5456de1=/** @class */function(){function e(){}return e.prototype.view=function(e){var t=e.attrs,n=t.align,i=void 0===n?"center":n,r=t.active,o=t.basic,a=t.compact,s=t.class,l=t.disabled,c=t.fluid,u=t.href,h=t.iconLeft,d=t.iconLeftAttrs,p=t.iconRight,f=t.iconRightAttrs,m=t.intent,y=t.loading,g=t.label,v=t.onclick,b=t.outlined,x=t.rounded,_=t.size,E=t.sublabel,w=$17f1b9f8ce16014e$export$3c9a16f847548506(t,["align","active","basic","compact","class","disabled","fluid","href","iconLeft","iconLeftAttrs","iconRight","iconRightAttrs","intent","loading","label","onclick","outlined","rounded","size","sublabel"]),M=u?"a":"button",S="a"===M,N=/*@__PURE__*/$parcel$interopDefault($fcc1f848a67e05c0$exports)($e4aeb149e284da0d$export$4dbe3495bda74f11.BUTTON,i&&"".concat($e4aeb149e284da0d$export$4dbe3495bda74f11.ALIGN,"-").concat(i),r&&$e4aeb149e284da0d$export$4dbe3495bda74f11.ACTIVE,a&&$e4aeb149e284da0d$export$4dbe3495bda74f11.COMPACT,l&&$e4aeb149e284da0d$export$4dbe3495bda74f11.DISABLED,c&&$e4aeb149e284da0d$export$4dbe3495bda74f11.FLUID,y&&$e4aeb149e284da0d$export$4dbe3495bda74f11.LOADING,_&&"cui-".concat(_),m&&"cui-".concat(m),x&&$e4aeb149e284da0d$export$4dbe3495bda74f11.ROUNDED,o&&$e4aeb149e284da0d$export$4dbe3495bda74f11.BASIC,b&&$e4aeb149e284da0d$export$4dbe3495bda74f11.OUTLINED,$0e6f230737bfa6ad$export$c8733ae29fb53302(g)&&$0e6f230737bfa6ad$export$c8733ae29fb53302(E)&&(!h||!p)&&$e4aeb149e284da0d$export$4dbe3495bda74f11.BUTTON_ICON,s),A=[y&&/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($d8e6351f6bd19e38$export$7f7cbe89f1eacd2,{active:!0,fill:!0}),h&&/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($8b880b011fadfe36$export$f04a61298a47a40f,$17f1b9f8ce16014e$export$18ce0697a983be9b({name:h},d)),!$0e6f230737bfa6ad$export$c8733ae29fb53302(E)&&/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("span",{class:$e4aeb149e284da0d$export$4dbe3495bda74f11.BUTTON_SUBLABEL},E),!$0e6f230737bfa6ad$export$c8733ae29fb53302(g)&&/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("span",{class:$e4aeb149e284da0d$export$4dbe3495bda74f11.BUTTON_LABEL},g),p&&/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($8b880b011fadfe36$export$f04a61298a47a40f,$17f1b9f8ce16014e$export$18ce0697a983be9b({name:p},f))];return /*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(M,$17f1b9f8ce16014e$export$18ce0697a983be9b($17f1b9f8ce16014e$export$18ce0697a983be9b({type:S?void 0:"button",role:S?"button":void 0},w),{class:N,disabled:l,// Undefined attrs are not removed on redraw. See https://github.com/MithrilJS/mithril.js/pull/1865#issuecomment-382990558'
href:l?void 0:u,onclick:l?void 0:v,tabIndex:l?void 0:w.tabIndex}),A)},e}();const $ac5b3dd658baca4b$var$equals=(e,t)=>e.length===t.length&&e.every((e,n)=>e===t[n]),$ac5b3dd658baca4b$export$b2278035370d6017=(e,t)=>({connect:n=>{// search on device name only
    n=n.replace(" Out",""),e.connected&&t.disconnect(),e.output=(0,$kWuxe.WebMidi).getOutputByName(n||e.inputName),e.outputName=e.output.name,e.input=(0,$kWuxe.WebMidi).getInputByName(n||e.outputName),e.inputName=e.input.name,console.log("connected",e.input),e.input?(// send sysex to see if device is a launchpad
    e.connected=!0,e.deviceName=n,t.detectDevice(e.input,e.output)):e.connected=!1},connectInput:t=>{e.input=(0,$kWuxe.WebMidi).getInputById(t),e.inputName=e.input.name,console.log("connected",e.input),e.input?e.connected=!0:e.connected=!1},connectOutput:n=>{if(e.output=(0,$kWuxe.WebMidi).getOutputById(n),e.outputName=e.output.name,console.log("connected",e.output),e.output){// send sysex to see if device is a launchpad
    e.connected=!0;let n=$9066c94fd6c8e22f$export$776a922db93662cb[e.output.name];console.log("assigning ",n),Object.assign(t,$9066c94fd6c8e22f$export$4586496351d727fb[n](e,t)),Object.assign($b7ac0cf7b7632c81$export$83b795a96c5728f1,$9066c94fd6c8e22f$export$4586496351d727fb[n](e,t)),t.toggleLive(e.connected)}else e.connected=!1},disconnect:()=>{if(e.input){if(e.connected)try{t.toggleLive(!1)}catch(e){console.log("error disconnecting",e)}e.input.removeListener(),e.input=null,e.output=null}e.connected=!1},reloadInputs:()=>{if(e.inputs($kWuxe.WebMidi.inputs),e.outputs($kWuxe.WebMidi.outputs),!e.connected&&1==e.inputs().length){let n=e.inputs()[0].name;console.log("single input: auto connecting",n);let i=$9066c94fd6c8e22f$export$776a922db93662cb[n];console.log("auto connecting to ",n,i),Object.assign(t,$9066c94fd6c8e22f$export$4586496351d727fb[i](e,t)),Object.assign($b7ac0cf7b7632c81$export$83b795a96c5728f1,$9066c94fd6c8e22f$export$4586496351d727fb[i](e,t)),t.connect(n),t.toggleLive(e.connected)}/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).redraw()},initConnector:()=>{try{(0,$kWuxe.WebMidi).enable(function(n){console.debug($kWuxe.WebMidi.inputs),console.debug($kWuxe.WebMidi.outputs),t.reloadInputs(),(0,$kWuxe.WebMidi).addListener("connected",e=>{console.log("device connected"),t.reloadInputs()}),(0,$kWuxe.WebMidi).addListener("disconnected",n=>{console.log("device disconnected",n),n.port.name==e.deviceName&&(console.log("active device disconnected!"),e.connected=!1,/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).redraw()),t.reloadInputs()})},!0),window.onunload=e=>{console.log("unloading"),t.disconnect()}}catch(e){console.log("error setting up WebMidi",e)}},initMidi:(t,n,i)=>{console.log($kWuxe.WebMidi.inputs),console.log($kWuxe.WebMidi.outputs),e.input?(e.input.removeListener(),e.input.addListener("noteon","all",t),e.input.addListener("controlchange","all",n)):console.log("error, not connected"),i()},detectDevice:(n,i)=>{n.addListener("sysex","all",r=>{let o=r.data;if(console.log("got sysex message",r),$ac5b3dd658baca4b$var$equals(o.slice(0,5),[240,126,0,6,2])&&$ac5b3dd658baca4b$var$equals(o.slice(5,8),$9066c94fd6c8e22f$export$c6f17c29808f1b66)&&(console.log("found Novation product"),Object.values($9066c94fd6c8e22f$export$4b04cd3b2feae9ab).map(e=>{i.sendSysex($9066c94fd6c8e22f$export$c6f17c29808f1b66,[...e,14])})),$ac5b3dd658baca4b$var$equals(o.slice(0,4),[240,...$9066c94fd6c8e22f$export$c6f17c29808f1b66])&&14==o[6]){let i=o.slice(4,6);for(let r in console.log("identified device!",i),e.header=i,$9066c94fd6c8e22f$export$4b04cd3b2feae9ab)$ac5b3dd658baca4b$var$equals(i,$9066c94fd6c8e22f$export$4b04cd3b2feae9ab[r])&&(console.log("this is a ",r),e.deviceType=r,Object.assign(t,$9066c94fd6c8e22f$export$4586496351d727fb[r](e,t)),Object.assign($b7ac0cf7b7632c81$export$83b795a96c5728f1,$9066c94fd6c8e22f$export$4586496351d727fb[r](e,t)),n.removeListener("sysex"),t.toggleLive(!0))}}),i.sendSysex([126,127,6],[1])}}),$ac5b3dd658baca4b$export$b042cfedf6ae225e=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("select",{oninput:e=>t.connectInput(e.target.value)},e.inputs().map(t=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("option",{value:t.id,selected:t.name==e.inputName},t.name))),$ac5b3dd658baca4b$export$65f11d6055431773=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("select",{oninput:e=>t.connectOutput(e.target.value)},e.outputs().map(t=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("option",{value:t.id,selected:t.name==e.outputName},t.name))),$ac5b3dd658baca4b$export$4a18af0255371fd1=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("select",{value:e.deviceType,oninput:n=>{let i=n.target.value;console.log("selected",n,i),e.deviceType=i,e.connected&&(Object.assign(t,$9066c94fd6c8e22f$export$4586496351d727fb[i](e,t)),Object.assign($b7ac0cf7b7632c81$export$83b795a96c5728f1,$9066c94fd6c8e22f$export$4586496351d727fb[i](e,t)),e.input.removeListener("sysex"),t.toggleLive(!0))}},[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("option"),Object.keys($9066c94fd6c8e22f$export$4b04cd3b2feae9ab).map(e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("option",{value:e},e))]),$ac5b3dd658baca4b$export$32b0ea48e47b356c=(e,t,n)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($5b35d122dacb9815$export$353f5b6fc5456de1,{label:e,class:t.connected&&t.inputName==e?"glow active":"",onclick:i=>{t.connected?n.disconnect():n.connect(e)}},e),$ac5b3dd658baca4b$export$9e282393ab352bcd=(e,t)=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($5b35d122dacb9815$export$353f5b6fc5456de1,{onclick:e=>{t.disconnect()},iconLeft:"zap-off",label:"disconnect"}),$ac5b3dd658baca4b$export$f0de1ba241e121fd=(e,t)=>({view:n=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)(".ConnectionPage",{},[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("h1","Connect your Launchpad"),$ef84d931ff2e086e$export$b131c49b26d3f427(e),e.inputs().length?e.inputs().map(n=>{if(n.name in $9066c94fd6c8e22f$export$776a922db93662cb){let i=Object.keys($9066c94fd6c8e22f$export$776a922db93662cb).filter(e=>n.name.includes(e));if(console.log(`checking ${n.name}`,i),i.length)return $ac5b3dd658baca4b$export$32b0ea48e47b356c(n.name,e,t)}}):"no Launchpads detected",e.connected?$ac5b3dd658baca4b$export$9e282393ab352bcd(e,t):null,/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("h3",{},"Input"),$ac5b3dd658baca4b$export$b042cfedf6ae225e(e,t),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("h3",{},"Output"),$ac5b3dd658baca4b$export$65f11d6055431773(e,t),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("h3",{},"Type"),$ac5b3dd658baca4b$export$4a18af0255371fd1(e,t)])}),$bd2f53e1120bdd66$export$b94310965bed44e6=(e,t)=>({view:()=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("#home",{},[/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("h1#home",{},"LaunchChess.com"),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("h4#home",{},["Play chess on your ",/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("a",{href:"https://novationmusic.com/en/launch/"},"Novation Launchpad")]),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("br"),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("",{},["More details at the project homepage: ",/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("a",{href:"https://quaternion.media/launchchess"},"quaternion.media/launchchess")]),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("br"),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($ac5b3dd658baca4b$export$f0de1ba241e121fd(e,t)),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("br"),e.connected?["Connected!",/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)("br"),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($5b35d122dacb9815$export$353f5b6fc5456de1,{label:"play over the board",onclick:e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/otb")}),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports)($5b35d122dacb9815$export$353f5b6fc5456de1,{label:"play over the internet",onclick:e=>/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route.set("/games")})]:null])});console.log("launchchess started!");var $b7ac0cf7b7632c81$var$state=$a01e4d144b50218c$export$7254cc27399e90bd(),$b7ac0cf7b7632c81$export$e324594224ef24da={};Object.assign($b7ac0cf7b7632c81$export$e324594224ef24da,$a01e4d144b50218c$export$b52183d5cfb26dc9($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da)),Object.assign($b7ac0cf7b7632c81$export$e324594224ef24da,$cae4a8b830b22bcf$export$683788d28fb74d54($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da)),Object.assign($b7ac0cf7b7632c81$export$e324594224ef24da,$ac5b3dd658baca4b$export$b2278035370d6017($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da)),Object.assign($b7ac0cf7b7632c81$export$e324594224ef24da,$6ed1fb4f245a8c05$export$d0d76c231f6d55bd($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da)),Object.assign($b7ac0cf7b7632c81$export$e324594224ef24da,$22788da0e2196326$export$2fb70d5e506c6bc2($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da));var $b7ac0cf7b7632c81$export$83b795a96c5728f1={...$b7ac0cf7b7632c81$export$e324594224ef24da,...$a01e4d144b50218c$export$81ce9b7e86ec18db($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da)};$b7ac0cf7b7632c81$export$e324594224ef24da.initConnector(),$b7ac0cf7b7632c81$export$e324594224ef24da.initAuth(),console.log($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da),/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).mount(document.body,$3f934752a4447ac8$export$c84671f46d6a1ca($b7ac0cf7b7632c81$var$state));let $b7ac0cf7b7632c81$var$main=document.getElementById("main");document.body.className+=$b7ac0cf7b7632c81$var$state.theme,/*@__PURE__*/$parcel$interopDefault($231519b62b676521$exports).route($b7ac0cf7b7632c81$var$main,"/",{"/":$bd2f53e1120bdd66$export$b94310965bed44e6($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da),"/connect":$ac5b3dd658baca4b$export$f0de1ba241e121fd($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da),"/otb":$6ed1fb4f245a8c05$export$6996ecd26284460f($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da),"/games":$6ed1fb4f245a8c05$export$93fd0e768dbd3f80($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da),"/online":$6ed1fb4f245a8c05$export$a22305df274c15ec($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$83b795a96c5728f1),"/login":$bb75f90500322e40$export$21a94553ffa41578($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da),"/profile":$325b867be1548751$export$120c0e7b1bef3ec7($b7ac0cf7b7632c81$var$state,$b7ac0cf7b7632c81$export$e324594224ef24da)}),window.state=$b7ac0cf7b7632c81$var$state,window.actions=$b7ac0cf7b7632c81$export$e324594224ef24da;//# sourceMappingURL=index.509fcfc2.js.map

//# sourceMappingURL=index.509fcfc2.js.map
