import m from 'mithril'
import HueBee from 'huebee'
import '../node_modules/huebee/huebee.css'
import './color.css'

const ColorSelector = (piece, color, actions) =>
  m('input.color-input', {
    value: LAUNCHPAD_COLORS[color],
    oncreate: vnode => {
      new HueBee(vnode.dom, {
        customColors: LAUNCHPAD_COLORS,
        shades: 0,
      }).on('change', color => {
        index = LAUNCHPAD_COLORS.indexOf(color)
        console.log(
          `color for piece ${piece} changed to ${color}, index ${index}`
        )
        actions.setColor(piece, index)
      })
    },
  })

export const ColorConfig = (state, actions) =>
  m('.colors', {}, [
    Object.keys(state.colors).map((piece, n) =>
      m('span.color', {}, [
        m('p.type', {}, piece),
        ColorSelector(piece, state.colors[piece], actions),
      ])
    ),
  ])

// Default colors
export const COLORS = {
  p: 13,
  r: 9,
  n: 45,
  b: 37,
  q: 53,
  k: 49,
  white: 3,
  dim_white: 1,
  black: 0,
  movable: 21,
  moved: 89,
  check: 5,
  brown: 83,
}

// Available Launchpad colors
export const LAUNCHPAD_COLORS = [
  '#000000',
  '#B3B3B3',
  '#DDDDDD',
  '#FFFFFF',
  '#FFB3B3 ',
  '#FF6161',
  '#DD6161',
  '#B36161',
  '#FFF3D5',
  '#FFB361',
  '#DD8C61',
  '#B37661',
  '#FFEEA1',
  '#FFFF61',
  '#DDDD61',
  '#B3B361',
  '#DDFFA1',
  '#C2FF61',
  '#A1DD61',
  '#81B361',
  '#C2FFB3',
  '#61FF61',
  '#61DD61',
  '#61B361',
  '#C2FFC2',
  '#61FF8C',
  '#61DD76',
  '#61B36B',
  '#C2FFCC',
  '#61FFCC',
  '#61DDA1',
  '#61B381',
  '#C2FFF3',
  '#61FFE9',
  '#61DDC2',
  '#61B396',
  '#C2F3FF',
  '#61EEFF',
  '#61C7DD',
  '#61A1B3',
  '#C2DDFF',
  '#61C7FF',
  '#61A1DD',
  '#6181B3',
  '#A18CFF',
  '#6161FF',
  '#6161DD',
  '#6161B3',
  '#CCB3FF',
  '#A161FF',
  '#8161DD',
  '#7761B2',
  '#FFB2FE',
  '#FF60FE',
  '#DD60DC',
  '#B360B2',
  '#FEB2D5',
  '#FF60C3',
  '#DD60A0',
  '#B3608D',
  '#FF7760',
  '#E8B360',
  '#DDC360',
  '#A1A161',
  '#60B261',
  '#61B28D',
  '#608CD4',
  '#6060FF',
  '#60B2B3',
  '#8C60F2',
  '#CDB3C3',
  '#8C7780',
  '#FF6060',
  '#F2FFA0',
  '#EEFD60',
  '#CCFE60',
  '#77DC61',
  '#60FFCD',
  '#61E8FE',
  '#61A0FE',
  '#8D61FE',
  '#CD61FD',
  '#EF8CDC',
  '#A17760',
  '#FEA160',
  '#DCF861',
  '#D5FF8C',
  '#60FF60',
  '#B3FEA0',
  '#CDFDD5',
  '#B3FFF6',
  '#CDE4FE',
  '#A1C2F6',
  '#D4C2F8',
  '#F88DFF',
  '#FE61CD',
  '#FEC361',
  '#F3EF60',
  '#E5FE61',
  '#DDCD60',
  '#B2A061',
  '#61BA76',
  '#77C38C',
  '#8080A1',
  '#808CCD',
  '#CCAA81',
  '#DD6161',
  '#F8B3A0',
  '#F8BA77',
  '#FEF28C',
  '#E8F9A0',
  '#D4EF76',
  '#8080A1',
  '#F8F9D4',
  '#DCFDE4',
  '#E9E8FE',
  '#E5D4FF',
  '#B3B3B3',
  '#D5D5D5',
  '#F9FFFF',
  '#E86160',
  '#AA6060',
  '#81F760',
  '#60B261',
  '#F3EF60',
  '#B2A061',
  '#EEC360',
  '#C37761',
]
